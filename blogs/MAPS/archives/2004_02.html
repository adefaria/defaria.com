<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 3.2" />

   <link rel="stylesheet" href="http://defaria.com/blogs/MAPS/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/MAPS/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/MAPS/index.xml"$>" />

   <title>MAPS: February 2004 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/MAPS/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/MAPS/archives/2003_11.html" title="November 2003" />
   <link rel="next" href="http://defaria.com/blogs/MAPS/archives/2004_03.html" title="March 2004" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/MAPS/" accesskey="1">MAPS</a></h1>
               <h2 id="banner-description"></h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/MAPS/archives/2003_11.html">&laquo; November 2003</a> |
                        <a href="http://defaria.com/blogs/MAPS/">Main</a>
                        | <a href="http://defaria.com/blogs/MAPS/archives/2004_03.html">March 2004 &raquo;</a>
                     </p>
                     
                                          

                     <h2 class="date-header">February 17, 2004</h2>
                     <a id="a000139"></a>
                     <div class="entry" id="entry-139">
                        <h3 class="entry-header">Login bug</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>Squashed a nasty bug, well actually a lack of implementation. After converting some of the web pages to PHP I neglected to implement Login in PHP! Now implemented.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by Andrew DeFaria at 11:25 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/MAPS/archives/000139.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                                          

                     <h2 class="date-header">February 16, 2004</h2>
                     <a id="a000138"></a>
                     <div class="entry" id="entry-138">
                        <h3 class="entry-header">Space</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>Added new "Space Usage" report. Not sure if I like this because 1) it's too slow and 2) the resulting report is not very impressive - it's just a line saying "User is using X bytes in the databsase". Might wish to implement a space counter in the user table. This would require that all procedures updating the database update the space counter. The intent for this space counter is to judge how much space a user is using in the database for the purposes of quotas or perhaps to charge people if they want more space.</p>

<p>Also, currently this space report is only counting space used in the email table. Might wish to add in the log table, which can add up, and the user and useropts tables. The latter two are minimal but including them would make the report more accurate.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by Andrew DeFaria at 11:12 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/MAPS/archives/000138.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                                          

                     
                     <a id="a000137"></a>
                     <div class="entry" id="entry-137">
                        <h3 class="entry-header">Delete bug</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>Many, many improvements have happened to MAPS. I have not been keeping this blog up to date. I will try to do better. Here are some of the things that have been implemented or improved:</p>

<ol>

<li>Went live 12/10/2003! We are now using MAPS from the Linux system and using the MySQL backend.</li>

<li>Many improvements and implemented a lot of the pages</li>

<li>Started re-writing things in PHP. PHP is pretty cool and now that I have mod PHP running it's also quick. I suspect that if I managed to get mod Perl installed that that would solve some of the sluggishness of the Perl pages, however PHP is more "web friendly" and it's nice not having to write a whole web page just because part of it will be dynamic</li>

<li>Implemented most of the "list" processing. You can now add/change and delete entries in the various lists.</li>

<li>Details.cgi needs some work but otherwise is functional. You can even select entries and say Add to Null list, etc.</li>

<li>Implemented Returned Messages by Domain report (in PHP)</li>

<li>Updated the look of the register and blacklist return messages</li>

<li>Implemented the Forgot Your Password link</li>

<li>Making pages have refresh option so that Quickstats updates itself. Added time to Quickstats</li>

<li>Implemented search facility to search sender and subject in returned email. While this is helpful it's not finished yet. Also takes a long time on a large message base...</li>

<li>Changed MAPS to only send return message once instead of up to 5 times</li>

<li>Changed MAPS to use envelope address if From address is blank</li>

</ol>

<p>That said here's a bug:</p>

<p>When an entry is added to a list the system now searches the other lists and if a matching entry appears in another list it is deleted. This effectively "moves" the entry. Problem is that the delete does not resequence the list that it deleted the entry from.</p>

<p>We should also consider decoupling the sequence # concept. I don't think it is necessary anymore. MAPS applies filtering based on lists - order doesn't seem to be important.</p>

<p>We might also consider not basing the stats and detail pages off of the log entries but directly off of the email in the email table.</p>

<p>Might wish to implement a "super white list". Super white list would be bascially the users address book. The "other" white list would be entries added by registration. User should be able to promote from white list -> super white list. The difference is that the super white list would be applied before other lists. Currently MAPS processes lists in the following order:</p>

<ul>

<li>Check null list. If found send message to /dev/null</li>

<li>Check black list. If found send blacklist.html to the sender and discard message</li>

<li>Check white list. If found deliver message</li>

<li>Otherwise return message (if we have not already returned a message for this sender)</li>

</ul>

<p>This way the user can apply special privilege for some users. For example, I'd really like to null list all of the *.br$ spam I get but if I did I could not get email from my dad in Brasil. If I had a super white list I could add his address to it and then nulllist everybody else.</p>

<p>We also need to figure out how to handle spam I get when the spammer sets From to be me (or anybody else on my white list). I was thinking about an X-MAPS header that I could set for myself. This would not solve the problem of a spammer sending me spam from somebody else on my white list though I've yet to see that - it would be rare. Except for domain whitelisting such as *@defaria.com. Not sure how to address that</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by Andrew DeFaria at 12:24 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/MAPS/archives/000137.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
