<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Movable Type 5.2.3" />
<link rel="stylesheet" href="http://defaria.com/blogs/MAPS/styles.css" type="text/css" />
<link rel="start" href="http://defaria.com/blogs/MAPS/" title="Home" />
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="http://defaria.com/blogs/MAPS/atom.xml" />
<script type="text/javascript" src="http://defaria.com/blogs/MAPS/mt.js"></script>


    <title>MAPS: July 2007 Archives</title>


    <link rel="prev" href="http://defaria.com/blogs/MAPS/archives/2006/04/" title="April 2006" />
    

</head>
<body id="classic-blog" class="mt-archive-listing mt-datebased-monthly-archive layout-wtt">
    <div id="container">
        <div id="container-inner">


            <div id="header">
    <div id="header-inner">
        <div id="header-content">


            <div id="header-name"><a href="http://defaria.com/blogs/MAPS/" accesskey="1">MAPS</a></div>
            <div id="header-description"></div>

        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <h1 id="page-title" class="archive-title">July 2007 Archives</h1>





                            
                            <div id="entry-651" class="entry-asset asset hentry">
    <div class="asset-header">
        <h2 class="asset-name entry-title"><a href="http://defaria.com/blogs/MAPS/archives/2007/07/hit-count-and-l.html" rel="bookmark">Hit Count and Last Hit</a></h2>
        <div class="asset-meta">
            <span class="byline">
    
                <abbr class="published" title="2007-07-13T17:26:08-06:00">July 13, 2007  5:26 PM</abbr>
    
            </span>

            
            

        </div>
    </div>
    <div class="asset-content entry-content">

        <div class="asset-body">
            <p>After having left MAPS pretty much alone for a long time, though I did implement "nuke" which helps nuke whole domains, I finally have implemented new functionality for MAPS. You see over this last year or so I've been getting a lot of spam mostly oriented in which the domain name was wildly varying. So lots of mail loops were happening. Whacking whole domains became a favorite past time of mine and hence the "nuke" script (not an official part of MAPS mind you). Still it seemed like a losing battle.</p>

<p>Then I got to thinking - something I've been thinking for a while - how effective are all of my null list entries, now numbering in the 17K area! I thought that I could easily add some fields to the list table, namely a hit_count and a last_hit field, and then during scrubbing time see if these null list entries were at all effective, and if not then to automatically remove them.</p>

<p>So I added the fields and changed MAPS such that it records the hits and when the last hit happened. Then in mapsscrub check to see if last_hit is older than the number of days the user is keeping history. If it's 0 then simply remove that entry. Note this happens only for the null list. White list and black list are to be managed by the user. You purposely add somebody to the white or black list for a reason. Do we want to auto age these off? Probably not.</p>

<p>If the hit count is not 0 then how do we age off these apparently no longer effective null list entries? Well the though was to age them by subtracting 1 from the hit count. Thus if we had a null list entry that was fairly active for a little while and say accumulated a hit_count of 10 but then was largely un-hit, the hit_count would go 9, 8, 7, 6, 5... down to 0 and then the entry would be removed. I might want to change this as some null list entries are getting hit_counts in the thousands now! Assuming the user has a 30 day history then perhaps after 30 days of inactivity I should age any null list entry off the list in 7 days? Note that any activity in those 30 days would immediately reset the clock for at least the next 30 days (assuming a history of 30 days).</p>

<p>With this in place I decided to change the mail loop procedure to auto add the sender to the null list. Previously I was whacking off the whole domain - here we are just auto adding the individual sending address. But it's automatically added, automatically tracked for effectiveness and automatically aged off. Beside I still have the option of perusing the top returning domains and can whack whole domains still. Now any hits on any users in the domain will continue to insure that that domain null list entry will remain and not automatically age away...</p>
        </div>



    </div>
    <div class="asset-footer"></div>
</div>




                            <div class="content-nav">
                                <a href="http://defaria.com/blogs/MAPS/archives/2006/04/">&laquo; April 2006</a> |
                                <a href="http://defaria.com/blogs/MAPS/">Main Index</a> |
                                <a href="http://defaria.com/blogs/MAPS/archives.html">Archives</a>
                                
                            </div>


                        </div>
                    </div>


                    <div id="beta">
    <div id="beta-inner">


    
    <div class="widget-archive widget-archive-category widget">
    <h3 class="widget-header">Categories</h3>
    <div class="widget-content">
    
    </div>
</div>




    <div class="widget-archive-monthly widget-archive widget">
    <h3 class="widget-header">Monthly <a href="http://defaria.com/blogs/MAPS/archives.html">Archives</a></h3>
    <div class="widget-content">
        <ul>
        
            <li><a href="http://defaria.com/blogs/MAPS/archives/2007/07/">July 2007 (1)</a></li>
        
    
        
            <li><a href="http://defaria.com/blogs/MAPS/archives/2006/04/">April 2006 (1)</a></li>
        
    
        
            <li><a href="http://defaria.com/blogs/MAPS/archives/2005/11/">November 2005 (2)</a></li>
        
    
        
            <li><a href="http://defaria.com/blogs/MAPS/archives/2004/03/">March 2004 (1)</a></li>
        
    
        
            <li><a href="http://defaria.com/blogs/MAPS/archives/2004/02/">February 2004 (3)</a></li>
        
    
        
            <li><a href="http://defaria.com/blogs/MAPS/archives/2003/11/">November 2003 (3)</a></li>
        
    
        
            <li><a href="http://defaria.com/blogs/MAPS/archives/2003/10/">October 2003 (9)</a></li>
        
        </ul>
    </div>
</div>
        
    



<div class="widget-pages widget">
    <h3 class="widget-header">Pages</h3>
    <div class="widget-content">
        <ul>
    
    
        </ul>
    </div>
</div>

<div class="widget-syndication widget">
    <div class="widget-content">
        <ul>
            <li><img src="http://defaria.com/mt/mt-static/images/status_icons/feed.gif" alt="Subscribe to feed" width="9" height="9" /> <a href="http://defaria.com/blogs/MAPS/atom.xml">Subscribe to this blog's feed</a></li>

        </ul>
    </div>
</div>
<div class="widget-powered widget">
    <div class="widget-content">
        <a href="http://www.movabletype.com/"><img src="http://defaria.com/mt/mt-static/images/bug-pbmt-white.png" alt="Powered by Movable Type 5.2.3" width="120" height="75" /></a>
    </div>
</div>



    </div>
</div>



    
<div id="gamma">
    <div id="gamma-inner">
    <div class="widget-search widget">
    <h3 class="widget-header">Search</h3>
    <div class="widget-content">
        <form method="get" action="http://defaria.com/mt/mt-search.cgi">
            <input type="text" id="search" class="ti" name="search" value="" />

            <input type="hidden" name="IncludeBlogs" value="3" />

            <input type="hidden" name="limit" value="20" />
            <input type="submit" accesskey="4" value="Search" />
        </form>
    </div>
</div>

<div class="widget-about-this-page widget">
    <h3 class="widget-header">

    
        About this Archive
    


    </h3>
    <div class="widget-content">





        <p class="first">This page is an archive of entries from <strong>July 2007</strong> listed from newest to oldest.</p>
    
        <p><a href="http://defaria.com/blogs/MAPS/archives/2006/04/">April 2006</a> is the previous archive.</p>
    
    


        <p>Find recent content on the <a href="http://defaria.com/blogs/MAPS/">main index</a> or look in the <a href="http://defaria.com/blogs/MAPS/archives.html">archives</a> to find all content.</p>

    </div>
</div>


    </div>
</div>




                </div>
            </div>


            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
            <div class="widget-powered widget">
                <div class="widget-content">
                    Powered by <a href="http://www.movabletype.org/">Movable Type</a>
                </div>
            </div>

        </div>
    </div>
</div>



        </div>
    </div>
</body>
</html>
