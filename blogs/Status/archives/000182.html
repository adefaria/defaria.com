<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml" />

   <title>Status for Andrew DeFaria: ASAP_NOTIFY/PMO view/Install Scripts</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/000181.html" title="BUCS PVOB" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/000183.html" title="LogActivity/ASAP &amp; ASAP_BUS_REQ/.reg files" />

   

   

   <script type="text/javascript" src="http://defaria.com/blogs/Status/mt-site.js"></script>
</head>
<body class="layout-one-column" onload="individualArchivesOnLoad(commenter_name)">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">

                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/000181.html">&laquo; BUCS PVOB</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/000183.html">LogActivity/ASAP & ASAP_BUS_REQ/.reg files &raquo;</a>
                     </p>

                     <a id="a000182"></a>
                     <div class="entry" id="entry-182">
                        <h3 class="entry-header">ASAP_NOTIFY/PMO view/Install Scripts</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>

<li>Created new tools view named PMO</li>

<li>Installed ASAP_NOTIFY trigger</li>

<li>Created installation scripts</li>

</ul>

                           </div>
                           <div id="more" class="entry-more">
                              <h3>PMO View</h3>

<p>The vobadm_tools_view recently had a problem. Originally it was created by Brian as a snapshot view and a dynamic view - not a recommended practice I'm sure. Anyways, I was not able to update it recently. It complained about CM_TOOLS not being a Clearcase object! I banged on it for a while and couldn't figured it out. Sensing an opportunity to shorten a pathname, I discussed this with Don and we decided to create a new snapshot view, on the real view server (rtnlprod02) with a shorter name. So I created the PMO snapshot view. This makes the path \\rtnlprod02\viewstore\PMO\CM_TOOLS\...</p>

<p>Note, I have already taken care of adjusting the triggers, mktriggers.pl, ccase_[un]lock_vobs.bat jobs and the task_registry.</p>

<h3>ASAP_NOTIFY Trigger</h3>

<p>Triggers are kept in the CM_TOOLS vob. Also there is a mktriggers.pl script whose responsibility is to add/replace all triggers to all vobs. It works off a data file and is a fairly flexible facility. Some triggers are applied to all vobs (e.g. PROTECT), some to base Clearcase vobs only (e.g. CHECK_COMMENT) and some to specific vobs (e.g. ASAP_NOTIFY). This script is designed to be run at any time and will reinstate the correct status of triggers in the vobs. It is very handy to have a script to set up your triggers. One place where this will be very useful is when we get to Multisiting things. Multisite will replicate the vobs but not their triggers. Multisite can be used to make a "backup region" which can be useful in disaster recovery. Being able to quickly reinstate your triggers in these cases if very valuable.</p>

<p>As for another trigger to log activity I see it going this way...</p>

<p>A vob activity trigger is a useful idea and it's conceivable that other projects might want such a facility. Being that the "log" is really an html file there are only 2 things that are needed: 1) a web server and it's URL and 2) writable space to put these html files. Additionally one might be concerned with managing this space (trimming/removing log files over time) and perhaps presenting an interface into this history.</p>

<p>I think a trigger should be developed or culled out of the current trigger, which performs two distinct tasks, generalized and made available for the ASAP_Docs vob and other vobs as the vob owners require. This trigger can be implemented as an "all element" trigger (covering the whole vob) or just a trigger that can be attached as we have done for 03_Design. Being generalized more information must be written into the log (html) file to distinguish the elements more precisely. These are the vob name (e.g. ASAP_Src) and the path into the vob (e.g. ASAP\Include) (If we keep on logfile per vob then the vob name can stay promoted in the heading).</p>

<p>So the table entry would change from:</p>

<h2>Elements modified in \ASAP_Docs on 05-17-2004</h2>

    <table border=1 cellspacing=0 cellpadding=2>
      <tr bgcolor="#c0c0c0" align="center" nowrap>
        <th>User Name</th>
        <th>Element Type</th>
        <th>Element Name</th>
        <th>Element version</td>
        <th>Comment</th>
      </tr>
      <tr>
        <td>ss046959</td>
        <td>ms_word</td>
        <td>ASAP_modelnotes_1.doc</td>
        <td>\main\dev\2</td>
        <td>checkout and check in test only. no modification of data</td>
      </tr>
<tr>
  <td>ss046959</td>
  <td>directory</td>
  <td>ASAP_Prototype_Documents</td>
  <td>\main\dev\2</td>
  <td>this is just a checkin check out test.testing the ccweb and the new trigge
r on this folder.no data was modified. </td>
</tr>
</table>

<p>To:</p>

    <table border=1 cellspacing=0 cellpadding=2>
      <tr bgcolor="#c0c0c0" align="center" nowrap>
        <th>User</th>
        <th>Type</th>
        <th>Path</th>
        <th>Name</th>
        <th>Version</td>
        <th>Comment</th>
      </tr>
      <tr>
        <td>ss046959</td>
        <td>ms_word</td>
        <td>\03_Design\Conceptual Data Model\2004_04_15</td>
        <td>ASAP_modelnotes_1.doc</td>
        <td>\main\dev\2</td>
        <td>checkout and check in test only. no modification of data</td>
      </tr>
<tr>
  <td>ss046959</td>
  <td>directory</td>
  <td>\03_Design\Prototypes</td>
  <td>ASAP_Prototype_Documents</td>
  <td>\main\dev\2</td>
  <td>this is just a checkin check out test.testing the ccweb and the new trigge
r on this folder.no data was modified. </td>
</tr>
</table>

<p>This would not be that hard. The trigger would take one parameter, the path to the share to write the html files to (e.g. \\webapp01\Rational\asapcm\logs in the instant case).</p>

<p>If this trigger was created and implemented (and removed from the current trigger) then all that's left in the current trigger is the sending of email. This could be accomplished with the existing NotifyTrigger.pl and a data file such as:</p>

<pre>
From: Vobadm <vobadm@Ameriquest.net>
To: <***ADD EMAIL ADDRESSES HERE***>
Subject: $CLEARCASE_OP_KIND notification: $CLEARCASE_PN
--
This is a notification that a $CLEARCASE_OP_KIND has occurred:

Element:        $CLEARCASE_PN
Branch:         $CLEARCASE_BRTYPE
Operation:      $CLEARCASE_OP_KIND
User:           $CLEARCASE_USER
View:           $CLEARCASE_VIEW_TAG
Comments:

$CLEARCASE_COMMENT
</pre>

</p>To view historical information see http://ASAPCM.Ameriquest.net/logs</p>

<p>The trigger replaces $ENVIRONMENT_VARIABLE. We would just need to modify this data file to be From: ASAPAdmin@Ameriquest.net (and we really should hook up a real person to that email address), add the email addresses to the To line.</p>

<p>The URL http://ASAPCM.Ameriquest.net/logs is a directory so the web server will look for certain files such as index.html and index.cgi. An index.cgi script could be written that writes out a web page showing today's activity, complete with a little calendar with links to prior history.</p>

<blockquote><p>Actually, I'd recommend perhaps collapsing the modified/newelements by adding a column that simply says something like "Modified" or "Added". This way we don't have to deal separately with modified vs. newly added in index.cgi nor in any of the historical html logfile.</p></blockquote>

<p>This way the email message is simplified. The recipients get notification via email that something has changed with enough information to tell them the specific change. If they want to know about other things that changed recently they are pointed to one place to see the current data, with an easy way to scroll back through time.</p>

<p>Now I've done such little web apps on my domain (http://defaria.com) in Perl and PHP. Given a preference I'd prefer PHP. However http;//asapcm.ameriquest.net is running IIS and I have no idea of how to set up and run Perl/PHP on IIS.</p>

                           </div>
                        </div>
                        <p class="entry-footer">
                           <span class="post-footers">Posted by  on May 17, 2004  4:45 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000182.html">Permalink</a>
                        </p>
                     </div>

                     

                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
