<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml" />

   <title>Status for Andrew DeFaria: Files4ecr</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/000271.html" title="files4ecr.pl" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/000273.html" title="ecrdesc" />

   

   

   <script type="text/javascript" src="http://defaria.com/blogs/Status/mt-site.js"></script>
</head>
<body class="layout-one-column" onload="individualArchivesOnLoad(commenter_name)">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">

                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/000271.html">&laquo; files4ecr.pl</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/000273.html">ecrdesc &raquo;</a>
                     </p>

                     <a id="a000272"></a>
                     <div class="entry" id="entry-272">
                        <h3 class="entry-header">Files4ecr</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>

<li>Finished up files4ecr</li>

<li>PPC toolchain build W/23084 is failing</li>

</ul>
                           </div>
                           <div id="more" class="entry-more">
                              <h3>files4ecr</h4>

<p>From the <a href="news:gnu.cvs.help">gnu.cvs.help</a> newsgroup I learned that doing a cvs log of everything then grepping through that is <b>much</b> faster than interrogating each file with cvs log. I then reorganized files4ecr to work in the following manner:</p>

<p>It occurred to me that often we wish to know, or pull, the file
revision associated with an ECR #. I've created a script called
files4ecr that accomplishes this:</p

<div class="code"><pre>
<font color="#3333ff">saturn:</font><u>files4ecr-u</u>
Usage: files4ecr [-v] [-d] [-l] [-x] [-u] &lt;ecr&gt;

Where:
 
        -v:     Turn on verbose mode (Default: off)
        -d:     Turn on debug mode (Default: off)
        -l:     Local directory only, no recursion
        -x:     Turn on execute mode (Default: off)
        -u:     Dsplay usage
        ecr     ECR number to search for
</pre>
</div>

<p>The performance for this script is pretty good, depending on the amount of information in the CVS logs. Here's an example of it's usage:</p>

<div class="code"><pre>
<font color="#3333ff"><b>saturn:</b></font><u>files4ecr 20505</u>
SETUP.csh: 10.2 - Out of date
etc/tconfig: 10.2 - Already up to date
SETUP.bash: 10.6 - Out of date
etc/ttys-arm: 1.1 - Already up to date
Makefile: 10.13 - Out of date
</pre></div>

<p>In noexecute mode it just displays the file and the revision of the
file associated with that ECR. The -l option is similar to cvs' -l option:</p>

<div class="code"><pre>
<font color="#3333ff">saturn:</font><u>files4ecr -l 20505</u>
SETUP.csh: 10.2 - Out of date
SETUP.bash: 10.6 - Out of date
Makefile: 10.13 - Out of date
</pre></div>

<p>Also, like cvs, files4ecr operates in the current context and current
working directory.</p>

<p>With -x turned on files4ecr will perform the cvs update commands
necessary to "pull" the versions for the ECR:</p>

<div class="code"><pre>
<font color="#3333ff">saturn:</font><u>files4ecr -x 20505</u>
cvs update -r10.2&nbsp; SETUP.csh - Updated
cvs update -r10.2&nbsp; etc/tconfig - Already up to date
cvs update -r10.6&nbsp; SETUP.bash - Updated
cvs update -r1.1&nbsp; etc/ttys-arm - Already up to date
cvs update -r10.13&nbsp; Makefile - Updated
</pre></div>

<p>And we can see that the update has taken place:</p>

<div class="code"><pre>
<font color="#3333ff">saturn:</font><u>files4ecr 20505</u>
SETUP.csh: 10.2 - Already up to date
etc/tconfig: 10.2 - Already up to date
SETUP.bash: 10.6 - Already up to date
etc/ttys-arm: 1.1 - Already up to date
Makefile: 10.13 - Already up to date
</pre></div>

<p>Anybody interested in such a script?</p>

<p><b>Note:</b> I've noticed that "ECR Number:" is not necessarily a
consistent indicator of an ECR number. I search for several strings:</p>

<div class="code"><pre>
/^ECR Number: (\d*)$/    or
/^ECR# (\d*)$/           or
/^ECR # (\d*)$/          or
/^\s*ECR (\d*)/
</pre></div>

<p>I've also noticed that a single ECR number may be attached to several revisions. files4ecr takes the latest revision in such cases.</p>

<h2>PPC toolchain build W/23084 is failing</h2>

<p>Preliminary investigation shows that while attempting to configure libiberty the build process is unable to use gcc to compile things. It seems to be lacking a crt1.o</p>
                           </div>
                        </div>
                        <p class="entry-footer">
                           <span class="post-footers">Posted by  on January  6, 2005 10:31 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000272.html">Permalink</a>
                        </p>
                     </div>

                     

                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
