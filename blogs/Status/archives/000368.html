<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml" />

   <title>Status for Andrew DeFaria: 2.1.0 problem/3.4.3 gcc/GDB 6.0</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/000367.html" title="build_los178 enhancements/3.4.3 toolchain build" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/000369.html" title="3.4.3 toolchain build/LOS178 Makefile global clean/clobber" />

   

   

   <script type="text/javascript" src="http://defaria.com/blogs/Status/mt-site.js"></script>
</head>
<body class="layout-one-column" onload="individualArchivesOnLoad(commenter_name)">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">

                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/000367.html">&laquo; build_los178 enhancements/3.4.3 toolchain build</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/000369.html">3.4.3 toolchain build/LOS178 Makefile global clean/clobber &raquo;</a>
                     </p>

                     <a id="a000368"></a>
                     <div class="entry" id="entry-368">
                        <h3 class="entry-header">2.1.0 problem/3.4.3 gcc/GDB 6.0</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Rebuilding LOS178 2.1.0</li>

  <li>Attempted to build 3.4.3 on RH 8.0. Didn't work. Reattempting on RH 9.0 machine, shrike</li>

  <li>Setup coolcat Windows box to attempt to build GDB 6.0</li>

  <li>Changed Logger.pm to set autoflush</li>

  <li>Changed build_los178 to look for sendmail</li>

  <li>Worked on improving rename.sh to handle multiple versions. More works need to be done.</li>
</ul>
                           </div>
                           <div id="more" class="entry-more">
                              <h3>LOS178 2.1.0</h3>

<p>There was some sort of problem with the recent build of 2.1.0. In looking into it I found the following:</p>

<p>I found a tagging problem. I used the tag DEV_LOS178_3p0p0_ppc_20050603. Note the 3p0p0. It should have been 2p1p0. I searched dev_archive on t3 and find no 20050603 directory for 3p0p0 but find it instead under 2p1p0. I believe that I should simply rename that tag to DEV_LOS178_2p1p0_20050603.</p>

<p>The CRs involved in 1 gig support seem to be: 539 and 606. Additionally 620 appears to be picked. Here's the break down:</p>

<div class="code"><pre>
    rock:files4cr 539 # Add 1Gb support for LynxOS-178
    ENVIRONMENT: 1.9.2.2 - Already up to date
    src/bin/lynxos.boot/Makefile: 1.1.1.1.2.1 - Already up to date
    src/cdk/common/mkimage/coff.c: 1.1.2.1 - Already up to date
    sys/bsp.vmpc/bsp_env.c: 1.2.2.1 - Already up to date
    sys/bsp.vmpc/lowInit.c: 1.3.2.1 - Already up to date
    sys/bsp.vmpc/procinit.c: 1.3.2.1 - Already up to date
    sys/csp.970/csp_init.c: 1.2.2.1 - Out of date
    sys/csp.970/csp_mem_map.c: 1.4.2.1 - Out of date
    sys/csp.ppc/csp_init.c: 1.2.2.1 - Already up to date
    sys/csp.ppc/csp_mem_map.c: 1.3.2.1 - Already up to date
    sys/include/bsps/pmac_g5/board.h: 1.5.2.1 - Out of date
    sys/include/bsps/vmpc/board.h: 1.2.2.1 - Already up to date
    sys/include/bsps/vmpc/pwb.h: 1.1.2.1 - Already up to date
    sys/include/family/ppc/arch_mem.h: 1.1.1.1.2.1 - Already up to date

    rock:files4cr 606 # Fix the 1GB problem on the Apple Power Mac G5 LynxOS-178 BSP
    sys/bsp.pmac_g5/bsp_env.c: 1.2.2.1 - Already up to date
    sys/bsp.pmac_g5/bsp_init.c: 1.3.2.2 - Already up to date
    sys/bsp.pmac_g5/ofw.c: 1.5.2.1 - Already up to date
    sys/bsp.pmac_g5/ofw.h: 1.3.2.1 - Already up to date
    sys/bsp.pmac_g5/procinit.c: 1.5.2.1 - Already up to date
    sys/csp.970/csp_init.c: 1.2.2.2 - Already up to date
    sys/csp.970/csp_mem_map.c: 1.4.2.2 - Out of date
    sys/include/bsps/pmac_g5/board.h: 1.5.2.2 - Already up to date
    sys/kernel/getrusage.c: 1.1.1.1.2.1 - Already up to date

    rock:files4cr 620 # Import G5 bug fixes/improvement from TOT into 2.1.0 branch
    sys/bsp.pmac_g5/bsp_intr.c: 1.2.2.1 - Already up to date
    sys/csp.970/csp_mem_map.c: 1.4.2.3 - Already up to date
    sys/drivers/arinc653/Makefile.real: 1.1.2.1 - Already up to date
</pre></div>

<p>If you look carefully you'll notice that the "Out of date" items for 539 are covered with newer versions in 606 and 620. So it appears as if I was up to date with when I built.</p>

<p>I am building again and will be rereleasing images using the correct numbering this time.</p>

<h3>Building 3.4.3 gcc on shrike RH 9.0</h3>

<p>I attempted to build 3.4.3 gcc on shrike, a RH 9.0 system but it failed with the following:</p>

<div class="code"><pre>
    make[2]: Entering directory `/home/adefaria/toolchain/build-powerpc/bison'
    cd /home/adefaria/toolchain.orig/src/bison && autoheader
    WARNING: Using auxiliary files such as `acconfig.h', `config.h.bot'
    WARNING: and `config.h.top', to define templates for `config.h.in'
    WARNING: is deprecated and discouraged.

    WARNING: Using the third argument of `AC_DEFINE' and
    WARNING: `AC_DEFINE_UNQUOTED' allows to define a template without
    WARNING: `acconfig.h':

    WARNING:   AC_DEFINE([NEED_MAIN], 1,
    WARNING:             [Define if a function `main' is needed.])

    WARNING: More sophisticated templates can also be produced, see the
    WARNING: documentation.
    touch /home/adefaria/toolchain.orig/src/bison/config.hin
    cd . && /bin/sh ./config.status config.h
    Usage: ./config.status [--recheck] [--version] [--help]
    make[2]: *** [stamp-h1] Error 1
    make[2]: Leaving directory `/home/adefaria/toolchain/build-powerpc/bison'
    make[1]: *** [all-bison] Error 2
    make[1]: Leaving directory `/home/adefaria/toolchain/build-powerpc'
    make: *** [stamp-all-powerpc] Error 2
</pre></div>

<p>Here's what I did:</p>

<ul>
  <li>Checked out toolchain from my previous tag (DEV_LOS178_3p0p0_ppc_20050607)</li>

  <li>Obtained and applied the patches as before</li>

  <li>Obtained the LOS178 build environment as before</li>

  <li>Performed make install</li>
</ul>

<p>This was done on shrike in my home directory.</p>
                           </div>
                        </div>
                        <p class="entry-footer">
                           <span class="post-footers">Posted by  on June  8, 2005  5:11 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000368.html">Permalink</a>
                        </p>
                     </div>

                     

                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
