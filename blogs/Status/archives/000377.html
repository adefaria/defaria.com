<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml" />

   <title>Status for Andrew DeFaria: Building CDK under Windows</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/000376.html" title="LOS178 2.1.0 build" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/000378.html" title="Built LOS178 2.1.0 TOB" />

   

   

   <script type="text/javascript" src="http://defaria.com/blogs/Status/mt-site.js"></script>
</head>
<body class="layout-one-column" onload="individualArchivesOnLoad(commenter_name)">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">

                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/000376.html">&laquo; LOS178 2.1.0 build</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/000378.html">Built LOS178 2.1.0 TOB &raquo;</a>
                     </p>

                     <a id="a000377"></a>
                     <div class="entry" id="entry-377">
                        <h3 class="entry-header">Building CDK under Windows</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Build Windows version of the CDK</li>

  <li>Submitted CR 659: cdk tool mkimage fails to build under Windows</li>
</ul>
                           </div>
                           <div id="more" class="entry-more">
                              <h3>Building Windows CDK</h3>

<p>In order to build the CDK under Windows one must use an ancient version of Cygwin - B20 (it is assumed that that is already installed). Additionally one must perform certain actions in a certain order:</p>

<ol>
  <li>Obtain the latest versions of the following tar images from the archive area:
    <ul>
      <li>2000-00.los178_rsc_src.tar.gz</li>

      <li>2001-00.los178_src.tar.gz</li>

      <li>2013-00.los178_dev.tar.gz</li>

      <li>2015-00.los178_rsc_dev.tar.gz</li>

      <li>(From cvs bin-image) ppc.cdkwin32.tar.gz</li>
    </ul>
  </li>

  <li>Create an area to do the build and extract the above into that area</li>

  <li>Exit this bash shell</li>

  <li>Start a cmd shell</li>

  <li>Execute the VCVARS32.BAT file. This is normally found in C:\Program Files\Microsoft Visual Studio\VS98\Bin. Note that this implies that Visual Studio is also installed. Also, often people will copy this bat file to C:\ for easier execution. This bat file sets certain environment variables including PATH such that nmake can be found. Under Windows we lean on VS's nmake. Also, this must be done from a cmd shell before starting Cygwin so that the changes to the environment can be picked up. Why don't we just make a script or enhance SETUP.bash to take into account for this?</li>

  <li>Start Cygwin using the appropriate cygnus.bat file. This was given to me by Moscow. Doesn't seem to do that much fancy stuff:

<div class="code"><pre>
@ECHO OFF
SET TARGET_PATH=C:\LynuxWorks\2.0.0
SET MAKE_MODE=UNIX
SET TERM=cygwin
SET HOME=/

set PATH=%TARGET_PATH%\bin;%TARGET_PATH%\usr\bin:%PATH%

echo "TARGET_PATH is %TARGET_PATH%

if not exist %TARGET_PATH%\bin\sh.exe goto error_no_sh

ver > %TARGET_PATH%\_tmp
goto the_end

:error_no_sh
echo "Installation Error -- no %TARGET_PATH%\bin\sh.exe found"

:the_end
del %TARGET_PATH%\_tmp
bash
</pre></div>
  </li>

  <li>cd to the directory that you created to perform the build</li>

  <li>Source SETUP.bash</li

  <li>cd to src/cdk</li>

  <li>make install > install.log 2>&1</li>

  <li>Check install.log for errors</li>
</ol>

<h3>CR 659: cdk tool mkimage fails to build under Windows</h3>

<p>Build of cdk tool mkimage files under Windows. This is a make install in src/cdk of LOS178. The specific error is:</p>

<div class="code"><pre>
Compiling coff.o
coff.c
coff.c(91) : fatal error C1083: Cannot open include file: 'family/ppc/arch_mem.h': No such file or directory
NMAKE : fatal error U1077: 'cl.exe' : return code '0x2'
Stop.
make[1]: *** [WIN32_VS_UTIL] Error 2 
</pre></div>

<p>Problem seems to be that the fix for src/cdk/common/mkimage/Makefile in CR #539 of adding -I$(ENV_PREFIX)/sys/include does not work under Windows with nmake.</p>
                           </div>
                        </div>
                        <p class="entry-footer">
                           <span class="post-footers">Posted by  on June 23, 2005 10:35 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000377.html">Permalink</a>
                        </p>
                     </div>

                     

                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
