<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml" />

   <title>Status for Andrew DeFaria: Test build of LOS178 2.1.0</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/000379.html" title="Building CDK on Windows" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/000381.html" title="Building LOS178 2.1.0 on Linux" />

   

   

   <script type="text/javascript" src="http://defaria.com/blogs/Status/mt-site.js"></script>
</head>
<body class="layout-one-column" onload="individualArchivesOnLoad(commenter_name)">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">

                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/000379.html">&laquo; Building CDK on Windows</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/000381.html">Building LOS178 2.1.0 on Linux &raquo;</a>
                     </p>

                     <a id="a000380"></a>
                     <div class="entry" id="entry-380">
                        <h3 class="entry-header">Test build of LOS178 2.1.0</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Rebuilt LOS178 2.1.0 in preparation for release of LOS178 2.1.0</li>
</ul>
                           </div>
                           <div id="more" class="entry-more">
                              <h3>Building LOS178</h3>

<h4>Solaris</h4>

<p>Use /int/bin/build_los178 which performs all the necessary steps. Solaris builds have not changed</p>

<h4>Linux</h4>

<p>There is no need to build LOS178 on Linux but there is a need to build the CDK since what is in the bin-image tarball is not complete. There's also a need to build gdb client portions.</p>

<p>"Building" of LOS178 on Linux therefore consists of:</p>

<ol>
  <li>Creating a "build" area</li>

  <li>Extracting sources from 2000-00.los178_rsc_src.tar.gz and 2001-00.los178_src.tar.gz</li>
</ol>

<h4>Windows</h4>

<p>Similarly there is no need to build LOS178 on Windows but there is a need to build the CDK since what is in the bin-image tarball is not complete. There's also a need to build gdb client portions.</p>

<p>"Building" of LOS178 on Windows therefore consists of:</p>


<ol>
  <li>Setup PC with Cygwin properly (if not already set up)</li>

  <li>Start a cmd shell and execute the VCVARS32.bat file</li>

  <li>Execute the cygnus.bat script to enter Cygwin</li>

  <li>Create build area</li>

  <li>Extract sources from 2000-00.los178_rsc_src.tar.gz and 2001-00.los178_src.tar.gz (May also need 2013-00.los178_dev.tar.gz and 2015-00.los178_rsc_dev.tar.gz)</li>
</ol>

<h3>Building CDK</h3>

<h4>Solaris</h4>

<p>There is no CDK to build on Solaris as it is contained in the ppc.cdksol.tar.gz</p>

<h4>Linux</h4>

<p>For Linux, cd to your build area and:</p>

<ol>
  <li>SETUP.bash</li>

  <li>cd src/cdk and make install. This builds parts of the CDK not contained in bin-image.</li>
</ol>

<h4>Windows</h4>

<p>Make sure you have a proper setup:</p>

<ol>
  <li>Setup PC with Cygwin properly (if not already set up)</li>

  <li>Start a cmd shell and execute the VCVARS32.bat file</li>

  <li>Execute the cygnus.bat script to enter Cygwin</li>

  <li>SETUP.bash</li>

  <li>cd src/cdk and make install. This builds parts of the CDK not contained in bin-image.</li>
</ol>

<h3>Packaging CDK</h3>

<p>The CDKs for all of Solaris, Linux and Windows need to be properly packaged for the customer. Currently package.sh is designed to handle both cdksol and cdklinux. Thus after building CDK on Linux one can tar it up and deposit it into the Solaris build area and use package.sh to create the proper packaging.</p>

<p>The rename.sh also handles renaming cdk[sol|linux|win32] tarballs it finds with the proper package #.</p>

<p>So the remaining issue is how to deal with the oddball win32... The issue is that it was thought that the cdk could not be easily tarred up and moved over because symlinks in the tar would be messed up. This does not appear to be the case as a little test shows that Cygwin's B20 tar will properly store the symlink on the Windows side and the Unix/Linux tar will properly unpack it.</p>

<h3>GDB Madness</h3>

<p>GDB, which consists of a gdbserver part that needs to eventually be put into $ENV_PREFIX/bin as it is built into a different area (why isn't a make install-gdb putting it in the right place) and some client parts (Just gdb in install-powerpc178/cdk/sunos-xcoff-ppc/usr/bin? Or do we include the other files like insight, tclsh8.4 and wish8.4?). These parts need to be placed in the build area.</p>

<p>So, for example, for Linux one needs to follow the above and then:</p>

<ul>
  <li>Check out the toolchain from CVS (tag: DEV_LOS178_2p1p0_ppc_20050705)</li>

  <li>Run fixup.sh</li>

  <li>Source SETUP.bash from a LOS178 area

<div class="note">
Remember: You need to use SETUP.bash from a dev area build. Using pdn will result in an error as the build is unable to find libbsd.a!
</div>

<p></p>

<div class="note">
Also: Install the liblcsapi.a library from the t3:/export/rel_archive/archive-lcs-1.0.0/052703/10001.lcs_host.tar.gz tarball into the host environment ($ENV_PREFIX/lib).
</div>

</li>

  <li>make install-gdb > install.log 2>&1</li>

  <li>Check for errors and if successful, make package.</li>
</ul>

<p>With the build of gdb successful:</p>

<ul>
  <li>Move install-powerpc178/cdk/sunos-xcoff-ppc/usr/bin/gdbserver (and gdbserver-lcs) to $ENV_PREFIX/bin.

<div class="note"><b>Note:</b> Since $ENV_PREFIX is set to dev then this means that gdbserver goes to dev. Should it also be put in pdn?</div>

</li>

</ul>

                           </div>
                        </div>
                        <p class="entry-footer">
                           <span class="post-footers">Posted by  on July  5, 2005  5:24 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000380.html">Permalink</a>
                        </p>
                     </div>

                     

                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
