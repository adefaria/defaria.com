<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml" />

   <title>Status for Andrew DeFaria: create_dev_snapview.pl</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/000478.html" title="PerlTk" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/000481.html" title="PQA Merge" />

   

   

   <script type="text/javascript" src="http://defaria.com/blogs/Status/mt-site.js"></script>
</head>
<body class="layout-one-column" onload="individualArchivesOnLoad(commenter_name)">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">

                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/000478.html">&laquo; PerlTk</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/000481.html">PQA Merge &raquo;</a>
                     </p>

                     <a id="a000480"></a>
                     <div class="entry" id="entry-480">
                        <h3 class="entry-header">create_dev_snapview.pl</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Looked into create_dev_snapview.pl.</li>

  <li>Tested speeds of FTP vs. SMB</li>
</ul>
                           </div>
                           <div id="more" class="entry-more">
                              <h2>create_dev_snapview.pl</h2>

<blockquote type=cite>
<b>From:</b> Andrew Feltham <br>
<b>Sent:</b> Tuesday, November 15, 2005 3:58 PM<br>
<b>To:</b> Shivdutt Jha<br>
<b>Subject:</b> creating snapshot views <br>
</font><br>

<p>Hi Shivdutt,</p>

<p>so I've tried to use Naga's tool for creating a snapshot view of a particular stream using a variety of  incremental baselines.</p>

<p>I've done this using a file generated by Phil's nightly builds (see attached) which lists the specific baseline which was current for each vob.</p>

<p>First of all, it does not seem to work (see image below). I'm not sure I'm handling the composite baseline label properly</p>

<p>Secondly, I do find the tool a bit awkward as it expects me to input several incremental baselines for vobs which are not included in my load rules.</p>

<p>It would be nice if I could specify the vobs on the cmd line, and only provide those labels.</p>
</blockquote>

<p>Actually the script is working as designed. The arguments for create_dev_snapview.pl are:</p>

<div class="code"><pre>
create_dev_snapview.pl &lt;project_name&gt; [ baseline_selector ]
</pre></div>

<p>project_name is mandatory but baseline_selector is optional. If you don't specify the baseline_selector then it appears that the script takes all the recommended baselines for all components in the project. Or you can specify a list of baselines if you want different ones. The script checks the number of baselines you specified and compares them to the number of <i>modifiable</i> components in the project. These two numbers must agree.</p>

<p>After painstakingly typing in the command line (wish you would have posted the command line in text! :-( ) and running it through Perl's debugger I came to the realization that you typed in 11 (very long) baselines and there are only 10 modifiable components in the ldx_2.3 project.</p>

<p>In thinking of how to do this better I can think of two methods:</p>

<ul>
  <li>Assuming the <span>buildconfig</span>.txt file is a standard file and contains all the information needed, add a -f &lt;buildconfig&gt; option to create_dev_snapview.pl. When present the script would open and parse that file, extracting out the required information. This would help cut down on typing and errors.</li>

  <li>Modify the script to present a series of dialog boxes prompting for the baseline to use for each component in the project. Note that in this instance this would mean a total of 10 dialog box prompts!</li>
</ul>

<p>Either of these options can be added to the existing script via options that cause it to operate in a different way if present or to operate like it used to operate if those options are not present.</p>

<p>(Question: When you type "perl" at your command line, what Perl are you running? Because Perl isn't normally present on Windows. Normally people using Clearcase run ccperl...).</p>

<h2>FTP vs. SMB</h2>

<p>Well this runs contrary to my previous experience but it turns out that a regular file copy using SMB shares is faster than FTP. I tested copying the old 2.7 Gig CQProd2001A database to my desktop, once with FTP and once with SMB. SMB won! Which is surprising to me because last time I tested something like this FTP was up to 10 times faster:</p>

<div class="code"><pre>
Local:time ftpget -u vobadm -p4sjadm p4test . "/dev/d/CQBackupsfromIrvine/0916/CQProd2001A_db_200509160213.BAK"
CQProd2001A_db_200509160213.BAK           2.66 GB    60.35 kB/s

real               769m10.858s
user               1m29.418s
sys                4m36.387s
</pre></div>

<p>Versus:</p>

<div class="code"><pre>
Local:time cp //p4test/CQBackupsfromIrvine/0916/CQProd2001A_db_200509160213.BAK /tmp

real              532m7.457s
user              0m16.714s
sys               1m11.362s
</pre></div>

                           </div>
                        </div>
                        <p class="entry-footer">
                           <span class="post-footers">Posted by  on November 17, 2005 12:39 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000480.html">Permalink</a>
                        </p>
                     </div>

                     

                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
