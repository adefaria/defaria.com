<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml" />

   <title>Status for Andrew DeFaria: BinMerge Module & Perl Issues</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/000491.html" title="Stripmime/Cleardiffmrg/CharacterSetValidation" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/000493.html" title="Bin Merge updates/GNATS: Another word for &quot;bug&quot;! :-(" />

   

   

   <script type="text/javascript" src="http://defaria.com/blogs/Status/mt-site.js"></script>
</head>
<body class="layout-one-column" onload="individualArchivesOnLoad(commenter_name)">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">

                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/000491.html">&laquo; Stripmime/Cleardiffmrg/CharacterSetValidation</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/000493.html">Bin Merge updates/GNATS: Another word for "bug"! :-( &raquo;</a>
                     </p>

                     <a id="a000492"></a>
                     <div class="entry" id="entry-492">
                        <h3 class="entry-header">BinMerge Module & Perl Issues</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Changed bin_merge to be a module so that it easier to call from UCMCustom</li>

  <li>Integrated new BinMerge.pm module into the UCMCustom</li>

  <li>Added fix to use "\" in get_vob_str</li>

  <li>Changed UCMCustom to use strict and warnings(we should always use these)</li>

  <li>Changed UCMCustom to use use instead of require</li>

  <li>Hunted down bug where UCMCustom undef's $/ (Bad UCMCustom!! Bad!)</lI>
</ul>
                           </div>
                           <div id="more" class="entry-more">
                              <h2>BinMerge Module</h2>

<p>I decided to change bin_merge into a module (BinMerge) and use it in UCMCustom. I was having problems trying to start the bin_merge process and getting it going in a pipe so the output from verbose could give the user feed back. For some reason bin_merge has to exit before any output was returned. Might have been because of the $/ thing described below (Bad UCMCustom, bad!)</p>

<h2>Using strict</h2>

<p>I've been taught that both use strict and use warnings should always be used when coding Perl. These diagnoistic routines are helpful in catching some common Perl mistakes that are otherwise much more difficult to debug. In fact, in implementing this I found a few potential bugs that I also corrected.</p>

<blockquote>
<p><b>Note:</b> Some version of Perl do not have use warnings. Instead specify -w on the #! line.</p>
</blockquote>

<h2>Use vs Require</h2>

<p>Require is old hat. Use is the new require! From Perldoc's <a href="http://perldoc.perl.org/perlfaq8.html#What%27s-the-difference-between-require-and-use%3F">What's the difference between require and use?</a>:</p>

<blockquote>
  <h2>What's the difference between require and use?</h2>

  <p>Perl offers several different ways to include code from one file into another. Here are the deltas between the various inclusion constructs:</p>

  <ol>
    <li> do $file is like eval `cat $file`, except the former</li>
      <ol>
        <li>searches @INC and updates %INC.</li>

	<li>bequeaths an *unrelated* lexical scope on the eval'ed code.</li>
      </ol>

    <li>require $file is like do $file, except the former</li>
      <ol>
        <li>checks for redundant loading, skipping already loaded files.</li>

        <li>raises an exception on failure to find, compile, or execute $file.</li>
      </ol>

    <li>require Module is like require "Module.pm", except the former</li>
      <ol>
        <li>translates each "::" into your system's directory separator.</li>

        <li>primes the parser to disambiguate class Module as an indirect object.</li>
      </ol>

    <li>use Module is like require Module, except the former</li>
      <ol>
        <li>loads the module at compile time, not run-time.</li>

        <li>imports symbols and semantics from that package to the current one.</li>
      </ol>
  </ol>
</blockquote>

<p>Note that becuase use loads the module at compile time one need to arrange for the @INC array to have any paths needed for use to succeed (IOW user written modules). In order to accomplish this one need to seed the @INC arrray in a BEGIN block as BEGIN blocks are executed before use is expanded,</p>

<h2>$/ Bug</h2>

<p>From Perldoc's <a href="http://perldoc.perl.org/perlvar.html">Perlvar</a>:</p>

<blockquote>
  <p>You should be very careful when modifying the default values of most special variables described in this document. In most cases you want to localize these variables before changing them, since if you don't, the change may affect other modules which rely on the default values of the special variables that you have changed. This is one of the correct ways to read the whole file at once:</p>

  <div class="code"><pre>
  open my $fh, "foo" or die $!;
  local $/; # enable localized slurp mode
  my $content = <$fh>;
  close $fh;
  </pre></div>

  <p>But the following code is quite bad:</p>

  <div class="code"><pre>
  open my $fh, "foo" or die $!;
  undef $/; # enable slurp mode
  my $content = <$fh>;
  close $fh;
  </pre></div>

  <p>since some other module, may want to read data from some file in the default "line mode", so if the code we have just presented has been executed, the global value of $/ is now changed for any other code running inside the same Perl interpreter.</p>
</blockquote>
                           </div>
                        </div>
                        <p class="entry-footer">
                           <span class="post-footers">Posted by  on December  7, 2005  5:44 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000492.html">Permalink</a>
                        </p>
                     </div>

                     

                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
