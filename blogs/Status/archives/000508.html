<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml" />

   <title>Status for Andrew DeFaria: cvsims/Vobs</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/000507.html" title="pulse" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/000509.html" title="More Clearcase modules" />

   

   

   <script type="text/javascript" src="http://defaria.com/blogs/Status/mt-site.js"></script>
</head>
<body class="layout-one-column" onload="individualArchivesOnLoad(commenter_name)">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">

                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/000507.html">&laquo; pulse</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/000509.html">More Clearcase modules &raquo;</a>
                     </p>

                     <a id="a000508"></a>
                     <div class="entry" id="entry-508">
                        <h3 class="entry-header">cvsims/Vobs</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Documented set up of <a href="http://intranet.broadcom.com/~adefaria/CVS/">CVS SCP connector</a></li>

  <li>Added more functionality to Clearcase::Vob</li>

  <li>Coded up a preliminary stats script</li>
</ul>
                           </div>
                           <div id="more" class="entry-more">
                              <h2>CVS CSP Connector</h2>

<p>I've updated <a href="http://intranet.broadcom.com/~adefaria/CVS/">CVS CSP Connector</a> documentation to add a description of the CVS administrative files that need to be changed. You'll note at the bottom that the only issues that remain are where to apply this <i>CVS CSP C<span>onnector</span></i> to. I believe we were waiting for David to respond as to the design.</p>

<p>The other issue that I noted was about how to handle branches. IOW do we need to include the branch name in the change set that we append. With the <i>Clearcase CSP Connector</i> the view extended pathname is what is put into the change set. As you know,  Clearcase's view extended pathname will include branch names. In CVS such branch names are not included. Instead CVS relies on extending the revision number with extra digits. So a revision number of 1.1 would represent something on the main branch while 1.1.2.1 would be on some branch. There is no branch name information in there - one must do a cvs status or log command to find a branch name such as:</p>

<div class="code"><pre>
Sticky Tag:          andrew-branch (branch: 1.1.2)
</pre></div>

<p>then make the association between all 1.1.2.x revisions and andrew-branch above.</p>

<p>If David is OK with a 4, 6, 8, etc. revision number being enough to denote that this file's revision is branched and doesn't need the branch name then cvsims is effectively functionally complete. We just need to perform the CVS Setup described at <a href="http://intranet.broadcom.com/~adefaria/CVS/">CVS CSP Connector</a> on the repositories and directories under those repositories that David or others want to enforce the CVS CSP Connector on.</p>

<h2>stats</h2>

<p>Ray Tran wrote:</p>
 
<blockquote type="cite">
  <p>Statistic logs - This is a script that would create two logs - one general data for each site, one for each VOB of each site.</p>

  <p>The general data should have at the least - date_time;site;number of VOBs; number of total VOB size; number of snapshot views; number of dynamic views; number of file elements; number of directory element;...</p>
</blockquote>

<p>I need a little clarification about some of the above...</p>

<ul>
  <li>How do you define "site"? I take it that in general we have Clearcase region of &lt;site&gt;NT and &lt;site&gt;UNIX. Is that always the case?</li>

  <li>As for #vobs - skip private vobs?</li>

  <li>As for #vobs, #snapshot views and #dynamic views: Which region is that for? As you know most of our stuff is actually in the NT region not the Unix region. Yet I expect that this script will run from the Unix region. I could -region however often that doesn't work. For example, if I'm on Unix and I do the following to interrogate the NT region it fails:<br>
    <br>
    <div class="code"><pre>
<font color="#3333ff"><b>ccase-rmna-3:</b></font><u>ct lsview -region rmnaNT adefaria_dynamic</u>
  adefaria_dynamic     \\<span>ltsjca</span>-adefaria\Views\adefaria_dynamic.vws
<font color="#3333ff"><b>ccase-rmna-3:</b></font><u>ct lsview -full -properties -region rmnaNT 
adefaria_dynamic</u>
  adefaria_dynamic     \\ltsjca-adefaria\Views\adefaria_dynamic.vws
cleartool: Error: Unknown host 'ltsjca-adefaria': Host not found
cleartool: Error: Unable to get view handle: error detected by ClearCase subsystem.
  </pre></div>

    <p>This is our familar "it fails because ltsjca-adefaria does not resolve in DNS" problem. But I need to do this with -full and -properties to determine if the view is a snapshot or dynamic (and/or a ucmview)!</p>

    <p>Normally this would be the result of an lsview with -full and -properties:</p>

    <div class="code"><pre>
    <font color="#3333ff"><b>ccase-rmna-3:</b></font><u>ct lsview -full -properties phonex_3.0</u>
  phonex_3.0           /projects/ccstgloc-cabu/viewstore/nnalluri/phonex_3.0.vws
Created 29-Dec-04.16:48:19 by nnalluri.clearusers@ccase-rmna-3
Last modified 29-Dec-04.16:48:20 by nnalluri.clearusers@ccase-rmna-3
Last accessed 29-Dec-04.16:48:20 by nnalluri.clearusers@ccase-rmna-3
Last config spec update 29-Dec-04.16:48:20 by nnalluri.clearusers@ccase-rmna-3
Text mode: unix
Properties: dynamic ucmview readwrite shareable_dos
Owner: richmond/nnalluri : rwx (all)
Group: richmond/clearusers : r-x (read)
Other:                  : r-x (read)
Additional groups: richmond/brcm richmond/users
richmond/ccadmin richmond/clearcase richmond/cc_ecan richmond/rmna180qa
    </pre></div>
    
    <p>Also should I do attempt to somehow combine the NT and Unix regions? If so then I'd need to figure out any vobs/views that are tagged in both regions. Or should I only consider the NT region?</p></li>

  <li>As for #element, how does one determine this? I mean it is possible for somebody to create a new vob, check out the vob root directory to a specific branch, do a clearfsimport of
thousands of elements and check in the root directory. From the perspective of a default view (just CHECKEDOUT and main/LATEST) I would not see nor be able to tabulate those thousands of elements... That's an extreme however the point is, with directories being  versioned it is really quite difficult to be able to get an accurate count of #elements.</li>

  <li>BTW: It seems the majority of views are hosted on the individuals desktop or laptop and most of the time getting information about such views is near impossible. Often I get a winsock error saying it can't connect to the machine or an "unable to contact albd_server on host...".</li>
</ul>

<blockquote type="cite">
  <p>The VOB specific data - date_time;site;VOB_name;size of database;size of source pool; size of devired object; size of cleartext; size of admin data.</p>

  <p>The directory structure that I envisioned is as such</p> 

  <p>/projects/scm_tools_logs</p>

  <blockquote>-cc
    <blockquote>- 2005
      <blockquote>- 12
        <blockquote>- 01
        </blockquote>
      </blockquote>
    </blockquote>
  </blockquote>
</blockquote>

<p>I have a preliminary version of this working (Need to code up something to get the current site) at SCM/cc/stats. Output for rmna site looks like:</p>

<div class="code"><pre>
################################################################################<br>
#
# File:         vob.log
# Description:  This file contains a list of all vobs at rmna along with some
#               statistical information.
# Format:       The format of this file is:
#
# date/time;site;VOB name;db size;src size;do size;<span>clrtxt</span>
size;adm size
#
################################################################################<br>
20060102@18:23;rmna;A1;0.3;0.0;0.00.0;0.1;0.4
20060102@18:23;rmna;<span>CommEngine</span>;1569.3;2920.2;0.064.3;0.1;4553.8
20060102@18:23;rmna;<span>NewTest</span>;0.2;0.0;0.00.0;0.1;0.2
20060102@18:23;rmna;<span>OnePhone</span>;1226.7;3007.9;0.0321.0;0.1;4555.7
20060102@18:23;rmna;<span>SpiceBoxSW</span>;114.3;169.3;0.00.0;0.1;283.7
20060102@18:23;rmna;<span>TrainCommEngine</span>;1.6;10.7;0.00.0;0.1;12.4
20060102@18:23;rmna;adm;0.6;277.8;0.0547.0;0.1;825.5
20060102@18:23;rmna;alpha_video;115.9;205.9;0.00.0;0.1;321.8
</pre></div>

<p>and</p>

<div class="code"><pre>
#################################################################################<br>
# File:         rmna.log
# Description:  This file contains statistical information about the vobs/views
#               at this site.
# Format:       The format of this file is:
#
# date/time;site;nbr vobs;total vob size;nbr snapshot;nbr dynamic;nbr ucm;nbr file elements;nbr dir elements
#
################################################################################<br>
20060102@19:58;rmna;57;54222.1;0;10;5;&lt;To be determined&gt;;&lt;To be determined&gt;
</pre></div>
                           </div>
                        </div>
                        <p class="entry-footer">
                           <span class="post-footers">Posted by  on January  2, 2006  2:56 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000508.html">Permalink</a>
                        </p>
                     </div>

                     

                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
