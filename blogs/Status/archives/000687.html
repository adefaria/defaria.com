<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml" />

   <title>Status for Andrew DeFaria: cqtool</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/000686.html" title="cqtalk" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/000688.html" title="UCMWB enhancements/Helpdesk Tickets" />

   <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://defaria.com/blogs/Status/archives/000687.html"
    trackback:ping="http://defaria.com/mt/mt-tb.cgi/74"
    dc:title="cqtool"
    dc:identifier="http://defaria.com/blogs/Status/archives/000687.html"
    dc:subject="General Dynamics"
    dc:description=" Sent cqtool out for code review..."
    dc:creator=""
    dc:date="2007-10-10T15:08:55-06:00" />
</rdf:RDF>
-->


   

   <script type="text/javascript" src="http://defaria.com/blogs/Status/mt-site.js"></script>
</head>
<body class="layout-one-column" onload="individualArchivesOnLoad(commenter_name)">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">

                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/000686.html">&laquo; cqtalk</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/000688.html">UCMWB enhancements/Helpdesk Tickets &raquo;</a>
                     </p>

                     <a id="a000687"></a>
                     <div class="entry" id="entry-687">
                        <h3 class="entry-header">cqtool</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Sent cqtool out for code review</li>
</ul>
                           </div>
                           <div id="more" class="entry-more">
                              <h3>Introducing cqtool</h3>

<p>I have implemented a new script called cqtool. This is to replace
the unsupported /opt/rational/clearquest/bin/cqtool which is going
away as of Clearquest 7.0. UCMWB utilized IBM/Rational's cqtool to
perform certain actions. Additionally, as per Erik's RANCQ00014935
request to enhance UCMWB to be able to create child WORs a tool needed
to be developed to do that. So the new cqtool solves the following
issues:</p>

<ul>
  <li>Provides a supported replacement for the following bits of UCMWB
functionality:</li>
  <ul>
    <li>Cloning of WORs (Right click: Continue work in Clone on a
closed non-orphan WOR)<br>
    </li>
    <li> Creation of Helpdesk tickets (Tools: Submit Helpdesk Request)</li>
  </ul>
  <li>Adds the following functionality:</li>
  <ul>
    <li>Allows for creation of new WORs</li>
    <li>Allows for linking of parent WOR to child WOR</li>
  </ul>
</ul>

<p>Additionally, with the create WOR functionality, UCMWB can offer
the ability to create a new, non parent/child WOR. Finally, as has
been stated, with this new cqtool we don't have to worry about
IBM/Rational's cqtool disappearing in CQ 7.0.</p>

<p>This is an involved process so I created this in a modularized
fashion thus several Perl modules are involved. As per Ken's mandate,
I am calling for a code review of what I have so far. Next I will hook
this into UCMWB.</p>

<p>So far I have a cqperl script called cqtool. It relies on several Perl
Modules, some of which I have added to Clearcase and our <i>standard
lib</i> directory already
(/cleartrig/ent/SNSD/muos/ccadm_tools/vobs/ranccadm/scripts/lib):</p>

<table align="center" border="1" cellpadding="2" cellspacing="0"
 width="90%">
  <tbody>
    <tr>
      <th bgcolor="#33ccff" valign="top">Module<br>
      </th>
      <th bgcolor="#33ccff" valign="top">Description<br>
      </th>
      <th bgcolor="#33ccff" valign="top">Location<br>
      </th>
    </tr>
    <tr>
      <td valign="top"><b>Display<br>
      </b></td>
      <td valign="top">Module for providing consistent output</td>
      <td valign="top"><i>standard lib</i><br>
      </td>
    </tr>
    <tr>
      <td valign="top"><b>CQTool<br>
      </b></td>
      <td valign="top">Handles communications with Clearquest</td>
      <td valign="top">~p6258c/adm/lib<br>
      </td>
    </tr>
    <tr>
      <td valign="top"><b>CreateWORUI</b></td>
      <td valign="top">UI for CreateWOR</td>
      <td valign="top">~p6258c/adm/lib</td>
    </tr>
    <tr>
      <td valign="top"><b>CreateHelpDeskUI</b></td>
      <td valign="top">UI for CreateHelpDesk</td>
      <td valign="top">~p6258c/adm/lib</td>
    </tr>
    <tr>
      <td valign="top"><b>Tk::MyText</b></td>
      <td valign="top">Subclasses the Tk TextUndo<br>
widget. This is used for the description fields in both CreateWOR<br>
and CreateHelpDesk. The subclassing was necessary in order to<br>
provide for a modified callback that allows us to tell when the<br>
widget has text and thus can set the Submit button to active.</td>
      <td valign="top">~p6258c/adm/lib</td>
    </tr>
  </tbody>
</table>

<p>Additionally there is a cqtool script itself which is a command
line interface/driver that was initially used to test the
functionality provided in the above modules. It has been oriented to
be the primary interface to this functionality. The thought is that
UCMWB will fire up cqtool in the background at start up and then, if
and when it's functionality is needed, UCMWB will feed commands to the
already running cqtool.</p>

<p>When run interactively, cqtool prompts for a command. It will also
read commands from $ARGV, execute them and exit. So, in a sense,
cqtool works like cleartool.</p>

<p>If you type help at the prompt the following is displayed:</p>

<div class=code><pre>
cqtool Version 0.9: Program to talk to Clearquest

Valid commands are:

createwor:			Create a new WOR
createhd:			Create a new Help Desk Ticket
clone &lt;wor&gt;			Clones a WOR
link &lt;parent wor&gt; &lt;child wor&gt;	Link a parent WOR to a child
WOR
exit|quit:			Exits cqtool
help:				This display
usage:				Displays command line usage
version:			Displays version of cqtool
</pre></div>

<p>createwor and createhd both are Perl/Tk applications that interact
with Clearquest and display a GUI that obtains the necessary and
required fields to create a WOR or a Helpdesk ticket. Note, only the
bare minimum fields are available. IOW I didn't implement the whole UI
that Clearquest provides. Instead it's just enough to create the WOR
or Helpdesk ticket.</p>

<p>cqtool pays attention to a few environment variables:</p>

<dl>
  <dt><b>CQ_DBSET</b></dt>

    <dd>Set to the dbset name of the Clearquest database to work with.
    For testing purposes set this to XTST3. Production would be
    RANCQ</dd>

  <dt><b>CQ_USER</b></dt>

    <dd>Name of the user to log in as. By default $USER is used. For
    testing purposes set this to "ccadm" (for the XTST3 database that
    is)</dd>

  <dt><b>CQ_PASSWORD</b></dt>

    <dd>Set to the password for CQ_USER. For testing purposes set this
    to "ccadm" (for the XTST3 database that is). If this is not set
    then cqtool prompts for a password.</dd>
</dl>

<p>So then, with the proper environment variables set one can:</p>


<div class=code><pre>
$ cqtool help
cqtool Version 0.9: Program to talk to Clearquest

Valid commands are:

createwor:			Create a new WOR
createhd:			Create a new Help Desk Ticket
clone &lt;wor&gt;			Clones a WOR
link &lt;parent wor&gt; &lt;child wor&gt;	Link a parent WOR to a child
WOR
exit|quit:			Exits cqtool
help:				This display
usage:				Displays command line usage
version:			Displays version of cqtool
</pre></div>

<p>or</p>

<div class=code><pre>
$ cqtool createwor
</pre></div>

<p>Oh, where is cqtool? Well for now it's in ~p6258c/adm/cq/cqtool
(libs in ~p6258c/adm/lib/*).</p>

                           </div>
                        </div>
                        <p class="entry-footer">
                           <span class="post-footers">Posted by  on October 10, 2007  3:08 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000687.html">Permalink</a>
                        </p>
                     </div>

                     
                     <div class="trackbacks">
                        <h3 id="trackback" class="trackbacks-header">TrackBack</h3>
                        <div id="trackbacks-info">
                           <p>TrackBack URL for this entry:<br />http://defaria.com/mt/mt-tb.cgi/74</p>
                        </div>
                        <div class="trackbacks-content">
                           
                        </div>
                     </div>
                     

                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
