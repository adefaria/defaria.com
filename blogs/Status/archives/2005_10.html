<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml"$>" />

   <title>Status for Andrew DeFaria: October 2005 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/2005_09.html" title="September 2005" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/2005_11.html" title="November 2005" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/2005_09.html">&laquo; September 2005</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/2005_11.html">November 2005 &raquo;</a>
                     </p>
                     
                     
                     

                     <h2 class="date-header">October 31, 2005</h2>
                     <a id="a000463"></a>
                     <div class="entry" id="entry-463">
                        <h3 class="entry-header">PQA Issues/CQ 2002.05 setup</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Documented <a href="http://intranet.broadcom.com/~adefaria/Clearquest/PQAIssues.php">PQA issues</a>

  <li>Installed old Clearquest on pcsjca-ccrmt03</li>

  <li>Investigated more about the DST Clearcase issue</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:15 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000463.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 28, 2005</h2>
                     <a id="a000461"></a>
                     <div class="entry" id="entry-461">
                        <h3 class="entry-header">PQA: URL Link Issue</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Documented new URL format</li>

  <li>Investigated the feasibility of accommodating a mapping of old URL link with old ID -> new URL</li>
</ul>
                              
                              <h2>Clearquest Web URLs</h2>

<p>With the old Clearquest ASP based Web Platform the following URL would direct you directly to the defected specified in &lt;id&gt;:</p>

<blockquote>
 http://&lt;<i>server</i>&gt;/cqweb/url/default.asp?id=&lt;<i>id</i>&gt;
</blockquote>

<p>This link was often set in email messages generated by action hooks in the schema (e.g. when commitmentLevel's value changed).</p>

<p>With the new Clearquest Java based Web Platform this URL has changed. The new format is a lot longer due to the fact that it is also more flexible:</p>

<blockquote>
http://&lt;<i>Server</i>&gt;/cqweb/main?command=GenerateMainFrame&service=CQ&schema=&lt;<i>DBSETName</i>&gt;&contextid=&lt;<i>DBName</i>&gt;&entityDefName=&lt;<i>entityDefName</i>&lt;&entityID=&gt;<i>entityID</i>&gt;
</blockquote>

<p>Where:</p>

<blockquote>
<i>Server</i>: Name of web server (e.g. extranet.broadcom.com)<br>
<i>DBSETName</i>: Connection ID (e.g. 2005.02.00)<br>
<i>DBName</i>: Name of database (e.g. Cont)<br>
<i>entityDefName</i>: Name of entity record (e.g. Defect)<br>
<i>entityID</i>: ID to display<br>
</blockquote>

<p>For example:

<blockquote>
</p>http://p4test/cqweb/main?command=GenerateMainFrame&service=CQ&schema=2005.02.00&contextid=Cont&entityDefName=Defect&entityID=Cont00012352
</blockquote>

<p>The action hooks in the schema need to change to generate this new URL if the new Clearquest Java based Web Platform is to be used. This will fix all future emails that are generated with such a link.</p>

<p>We cannot fix past emails that already exist in people's mail folders. A thought was given to the idea of configuring the web server such that it would allow the old links to work. I tried, believe me, to see if this was relatively doable. It is not.</p>

<p>Here's what I thought of doing:</p>

<ol>
  <li>Configure RWP so that http://<server>/cqweb/url resolves to another place.</li>

  <li>Configure RWP so that .asp files are considered cqperl scripts. Note RWP is Apache based with Java Tomcat Servelets. I do not think I can configure this RWP to handle true, bona fide ASP pages. Besides I know very little about ASP.</li>

  <li>In this place write a default.asp that is actually a cqperl script. This script would take the id= parameter, look up the id under old_id then generate a redirect in the form of the new URL substituting the new ID.</li>
</ol>

<p>Of course, all of this is non standard, thus unsupported by Rational. Additional, although I managed to do #1 and I'm quite sure I could do #3, I got stuck at #2. The problem is that Rational also doesn't support any Perl cgi stuff from RWP. In fact RWP is for Rational's Web Applications only - they don't even support you running static web pages/sites through RWP. So there is no mod_perl.so for me to load into Apache, let alone a mod_perl.so that supports cqperl -which is a non-standard Perl that only Rational supports.</p>

<p>And with this I think we just need to give up the hope of supporting old URL links to old ID numbers, fix it so that new URL links are of proper format and perhaps implement a simply query for "Look up by Old ID" for the customers.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  2:00 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000461.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 27, 2005</h2>
                     <a id="a000462"></a>
                     <div class="entry" id="entry-462">
                        <h3 class="entry-header">PQA: LDAP</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Worked on trying to test out LDAP Authentication</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  2:16 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000462.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 26, 2005</h2>
                     <a id="a000460"></a>
                     <div class="entry" id="entry-460">
                        <h3 class="entry-header">PQA: More issues</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Investigating PQA issue regarding email links</li>

  <li>Implementing cleanup of Dynamic Lists</li>

  <li>Handed off test DB backup to Vinh</li>

  <li>Investigated data conversion problems</li>
</ul>
                              
                              <h2>PQA: Remaining Issues</h2>

<p>The following issues came up at this meeting:</p>

<ol>
  <li>Requirement to support old style Email Link's (See below)</li>

  <li>Update Production Web Server to latest Clearquest version (See below)</li>

  <li>Remaining data conversion issues (Emailed Vinh asking for details)</li>

  <li>Dynamic List cleanup (Emailed Vinh asking for updates)</li>

  <li>Test DB hand off (Emailed Vinh pointing to backups of my converted database for him to test)</li>
</ol>

<p>Vinh provided an example: http://extranet.broadcom.com/cqweb/url/default.asp?id=Prod00014218. There are several problems with this. First the default.asp indicates an IIS server and an ASP web application. The new version of RWP is not IIS based rather it is Apache based. I cannot find a default.asp in RWP at all. Thus the above style link will not work.</p>

<p>Vinh says that he generates through hooks in CQ. I suspect what is happening is this: When a defect changes state action hooks kick in and determine it's time to send email to notify the appropriate people that a change in state has happened. At this time Vinh's hooks change/generate these links. As such Vinh needs to change his hooks to generate new URLs that conform to the new Clearquest software. One question I have is how did Vinh come up with http://<servername>/url/default.asp?id=<ID> as a syntactical template meaning "Show this specific defect"? I cannot find where this is documented.</p>

<p>I tried http://p4test/url/default.asp?id=<ID> on p4test and that doesn't work. Perhaps this is just an issue of figuring out what the correct URL template is and changing the hook. The hook could also be modified to perhaps add links for http://<server>/<path>/<script>?old_id=<ID> if that is possible. This would then take care of all future emailed URL's. I'm not sure how to account for old emails that may have now invalid links.</p>

<p>I did see that the new Web interface has a Email Defect link which produces URLs of the form: http://p4test/cqweb/main?command=GenerateMainFrame&service=CQ&schema=2005.02.00&contextid=Cont&entityID=33580034&entityDefName=Defect</p>

<p>(Decidedly not user friendly).</p>

<p>The question remains whether or not to go with upgrading the production server to the newest version of Clearquest so we can get the new version of Clearquest Web. It is a different web interface. Ray is looking into getting another machine so we can have both new and old versions of Clearquest Web. One issue is that if we do go to the merged database and new Clearquest Web and run for a while then decide there is some critical flaw, going back to the old Web server will also mean going back to the old databases and losing any work done during the time we were on the new setup.</p>

<h2>Data Conversion Problems</h2>

<p>Vinh wrote:</p>

<blockquote type=cite>
  <p>by compare with Prod0009710, not match values for these</p>

  <ol>
    <li>SW Version</li>

    <li>Time From Resolve To Verify</li>

    <li>Closed Date</li>
  </ol>
</blockquote>

<p># 1 was due to a bug - I fixed this.</p>

<p># 2 and 3 are due to the fact that these fields are set to readonly. The odd thing is that they do not appear to have any good. The question then is how do they obtain values? My guess is that these values are fielded in by some other sort of hook script at some time. My workaround is to add these to the list of fields that must be toggled to optional in order for the conversion to work and toggled back after the conversion. My fear is what other fields are like these?</p>

<p>The list of readonly fields in the schema are:</p>

<ol>
  <li>Fixed_In_Project</li>

  <li>Close_Date (Mentioned above)</li>

  <li>Submit_Date (Already toggled to optional)</li>

  <li>Submitter (Already toggled to optional)</li>

  <li>Notes_Log</li>

  <li>old_id (Already toggled to optional)</li>

  <li>TimeFromSubmitToVerify</li>

  <li>TimeToVerify (Time From Resolve To Verify mentioned above)</li>

  <li>Audit_Log (Already toggled to optional)</li>
</ol>

<p>My guess here is that the other fields (#1, 5 & 7 above) are also empty. The solution therefore it to toggle all readonly fields in the list above to optional before performing the merge.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  4:14 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000460.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 25, 2005</h2>
                     <a id="a000459"></a>
                     <div class="entry" id="entry-459">
                        <h3 class="entry-header">Daylight Savings Time & Clearcase</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Looked into potential problems with DST and Clearcase</li>

  <li>Investigated problem with Deliver between Projects</li>

  <li>Investigated performance problems on Windows Build machines in San Diego</lI>
</ul>
                              
                              <h2>DST and Clearcase</h2>

<p> Utilizing pcsjca-ccrmt03 and ccase-sj1-4 I set up the following snapshot views:</p>

<ul>
  <li>adefaria_view2: View database on //pcsjca-ccrmt03/VWS/ADEFARIA.vws - snapshot view contents in my home directory, P drive P:/adefaria_view2</li>

  <li>adefaria_view3: View database also on //pcsjca-ccmnt03/VWS/ADEFARIA3.vws - snapshot view contents on //ccase-sj1-4/adefaria/adefaria_view3. This is a samba share I set up on ccase-sj1-4.</li>
</ul>

<p>These snapshot views loaded the Tools vob.</p>

<p>Next I:</p>

<ul>
  <li>Went into adefaria_view2, Tools/Benchmark and checked out a file</li>

  <li>Went into adefaria_view2, Tools/Benchmark and forcefully hijacked a file</li>

  <li>Went into adefaria_view3, Tools/convert and checked out a file</li>

  <li>Went into adefaria_view3, Tools/convert and forcefully hijacked a file</li>

  <li>Turned off NTP and Windows Time Service</li>
</ul>

<p>Next I performed the following tests:</p>

<ol>
  <li>Changed the time back one hour on both pcsjca-ccrmt03 and ccase-sj1-4. This simulates the upcoming Daylight Savings Time change where both server and client theoretically change times at the same time.</li>

  <li>Performed an update of Benchmark/convert for adefaria_view2 and adefaria_3. Looked for "everything being hijacked". Did not experience that. Instead I saw what I expected, update only complained about the one legitimate hijacked file - as it should. The other checked out file listed as checked out - as expected. No other files were listed as hijacked.</li>

  <li>Changed the time on the server (ccase-sj1-4) back 1 hour. Left the client (pcsjca-ccrmt03) set where it was. This simulates the situation where the server changes time for DST but the client doesn't.</li>

  <li>Repeated #2 - same results</li>

  <li>Changed the time back one hour on the client but left the server one hour ahead. This simulates the situation where the client changes time for DST but the server doesn't.</li>

  <li>Repeated #2 - same results</li>
</ol>

<p>So I'm confused as to what the problem is. Am I doing something wrong?</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  3:54 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000459.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 22, 2005</h2>
                     <a id="a000458"></a>
                     <div class="entry" id="entry-458">
                        <h3 class="entry-header">PQA Dynamic Lists</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Changed Dynamic Lists to properly handle bad data</li>
</ul>
                              
                              <h2>Dynamic Lists and Bad Data</h2>

<p>I now have pqamerge properly creating Dynamic Lists. In the past I would call SetFieldChoiceList, which would allow validate and commit to work, but which wouldn't actually add a member to the Dynamic List. I've since changed that.</p>

<p>The first problem I hit was that Clearquest would treat "1.A" as the same as "1.a". So when pqamerge attempted to add "1.a" to the Dynamic List it would fail. I needed to compare ignoring case. In Perl usually one uses a regex for that and specifies "i" to ignore case.</p>

<div class="code"><pre>
if ($var =~ /^$pattern$/i) {
  &lt;<i>matched ignoring case</i>&gt;
} # if
</pre></div>

<p>But some of the values of the various Dynamic Lists contain regex meta characters (e.g. "?" or "(") which caused me problems. I've fixed those now.</p>

<div class="code"><pre>
if ("\L$var\E" eq "\L$pattern\E") {
  &lt;<i>matched ignoring case</i>&gt;
} # if
</pre></div>

<p>The above basically says to downshift characters between the "\L" and the "\E". Then a regular eq is used so as to avoid problems with interpreting regex meta characters.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  1:50 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000458.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 21, 2005</h2>
                     <a id="a000457"></a>
                     <div class="entry" id="entry-457">
                        <h3 class="entry-header">AddListMember</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Fixed bug in pqamerge so that it now properly adds new entries to dynamic lists</li>
</ul>
                              
                              <h2>AddListMember</h2>

<p>I was dynamically adding to Dynamic lists by calling SetFieldChoiceList. This allowed validate and commit to work and for the record to be added however it doesn't actually add to the Dynamic list! You can see this later by attempting to modify a record. It's dynamic list items will show in red and you will not be able to apply the changes because it will state that the value is not a valid choice of that dynamic list.</p>

<p>This is quite a surprise to me. I found that I need to call AddListMember to actually get this to add to the Dynamic list. This appears to be working so I need to redo the merge again.</p>

                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  1:51 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000457.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 20, 2005</h2>
                     <a id="a000456"></a>
                     <div class="entry" id="entry-456">
                        <h3 class="entry-header">enable_ldap/Another PQA Merge</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Wrote and enable_ldap Perl script</li>

  <li>Vinh Ton has provided me with yet another schema and corresponding databases</li>
</ul>
                              
                              <h2>Another Merge</h2>

<p>Performing yet another merge so I will once again document the steps I take:</p>

<ul>
  <li>Restored the databases CQSchema03, CQ_Controller_Test and CQ_Controller_Prod. Doing so wipes out the old data</li>

  <li>When importing you must go into the CQSchema03 tables for master_dbs and change the server to p4test. Otherwise you will be effecting the data on the other server!</li>

  <li>Enter Clearquest Designer and mark the following fields as optional:</li>

    <ul>
      <li>Submitter</li>

      <li>Submit_Date</li>

      <li>Audit_Log</li>

      <li>old_id</li>
   </ul>

  <li>Change commitmentLevel_Value_Changed hook to simply return</li>

  <li>Test Work, Check in Schema and Upgrade Database</li>

  <li>Import OEMUsers.cqu and Users.cqu</li>

  <li>Upgrade Database</li>

  <li>Run pqamerge</li>

  <li>Test</li>

  <li>Reverse the schema changes performed above and apply the changes</li>

  <li>Backup new CQSchema03, CQ_Controller_Test and CQ_Controller_Prod</li>
</ul>

<p>Use the following for a Check in Comment:</p>

<blockquote>
  <p>Changing Submitter, Submit_Date, Audit_Log and old_id to be optional for data conversion</p>

  <p>Also changed commitmentLevel_ValueChanged hook to return before sending email.</p>
</blockquote>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:19 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000456.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 19, 2005</h2>
                     <a id="a000455"></a>
                     <div class="entry" id="entry-455">
                        <h3 class="entry-header">Most PQA Issues resolved...</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Resolved most of the remaining issues with PQA Merge Vinh Ton</li>
</ul>
                              
                              <h2>Remaining Issues</h2>

<p>I have incorporated all of your changes and have imported your CQ_Controller_Prod, CQ_Controller_Test and CQSchema03 databases. I don't see any new users. Weren't they in the CQAllUsers database?</p>

<p>In any event here's how I proceeded:</p>
<ul>
  <li>Made changes to pqamerge. This included handling a few new fields that I didn't notice before as well as adjustments to accommodate the changes in your last email. Also set <b>Cont:old_id</b> = the old id from the <b>TO</b> or <b>Prod</b>. Now we have a cross reference field. You will need to change your form to expose this field to the users.</li>

  <li>Imported CQ_Controller_Prod, CQ_Controller_Test and CQSchema03. I see the changes that you've made to the schema.</li> 

  <li>Imported OEMUsers.cqu and Users.cqu.</li>

  <li>Changed <b>Submitter</b>, <b>Submit_Date</b>, <b>Audit_Log</b>,
and <b>old_id</b> to be optional</li>

  <li>Changed <b>Global Script:</b> <i>RecordHistory</i> to simply <tt>Exit Function</tt></li>
  <li>Changed <i>CommitmentLevel_ValueChanged</i> to <tt>Exit Sub</tt>
before sending email.</li>

  <li>Added <b>delete</b> action to defect record for admin only. This
is needed for <tt>pqaclean</tt> to work.</li>

  <li>Ran <tt>pqamerge</tt></li>
</ul>

<p>By and large this worked! There was a user who was missing. This user, <i>tngo</i>,
was not listed as being subscribed to either TO nor Prod, rather to BT. I suspect that he used to be subscribed to Prod but then later was removed. If there are more users like this then there will be similar errors.</p>

                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:23 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000455.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 18, 2005</h2>
                     <a id="a000454"></a>
                     <div class="entry" id="entry-454">
                        <h3 class="entry-header">PQA Merge: User Issues</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Starting to look into user accounts issues</li>

  <li>Send out form for LDAP Authentication Information</li>

  <li>Coded up pong.sh and pong.tcl to check and see if ccase-rmna-3 is up or down</li>

  <li>Created initial set of PQA User/Group Account files</li>
</ul>
                              
                              <h2>PQA User/Group Account Files</h2>

<p>Here's what I did for user accounts. I've attached all the files and
will refer to them by name here.</p>

<h3>OEM Users</h3>

<p>First I took the export list from Clearquest (<tt>userinfo.txt.orig</tt>).
This is the untouched original export file.</p>

<p>Next I extracted user names that begin with "oem" -&gt; <tt>OEMUsers.cqu</tt>. Then I noticed that some of these users only appeared to be subscribed to NAS or BT. I then separated those out to <tt>OldOEMUsers.cqu</tt>.</p>

<h3>New Groups</h3>

<p>Patterning off of <tt>userinfo.txt.orig</tt> file for groups I created <tt>NewGroups.cqu</tt> to match the new groups you describe on your Users tab of the Excel Workbook. The group records from  <tt>userinfo.txt.orig</tt> I stored off in <tt>Groups.cqu</tt> and then separated off groups that were only NAS or BT to <tt>OldGroups.cqu</tt>.</p>

<h3>Other Users</h3>

<p>This left me with all of the other users which were split up into <tt>Users.cqu</tt> and <tt>RemovedUsers.cqu</tt> based on whether they
subscribed to Prod or TO.</p>

<h3>Changing databases= line</h3>

<p>For all files I made the following assumption: If the databases= line
contained no values then that means "all databases". So any users or
groups with a databases= line with no values I assume subscribed to TO
or Prod. I left these databases= lines alone.</p>

<p>For other users or groups, if TO or Prod appeared in the databases=
line I removed all values and put in Cont.</p>

<p>Please let me know if this comes close to what you wanted WRT users and groups.</p>

                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  3:22 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000454.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 17, 2005</h2>
                     <a id="a000453"></a>
                     <div class="entry" id="entry-453">
                        <h3 class="entry-header">PQA Merge Issues/Pong</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Documented remaining <a href="http://intranet.broadcom.com/~adefaria/Clearquest/">PQA Conversion Issues</a></li>

  <li>Audit_Log is not handled properly currently. Querying Vinh</li>

  <li>Resolved problem with Submitter and Submit_Date. Need to change schema to make those fields OPTIONAL as well as add return statements to the Perl action hooks</li>

  <li>Investigated using LDAP authentication with Clearquest</li>

  <li>Wrote a simple expect script (pong) and bash script to verify that a machine is up and send email if it isn't. Problem is ccase-rmna-1 lacks expect!</li>
</ul>
                              
                              <h2>Audit_Log</h2>

<p>As it stands <b>Audit_Log</b> is probably not being handled the way you think it should be. My investigation seems to indicate that <b>Audit_Log</b> is, as its name suggest, an auditing of what changes were made. In transferring from the old databases to the new one, the new <b>Audit_Log</b> is essentially a blank slate. It is the responsbility of the Action Script <tt>RecordHistory</tt> to update the <b>Audit_Log</b>. Thus the only recording in <b>Audit_Log</b> for the transfer is that the record was added! In    other words all history is lost! I don't think that's what you want. We will need to similarly change <b>Audit_Log</b> to be a simple <i>OPTIONAL</i> field with no Action Scripts in order for <tt>pqamerge</tt> to transfer the Audit_Log</b>.</p>

<h2>LDAP Authentication</h2>

<p>Regarding LDAP authentication: There is a whole new chapter in the Clearquest Admin Guide about this and we'll need to coordinate this with an <i>LDAP Administrator</i> (Ray, who's our LDAP Administrator?). On the plus side users would no longer have to remember separate  usernames/passwords for Clearquest. In fact, new users would not even need to be added because if they are in the ActiveDirectory then they have a login from Clearquest. Of course I suspect that security is then achieved by Clearquest groupings, which, as far as I can tell, are still manually created in Clearquest Designer's User Administration screen. Additionally, LDAP permitting, other fields will be instantaneously mapped properly like Full Name, Phone Number and the ever popular Email Address! In other words, LDAP authentication is doable but a little complicated, requires coordination with the LDAP administrator and requires a number of carefully executed commands.</p>

<p>One issue or thing to test would be if older Clearquest clients can
still authenticate with LDAP. If not then the user community would need
to update their Clearquest.</p>

<h2>Pong</h2>

<p>I now have a script called pong.sh (and a corresponding expect script called pong.tcl) that will "pong" a system and send email if it does not respond. By "pong" I mean it will telnet to the machine, attempt to login as vobadm and check for a "proper" prompt. If it fails then email is sent to the members of our project (Ray is working on a bona fide email alias...).</p>

<p>I planned on running this from ccase-rmna-1 in vobadm's crontab (BTW: There was a blank line in the crontab, which causes Solaris to complain (Other OSes are this picky. I removed that blank line).</p>

<p>The problem now is that ccase-rmna-1 lacks expect! :-( </p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  8:00 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000453.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 16, 2005</h2>
                     <a id="a000452"></a>
                     <div class="entry" id="entry-452">
                        <h3 class="entry-header">PQA Clearquest:: Spacing out</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Fixed minor problems with trailing spaces on fields</li>

  <li>Fixed minor problem with space filled <b>Software_Revision</b></li>

  <li>Fixed problem where field names were reversed.</li>

  <li><b>Submitter</b> and <b>Submit_Date</b> are set by action hooks to the current username and current date/time. We'll need to turn
 this off if we want the old <b>Submitter</b> and <b>Submit_Date</b>.</li>

  <li>Implemented <i>Attachment Handling</i></li>
</ul>


                              
                              <h3>Trailing spaces</h3>

<p>There are some minor problems with the data involving spaces. For example, a <b>Prod:HUT_Version</b> is set to "<i>BCM95704CA40 v1.0 revA0 </i>" - Note that it has a trailing space. Well <b>AddToFieldChoiceList()</b> attempts to add this value but the Clearquest API trims the trailing space! This results in a validation error as "<i>BCM95704CA40 v1.0 revA0 </i>" is <b>not</b> equal to "<i>BCM95704CA40 v1.0 revA0</i>". The solution here is to trim the trailing space before calling <b>AddToFieldChoiceList()</b>.</p>

<h3>Space filled Software_Revision</h3>

<p><b>Prod:Software_Version</b> would sometimes come in as " " instead of "". My code was only checking for "" and changing that to "N/A". It now also checks for " ".</p>

<h3>Field name reversal</h3>

<p>Some fields, for example <b>ReportedBy</b>, were supposed to be renamed to another field name, i.e. <b>Reported_By</b>, in the destination database but my code reversed the field naming change. It's odd that Clearquest was OK with adding <b>ReportedBy</b> field to <b>Cont</b> as there was no <b>ReportedBy</b> field in <b>Cont</b>. Adding the correct field name solved a problem with <b>Visibility</b> and its action hook.</p>

<h3>Attachments take time!</h3>

<p>While the <i>TransferAttachments()</i> routine now works, it adds a significant amount of time to the processing of defects with attachments. Some attachments are as large as 82 Meg! There are zip files, Excel spreadsheets, screen dumps in the very inefficient BMP file format and Ethreal dumps and even tape I/O dumps. <i>TransferAttachments()</i> operates by extracting the files from the source database to disk then calling <i>AddAttachment()</i> to copy the files back into the new DB. While not the most efficient way to do this I see no other way given the current Clearquest API.</p>

<p>As a measure, previously it took 16 minutes and 44 seconds to merge 1382 defect records from <b>TO</b> -> <b>Cont</b>, with attachments it took <b>4 hours and 11 minutes!!!</b></p>

<p>Ah, figured out why it took so long. I was using a snapshot view that was housed on my laptop. So the attachment files were being written to the current working directory, my snapshot view on the laptop. So those writes and reads were over the network. To make matters worse my laptop was not even at Broadcom, rather it was at my house. So those 82 meg files had to travel from Broadcom though my small DSL connection and even through a VPN! No wonder it took so long!</p>

<p>Now running it in ~vobadm/My Documents on the server and it's much quicker... Only 25 minutes and 21 seconds.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 12:57 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000452.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 15, 2005</h2>
                     <a id="a000451"></a>
                     <div class="entry" id="entry-451">
                        <h3 class="entry-header">PQA Clearquest: Resolving remaining issues with bad data</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>This is to document all of the issues related with bad data in the source databases that is impeeding the PQA Merge process. Along with the issues I will present what I did to work around the problems and what I suggest we should do to provide a smooth transition of these databases</p>
                              
                              <h2>Resolving Data Conversion Problems in PQA Database Merge</h2>

<h3>New fields that are mandatory</h3>

<p>The following fieilds are new in the destination database (Cont) and are also mandatory thus must be filled in with something:</p>

<ul>
  <li><b>Cont:Found_On_Gold:</b> This field is defaulted to <i>No</i>.</li>
</ul>

<h3>Fields with blank or invalid data</h3>

<p>The following fields have blank or invalid data in the source database thus fail validation when added to the new database:</p>

<ul>
  <li><b>TO:SQATestCase:</b> This field, when blank, is set to the string "N/A". This field is also renamed to <b>Cont:PQATestCase</b>.</li>

  <li><b>TO:Title_2:</b> This field, when blank, is set to the string "N/A". This field is also renamed to <b>Cont:TItle</b>.</li>

  <li><b>Prod:Software_Version:</b> This field, when blank, is set to the string "N/A".</li>

  <li><b>Prod:HUT_Version:</b> This field, when blank, is set to the string "N/A". This field is also renamed to <b>Cont:Board_Revision</b>.</li>

  <li><b>Prod:Software_Version:</b> This field, when blank, is set to the string "N/A".</li>

  <li><b>Prod:SQATestCase:</b> This field, when blank, is set to the string "N/A". This field is also renamed to <b>Cont:PQATestCase</b>.</li>
</ul>

<h3>Fields with data that are no longer valid in new database</h3>

<p>The following fields have data in the source database but fail validation when added to the new database due to reasons like not being on the list of acceptable values for the field in question:</p>

<ul>
  <li><b>Prod:Category</b> This field sometimes has the value of <i>Hardware</i> or <i>System Bios</i> which are not valid choices in the new database. For now I am changing <i>Hardware</i> -> <i>Hardware - Chip</i> and <i>System Bios</i> -> <i>Software</i>. I suggest we add <i>Hardware</i> and <i>System Bios</i> to the constant list as <i>HARDWARE</i> and <i>SYSTEM BIOS</i> (Capitalized) so we can easily find and correct these later.</li>

  <li><b>Prod:Issue_Classification:</b> This field sometimes has the value of <i>Hardware</i> which is not a valid choice in the new database. For now I'm changing <i>Hardware</i> -> <i>Requirement</i>. I suggest we add <i>Hardware</i> to the constant list as <i>HARDWARE</i> (Capitalized) so we can easily find and correct these later.</li>

  <li><b>Prod:Resolution:</b> This field sometimes has the value of <i>HW Fix</i> or <i>MAC Core</i> which are not valid choices in the new database. For now I am changing <i>HW Fix</i> -> <i>HW - Fix</i> and <i>MAC Core</i> -> <i>SW Fix</i>. I suggest we add <i>HW - Fix</i> and <i>MAC Core</i> to the constant list as <i>HW - FIX</i> and <i>MAC CORE</i> (Capitalized) so we can easily find and correct these later.</li>

  <li><b>Prod:HUT_Revision:</b> This field is sometimes set to "n/a". This is translated to "N/A" (note capitalization).</li>
</ul>

<h3>Fields that need truncating</h3>

<p>The following fields have data that is too large to fit in the size of the corresponding field in the destination database:</p>

<ul>
  <li><b>Prod:ActionNotes:</b> This field is defined with a maximum length of 50 characters in the TO database, 250 characters in the Prod database and 50 characters in the Cont database. Some entries in the Prod database are greater than 50 characters thus require truncation. I suggest that we increase the maximum length of <b>Cont:ActionNotes</b> to 250 characters to avoid this problem.</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:41 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000451.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 14, 2005</h2>
                     <a id="a000450"></a>
                     <div class="entry" id="entry-450">
                        <h3 class="entry-header">PQA Merge - Action Hooks & Attachments</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>There are action hooks in Cont that send out email. I fear my testing may be generating lots of unnecessary email. Would like to have the Action Hook's email procedures coded to be conditional based on say an env  var so we can turn off email during the production merge.</lI>

  <li>Attachments are currently not handled because they are different and require special code to iterate through them to copy them to the destination database</li>

  <li>Need to have the delete action available on the defect record so pqaclean can work. I've modified my schema for that</li>

  <li>Changed pqamerge to only get the dbid's then to obtain the entity records when needed. Previously I would build a query with all fields. That query took from 6-40 minutes to run before I could even obtain the first record! Also the memory size of Perl grew very big. This algorithm is much faster with the query taking under 1 second!</li>

  <li>Working on problems with the source data.</li>
</ul>
                              
                              <h3>Bad data. BAD DATA! Go sit in the corner!</h3>

<p>I'm discovering that not all the data in the source databases are clean to start with. For example, HUT_Version -> Board_Revision. in TO all defects have valid HUT_Versions. With Prod some of the HUT_Versions are blank! That's not good as that's an invalid value. For example, use Clearquest to bring up record Prod00002978's Board_Revision (It's shown in Clearquest as Board_Revision but is tied to the field HUT_Version) is blank. Select <strong>Modify</strong> and the field will be <font color=red>red</font>. On that same record you'll notice that <strong>Category</strong> is also <font color=red>red</font>. This is because <strong>Category</strong> is a <em>Constant list</em> and there is no <em>Hardware</em> in that constant list! There are <em>Hardware - Board</em> and <em>Hardware - Chip</em> however. Which do I choose?</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 11:14 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000450.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 13, 2005</h2>
                     <a id="a000449"></a>
                     <div class="entry" id="entry-449">
                        <h3 class="entry-header">PQA Merge</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Added Display, Logger and new TimeUtils to pqaclean and pqamerge</li>

  <li>Finally got ProjectExists() to work. Turns out I was using the wrong CQPerlExt constant causing pqamerge to blow up</li>

  <li>Received guidance from Vinh regarding certain field transformations. Incorporated them into pqamerge</li>

  <li>Pqamerge now merging all of TO:defect records with a few exceptions that I'm fixing</li>
</ul>

                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  4:09 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000449.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 12, 2005</h2>
                     <a id="a000448"></a>
                     <div class="entry" id="entry-448">
                        <h3 class="entry-header">PQA Clearquest: Project fields</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Started coding TransferDefects(). This is where the rubber hits the road</li>
</ul>
                              
                              <h3>Project Fields</h3>

<p>Queried Vinh:</p>

<p>Vinh, you may be seeing me asking more questions as I get into coding pqamerge. This email is about Project. Let me see if I understand this:</p>

<p>There are the following "project" related fields:</p>

<ul>
  <li><b>TO:Project:</b> Reference to Project stateless record. Since there are no Project records in the TO database I assume this field is not used and should be ignored from TO.</li>

  <li><b>Prod:Project:</b> There are records in Prod. I assume these should be translated to <b>Cont:Found_In_Project</b>.</li>

  <li><b>Prod:Project_Name:</b> Apparently not used  and should be ignored?</li>

  <li><b>TO:Found_In_Project:</b> Short string dynamic list consisting of <em>Release T2.0</em>, <em>Release T2.1</em>, <em>Release T2.5</em> and <em>Release T3.0</em>. I assume that this translates to <b>Cont:Found_In_Project</b> which is a reference to <b>Cont:Project</b>?</li>
</ul>

<p>There are other "project" related fields that I'm a little confused about:</p>

<ul>
  <li><b>TO:CommittedToProject:</b> Short string, dynamic list</li>

  <li><b>TO:DeferredToProject:</b> Short string, dynamic list</li>

  <li><b>Prod:CommittedToProject:</b> Short string, <u>constant</u> list</li>

  <li><b>Prod:DeferredToProject:</b> Short string, <u>constant</u> list</li>

  <li><b>Cont:CommittedToProject:</b> Short string, dynamic list</li>

  <li><b>Cont:DeferredToProject:</b> Short string, dynamic list</li>
</ul>

<p>Should all of these be changed to references to the Cont:Project stateless record?</p>

<h3>Values for new mandatory fields</h3>

<p>I've added routines to dynamically create those dynamic lists, however I am having problems with the following fields. These fields are new for Cont and are mandatory. Since I don't have old data to fill them in with I do not know what you want them to be set to. Here are the fields and my guesses:</p>

<ul>
  <li><b> Board_Revision:</b> Default value: ???</li>

  <li><b>Found_On_Gold:</b> This is a constant list of "Yes" or "No". I assume "No"</li>

  <li><b>PQATestCase:</b> This is a constant list of "Yes" or "N/A". I assume "N/A"</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 11:40 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000448.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 11, 2005</h2>
                     <a id="a000447"></a>
                     <div class="entry" id="entry-447">
                        <h3 class="entry-header">PQA Clearquest</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Resolved problems being able to log into the new Cont database by redoing the importation of CQSchema, CQ_Controller_Prod and CQ_Controller_Test</li>

  <li>Imported user accounts database from old schema to new schema. This was done by simply setting all users to all databases. While this is not what we will do for the production move it allows me to continue coding and testing</li>

  <li>Started coding pqamerge. Got to the point of being able to transfer Customer and Project records</li>

  <li>Coded pqaclean. This is a little script to effectively erase the destination database. This allows me to run pqamerge over and over from a clean slate. Had to add a delete action to the defect record</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  9:15 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000447.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 10, 2005</h2>
                     <a id="a000446"></a>
                     <div class="entry" id="entry-446">
                        <h3 class="entry-header">PQA Clearquest</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Hooked up new PQA schema database and data database</li>

  <li>Starting to code merge routines</li>

  <li>Created PQA Schedule (See below)</li>
</ul>
                              
                              <h3>Moving MS/SQL Databases</h3>

<p>Moving a MS/SQL Database from one host to another involves a bit of tweaking to get the new system to recognize that it has a new database. I will attempt to detail here what needs to be done. </p>

<p>In order to import Clearquest databases to a new MS SQL Database Server:</p>

<ol>
  <li>Place imported datafile onto new machine.</li>

  <li>Start the MS SQL Server Enterprise Manager (C:\Windows\system32\mmc.exe /s "C:\Program Files\Microsoft SQL Server\80\Tools\BINN\SQL Server Enterprise Manager.msc")</li>

  <li>Expand tree until you see "(local)" then "Databases". Right click on Database and select New Database to create an empty new database. Name the database appropriately. On the Data Files tab we changed the default path of C:\Program Files\Microsoft SQL Server\MSSQL\data\&lt;database name&gt;.mdf to a more approriate place. Also check the Transaction Log tab to adust path.</li>

  <li>Restore database by right clicked on the new database you created and selecting All Tasks: Restore Database. Under Restore select From Device then click Add then find the restored db file. Under Options change the paths for Move to physical file name.</li>

  <li>For Clearquest Schema databases only (You may need to restart the SQL Server Enterprise Manager after the above restore of the database): Since Clearquest uses a database to hold the schema and that schema points to known user databases, importing a Clearquest schema will have entries that point over to <b>projection</b> databases! These need to change:

    <ul>
      <li>In SQL Sever Enterprise Manager locate your imported schema database and double click on Tables.</li>

      <li>Find master_dbs, right click on master_dbs and select Open Table: Return All Rows.</li>

      <li>Change the server column to the name of the new server</li>

      <li>Select Run (the ! symbol in the toolbar)</li>
    </ul>

  <li>Folllow instructions at <a href="http://support.microsoft.com/default.aspx?scid=kb;%5bLN%5d;Q240872">How to resolve permission issues when you move a database between servers that are running SQL Server</a> for fixing permissions problems.</li>

  <li>Import user databases. Note the fix above regarding master_dbs:server is <b>not</b> required for user databases</li>
</ol>

<h3>Merge Routines and Connecting to Multiple Schemas</h3>

<p>With two schema databases I was having problems with my Perl script connecting to the databases. In the past I had:

<div class="code"><pre>
      ## Internal variables ##
      my $session;
      my $login           = "admin";
      my $password    = "*****";
      my $masterdb    = ""; # Don't need a masterdb (Using default?)
      my $db_name;
    ...
      sub StartSession {
        $db_name = shift;

        $session = CQPerlExt::CQSession_Build ();

        $session->UserLogon ($login, $password, $db_name, $masterdb);
      } # StartSession
</pre></div>

<p>Now when I run this in the presence of two schema databases I get:</p>

<div class=box>
    The database "MASTR" belonging to master database "2002.05.00" is an invalid name. Enter the correct name of a ClearQuest user database. at c:/Program Files/Rational/ClearQuest/lib/CQPerlExt.pm line 3713.
</div>

<p>I think I need to specify the proper $ masterdb name but I don't know what that might be... Hmmm... Seems that $masterdb is really just the Connection name that you'd see when you start Clearquest Designer or Clearquest Client and there are multiple schemas to choose from. That's odd because that could be potentially anything as the user could rename it. However if I use PQA_Old on p4test (which is what I named the old schema connection) then it works.</p>

<p>OK, more work on this tomorrow. I have already defined the new defect record in my Perl module. I just have to start coding the merge routines now...</p>

<h3>PQA Schedule</h3>

<p>The following is a rough estimate of the work needed to be completed to get to the point where we are ready to convert the live production databases</p>

<ul>
  <li> Restore new Schema DB and Data DB (<font color="#999">1 Day</font>)</li>

  <li> Investigate record/field mappings (<font color="#999">2 Days</font>)</li>

  <li>Determine order fo record additions (<font color="#999">1 Day</font>)</li>

  <li>Investigate requirements for adding of records to Clearquest (<font color="#999">2 Days</font>)</li>

  <li>Code/Test merge procedures (<font color="#999">3 Day</font>)</li>

  <li>Test conversion on <b>p4test</b> (<font color="#999">4 Days</font>)</li>
</ul>

<p><b>Total:</b> 13 Days</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 12:11 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000446.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October  8, 2005</h2>
                     <a id="a000445"></a>
                     <div class="entry" id="entry-445">
                        <h3 class="entry-header">SJ VOB Move</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>The VOB move for San Jose went fairly well. Without the normal user load on the servers the dumping and loading process was much quicker. I've attached Jennifer's spread sheet and updated it to reflect which vobs we've moved and how long it took as well as what sort of reduction we got in the DB sizes. All moved vobs are tagged on ccase-sj1-7 and Clearcase is still off on ccase-sj1-1 - for now. We will turn that on before Jennifer and Chin start with their testing. Yet left to do is the Multisite chreplica and re instituting of the cronjobs, etc. - nothing that would imped users Monday morning as well as clean up of backup areas assuming we reach a go on the go/no go tomorrow afternoon.</p>

<p>I've also attached a tar image of the log files that we managed to capture for the dump and load process.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  3:13 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000445.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October  7, 2005</h2>
                     <a id="a000444"></a>
                     <div class="entry" id="entry-444">
                        <h3 class="entry-header">ctmerge</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Started incorporating ctmerge and other old Clearcase/Clearquest oriented scripts in to adm vob</li>

  <lI>Investigated some Multisite issues WRT this SJ VOB move</li>

  <li>Working with Shivdutt on copying VOB storage over to /projects/cc-test</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:01 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000444.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October  6, 2005</h2>
                     <a id="a000443"></a>
                     <div class="entry" id="entry-443">
                        <h3 class="entry-header">PQA.pm/adm VOB</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Converted Code Page routines into a PQA.pm Perl Module</li>

  <li>Changed routines to check all fields. Clearquest returns character data for fields such as DATE_TIME fields. These record definitions are now complete and will be useful when it comes time to perform the conversion</li>

  <li>Waiting for new schema to start coding/testing conversion process. Contacted David Shaw who had helped us last time to get the databases onto our test server</li>

  <li>Finally get adm VOB working and am starting to add my stuff into this VOB in a controlled fashion. This is not just a place to dump all of our scripts rather it's a place to start centralizing our code in a manner consistent with proper software engineering principals (Structured coding, code reuse, generalization, object oriented design principals, etc.)</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 11:28 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000443.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October  5, 2005</h2>
                     <a id="a000441"></a>
                     <div class="entry" id="entry-441">
                        <h3 class="entry-header">HTML Characters/VOB Distribution</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Changed CheckCodePage to use HTML character equivalents</li>

  <li>Derived a plan of redistributing VOBs between VOB servers based on VOB database size</li>
</ul>
                              
                              <h3>HTML Characters</h3>

<p>Decided to translate non US ASCII characters into their HTML equivalents. Therefore &copy; changes to "&amp;copy;" For characters that have no handy name equivalent used the form of &amp;#<i>n</i>; where <i>n</i> is the decimal number for the character.</p>

<h3>VOB Distribution</h3>

<p>Based on Jennifer's email and adjusting for size of DB here is how I'd split the vobs between ccase-sj1-1 and ccase-sj1-7. This distribution balances the vob database size between the two machines.</p>

<table  align="center" border="1" cellpadding="2" cellspacing="0" height="100%"  width="95%" bgcolor="white">
  <tbody>
    <tr>
      <th colspan="3" bgcolor="teal" align="center"><font color="white">Proposed split of vobs</font></th>
    </tr>
    <tr bgcolor="#33ccff">
      <th>Vob</th>
      <th>ccase-sj1-1</th>
      <th>ccase-sj1-7</th>
    </tr>
    <tr>
      <td>\UCM-Projects</td>
      <td>436.8</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\SetTop</td>
      <td>&nbsp;</td>
      <td>4545.9</td>
    </tr>
    <tr>
      <td>\magnum</td>
      <td>442.7</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\BSEAV</td>
      <td>&nbsp;</td>
      <td>452.1</td>
    </tr>
    <tr>
      <td>\rockford</td>
      <td>97.4</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\TestTools</td>
      <td>&nbsp;</td>
      <td>15.4</td>
    </tr>
    <tr>
      <td>\DVTSJ</td>
      <td>17.5</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\TiVo</td>
      <td>&nbsp;</td>
      <td>49.4</td>
    </tr>
    <tr>
      <td>\LinuxSupport</td>
      <td>&nbsp;</td>
      <td>18.8</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\SetTopGI</td>
      <td>377.9</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>\SetTopMot</td>
      <td>288.8</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\Ref_Linux_Kernel</td>
      <td>&nbsp;</td>
      <td>1647.2</td>
    </tr>
    <tr>
      <td>\BSE_MS</td>
      <td>482.5</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\tmmsky</td>
      <td>&nbsp;</td>
      <td>14.7</td>
    </tr>
    <tr>
      <td>\nds</td>
      <td>14.5</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\Mot_P3_TCMTC</td>
      <td>&nbsp;</td>
      <td>0.2</td>
    </tr>
    <tr>
      <td>\CommEngine</td>
      <td>1506.7</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\BSSS</td>
      <td>&nbsp;</td>
      <td>28.9</td>
    </tr>
    <tr>
      <td>\softmodem</td>
      <td>11.7</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\applications</td>
      <td>&nbsp;</td>
      <td>8.4</td>
    </tr>
    <tr>
      <td>\bsp</td>
      <td>2.4</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\CP64_TC</td>
      <td>&nbsp;</td>
      <td>21.2</td>
    </tr>
    <tr>
      <td>\Mot_P3_TvMon</td>
      <td>68.6</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\DSR207</td>
      <td>&nbsp;</td>
      <td>5</td>
    </tr>
    <tr>
      <td>\dsr207_tvmon</td>
      <td>5.2</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\BcmLib_Dsr530</td>
      <td>&nbsp;</td>
      <td>5</td>
    </tr>
    <tr>
      <td>\BcmLib_Dsr550</td>
      <td>11.1</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\DSR550P3_BSP</td>
      <td>&nbsp;</td>
      <td>3.5</td>
    </tr>
    <tr>
      <td>\Documentation</td>
      <td>&nbsp;</td>
      <td>30.6</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\SQA</td>
      <td>317.9</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>\Web</td>
      <td>112.7</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\Test</td>
      <td>30.3</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>\Firmware</td>
      <td>&nbsp;</td>
      <td>95</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\echostarUK</td>
      <td>483.9</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>\kylin</td>
      <td>53.9</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\CFE</td>
      <td>&nbsp;</td>
      <td>25.2</td>
    </tr>
    <tr>
      <td>\brcm_wince</td>
      <td>1.1</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\Tools</td>
      <td>&nbsp;</td>
      <td>7</td>
    </tr>
    <tr>
      <td>\Motorola_lib</td>
      <td>6.3</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\MOT_97320</td>
      <td>&nbsp;</td>
      <td>10.5</td>
    </tr>
    <tr>
      <td>\BcmLib_Dsr580</td>
      <td>3.3</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\BcmLib_Dsr580_Venom2_P2</td>
      <td>&nbsp;</td>
      <td>4.7</td>
    </tr>
    <tr>
      <td>\BcmLib_Dsr500</td>
      <td>&nbsp;</td>
      <td>11.1</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\BCM_HAL</td>
      <td>24.4</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>\DVI3K</td>
      <td>15.1</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\DViTV</td>
      <td>&nbsp;</td>
      <td>3.1</td>
    </tr>
    <tr>
      <td >\DSR550P3</td>
      <td>&nbsp;</td>
      <td>21.6</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\ArchiveSetTop</td>
      <td>189.8</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>\Dvtsw</td>
      <td>296</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\TestPriv</td>
      <td>&nbsp;</td>
      <td>3</td>
    </tr>
    <tr>
      <td>\bxUCM_support_7315sc</td>
      <td>4</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\HAL_test</td>
      <td>&nbsp;</td>
      <td>1.8</td>
    </tr>
    <tr>
      <td>\BCM_test</td>
      <td>10.2</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\UCM-CQTest</td>
      <td>&nbsp;</td>
      <td>31.1</td>
    </tr>
    <tr>
      <td>\delivertest</td>
      <td>0.5</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\UCMrmcomp</td>
      <td>&nbsp;</td>
      <td>0.4</td>
    </tr>
    <tr>
      <td>\UCM-Test</td>
      <td>3.6</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\BSE-SYS</td>
      <td>&nbsp;</td>
      <td>8.8</td>
    </tr>
    <tr>
      <td>\A1</td>
      <td>0.3</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\echostar</td>
      <td>600.6</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td>\bknittel_web_pvob</td>
      <td>0</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\bknittel_web</td>
      <td>&nbsp;</td>
      <td>0</td>
    </tr>
    <tr>
      <td>\ss-test</td>
      <td>1145.7</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\last</td>
      <td>&nbsp;</td>
      <td>0</td>
    </tr>
    <tr>
      <td>\bxUCM_proj</td>
      <td>3.4</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ddd">
      <td>\bxUCM_support</td>
      <td>&nbsp;</td>
      <td>11.3</td>
    </tr>
    <tr>
      <td>\bxUCM_system</td>
      <td>0.8</td>
      <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#33ccff">
      <td><b>Total</b></td>
      <td><b>7067.6</b></td>
      <td><b>7080.9</b></td>
    </tr>
  </tbody>
</table>

                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  4:29 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000441.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October  4, 2005</h2>
                     <a id="a000440"></a>
                     <div class="entry" id="entry-440">
                        <h3 class="entry-header">rgy_swtichover/Triggers</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Responded to IBM Rational Support regarding rgy_switchover</li>

  <li>Added prohibit_operation to trigger list</li>

  <li>Instituted the <i>evil twin</i> trigger</li>

  <li>Obtained Chris' CQ merge scripts and started looking in to that</li>

  <li>Went back to analyzing the PQA CQ data for invalid characters</li>
</ul>
                              
                              <h3>rgy_switchover</h3>

<p>IBM Rational responded</p>

<blockquote>
  <p>Steven Chaves wrote:</p>

  <p>Andrew,</p>

  <p>Even though there is no documentation saying that about DHCP, UNIX, and Clearcase environment, I would agree with you that rgy_switchover is useless in your situation. It seems to have no problem if you have no Interop environment. I believe that documents show say that works for one platform not Interop environments.</p>
</blockquote>

<p>My response to this was:</p>

<blockquote>
  <p>Where in the documents does it state that rgy_switchover is only supported in non interop environments?</p>

  <p>I would think that it would be fairly common to have a Clearcase shop in which there are some Unix servers and many Windows clients - even Unix/Linux clients. You are saying that in such environments rgy_switchover is essentially broken in that it doesn't accomplish what it was intended to do.</p>

  <p>I feel, but have not managed to proof yet, that if the Windows machine name resolved through DNS then rgy_switchover would work fine. Can you test this scenario? Create an environment where you have two Unix servers, one being the primary registry server and the other the backup registry server. Have 4 clients, 2 Unix and 2 Windows with DHCP assigned IP addresses. Configure 1 Windows machine with a machine name that resolves in DNS via nslookup to it's IP address. The other Windows client's machine name should not resolve in DNS. Same thing with the Unix machine, one resolves, one doesn't.</p>

  <p>Then do rgy_switchover. I think you will find that all machines whose names resolve to IP addresses through DNS will switchover and all machines whose names don't resolve in DNS will fail to switchover.</p>

  <p>If that's the case then the documentation should clearly indicate that rgy_switchover will fail on any machine whose name does not resolve to it's IP address in DNS.</p>

  <p>Ray, why don't Windows machine names (e.g. my machine - ltsjca-adefaria) resolve in DNS using nslookup? I think it is possible to set it up so that Windows machine names resolve in DNS and are still DHCP assigned.</p>
</blockquote>

<h3>Prohibit Operation</h3>

<p>Many companies add a trigger such that any new element created is immediately changed to be owned by vobadm. This way individuals do not own the element - vobadm does - which is closer to say "these aren't your elements - they are the company's". It also has the nice side effect of automatically disallowing certain potentially dangerous operations like rmelem from being done by non-owners. So then only vobadm can rmelems.</p>

<p>Here at Broadcom they take a different approach: Rather than changing ownership to vobadm they put a trigger on rmelem and rmver with an -nuser vobadm. I'm not sure I agree with not allowing users to rmver.</p>

<p>Luckily I was able to add -nusers vobadm to the "Type" line in triggers.dat and it was just passed along. We really should implement an "Options" line for additional options.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 11:30 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000440.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October  3, 2005</h2>
                     <a id="a000439"></a>
                     <div class="entry" id="entry-439">
                        <h3 class="entry-header">SJ Vob move/Triggers</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Discussed how to best handle the upcomming SJ vob move</li>

  <li>Added handling for UCMOBJECT triggers and the few additional triggers on the docs vob</li>
</ul>
                              
                              <h3>SJ Vob Move</h3>

<p>I got to thinking over the weekend more about this vob move and trying to tie it to why we are moving the vobs. If we are trying to gain performance then how do we know that this move will accomplish that? It occurred to me that we have not adequately identified the performance problem we are trying to solve. If performance is the issue then just changing architectures is not likely to solve that problem.</p>

<p>Lacking any real description of the performance problem the users are experiencing the best we can do is optimize performance for vob service. In general, Rational recommends that you do not over load a server with too many vobs. More specifically you need to be concerned about the total size of your vob databases. What you are trying to do is insure that you have enough memory to fit the databases of the most commonly used vobs.</p>

<p>The old Solaris machine has 1 CPU and 4 gig of memory. The new Linux box also has 4 gig of memory but 2 CPUs. Observation reveals that the Solaris machine is not CPU bound - increasing CPU horsepower or number of CPUs will not increase performance.</p>

<p>I feel the best course of action at this point would be to identify the commonly used vobs and separate them between the Solaris and Linux machines thus decreasing the load on both servers, increasing the overall amount of memory (8 gig - 4 on one and 4 on the other) and allow for parallelization. Additionally, only 1/2 of the data need move. Need to sell this to Jennifer and Chin.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  7:50 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000439.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
