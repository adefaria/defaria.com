<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml"$>" />

   <title>Status for Andrew DeFaria: April 2006 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/2006_03.html" title="March 2006" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/2006_05.html" title="May 2006" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/2006_03.html">&laquo; March 2006</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/2006_05.html">May 2006 &raquo;</a>
                     </p>
                     
                     
                     

                     <h2 class="date-header">April 27, 2006</h2>
                     <a id="a000548"></a>
                     <div class="entry" id="entry-548">
                        <h3 class="entry-header">Building salira2</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Exposed salira2 vob</li>

  <li>Set up multisite schedule for sons-sc-cc to mimic sons-clearcase. Before this sync receives were only performed once! Things started backing up in the storage bays. All cleared out now.</li>

  <li>Attempted to build 4.0. Had problems in dynamic view</li>

  <li>Managed to build in 4.0 snapshot view.</li>

  <li>Figured out that certain exe's were missing execute permission in Clearcase Element Properties. Seems Clearcase 2003.06.00 is a bit more picky about those than Clearcase 2002.05.00! Build now works in dynamic view as well</li>
</ul>

<p><b>TIme Spent:</b> 2 hours</p>
                              
                              <p>Simon Zhu wrote:</p>

<blockquote type="cite">
  Similar to sc_3.1_dev, I made config spec sc_4.0_dev. It does not make any difference since I could not find “cenopon” under salira2 when I load the view. It seems to me that the VOB was not fully replicated. You may take a look. Thanks.
</blockquote>

<P>The szhu_view4.0 has a config spec of:</p>

<div class=code><pre>
#element * CHECKEDOUT
#element * /main/LATEST
include //sons-sc-cc/views/official/salira/neopon/cs/sc_4.0_dev
#load \salira\neopon
load \salira2
</pre></div>

<p>And the following lines appeared in sc_4.0_dev:</p>

<div class=code><pre>
# Now pickup any new elements created at the other site
element * .../rel_<b><font color="#3333ff">3.1</font></b>/LATEST -mkbranch sc_4.0
element * .../china_4.0/LATEST -mkbranch sc_4.0
</pre></div>

<p>This should be:</p>

<div class=code><pre>
# Now pickup any new elements created at the other site
element * .../rel_<b><font color="#ff0000">4.0</font></b>/LATEST -mkbranch sc_4.0<br>
element * .../china_4.0/LATEST -mkbranch sc_4.0
</pre></div>

<p>We can see this in the version tree for the root folder \salira2 :</p>

<blockquote>
  <img alt="" src="/blogs/images/4.0.jpg" height="373" width="413">
</blockquote>

<p>Prior to fixing the config spec the "eye" pointed to /main/0, which, of course is empty.</p>

<p>Next I attempted simply a make. Most of it worked! Except:</p>

<div class=code><pre>
[LINKING]      vxWorks_st.elf 
Converting to bin...
/bin/bash: maketools/convert: Permission denied
make: *** [scs.bin] Error 126
[ccadmin] sons-sc-cc:ls maketools
</pre></div>

<p>I don't know why I get permission denied when attempting to run maketools/convert. This is only happening in a dynamic view. I created a 4.0_snap view and the build worked fine.</p>

<p>Ah ah! It appears that the execute bit on the Properties of the Element for maketools/convert.exe was not set, even on sons-clearcase. However it also appears that Clearcase 2002.05.00 didn't care about that but the new Clearcase 2003.06.00 does. I toggled the execute bits on for convert.exe (and other .exe's in maketools) and all is fine.</p>

<p>Since your view is a snapshot view you'll need to simply do a ct setcs -current.</p>

                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 10:39 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000548.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 24, 2006</h2>
                     <a id="a000547"></a>
                     <div class="entry" id="entry-547">
                        <h3 class="entry-header">XAM Build</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Got XAM ant build to work. Test build almost working</li>

  <li>Ported Build.pl for use in XAM</li>
</ul>
                              
                              <p>I assume you mean the state of XAM. Here's what I've done:</p>

<ul>
  <li>Moved .../platform/L3/platform/src/com/hp/platform/fcas -> .../platform/XAM/server/src/com/hp/platform/fcas</li>

  <li>Moved .../platform/L3/platform/src/test/com/hp/platform/fcas -> .../platform/XAM/server/src/test/com/hp/platform/fcas</li>

  <li>Moved .../riss/W2/xam/client -> .../platform/XAM/client/c</li>
</ul>

<p>By "moved" I mean that I copied those areas from the old place to the new place, added them to source control and rmnamed the old areas. This is as per Rational's recommendation for moving things in a UCM environment.</p>

<p>Next I attempted to build fcas in the new area. It became quickly apparent that we need to port over the buildTools directory with its build_common.xml if we wish to replicate the build environment of L3.</p>

<p>With Rahul's help I managed to build the server component in XAM. I have not tackled the client component nor test at this time. I've checked in the buildTools/build_common.xml and the build.xml under the server area.</p>

<p>Here's how you can build XAM:</p>

<ul>
  <li>If necessary rebase your RISS15_xam substream or create view from RISS15_xam</li>

  <li>Change directory to .../platform/XAM/server/src/com/hp/platform/fcas</li>

  <li>type "ant -Dbase_dir=/vobs/platform/XAM -DviewBase=/vobs"</li>
</ul>

<p>Note: viewBase would be different if you are using a snapshot view.</p>

<p>Since XAM will be separated from L3 the question is: How are dependencies handled? For example, this XAM "depends on" or "imports" code from L3's core and csfr. To address this we added:</p>

<div class="code"><pre>
&lt;pathelement path="${viewBase}/platform/L3/code"/&gt;
</pre></div>

<p>to the ext.classpath in build_common.xml even though the comment for this states:</p>

<div class="code"><pre>
&lt;!--
    Class path element for Build. Don't add libraries here Libraries
    should go under devenv/buildenv/lib those libs will be
    automatically picked up by the following element
--&gt;
</pre></div>

<p>You see we now have two different types of libraries, ext.classpath libraries that are built elsewhere and just deposited into devenv/buildenv/lib and our own libraries that are built in another component (in this case the L3 component).</p>

<p>Also, the above ${viewBase}/platform/L3/code assumes that that directory exists and contains compiled class files. It assume that L3 was built before XAM is built. This introduces the notion of dependencies between components.</p>

<p>Finally you'll note that we don't build from the /vobs/platform/XAM level, rather we descend down into the /vobs/platform/XAM/server/src/com/hp/platform/fcas level to do our ant build. Questions:</p>

<ul>
  <li>Do we need a Build.pl to sit in /vobs/platform/XAM to build everything underneath it?</li>

  <li>Can't ant do recursive ants like make does recursive makes?</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  7:15 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000547.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 19, 2006</h2>
                     <a id="a000546"></a>
                     <div class="entry" id="entry-546">
                        <h3 class="entry-header">Successful Build on sons-sc-cc</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Tracked down the problem with building on sons-sc-cc. Turns out Tornado-2.0 is slightly different</li>
</ul>

<p><b>TIme Spent:</b> 2 Hours</p>
                              
                              <p>Here's what I see. Looking into why I'm getting this error I searched
Tornado-2.0 for the definition of endEtherAddressForm and I find it in
Tornado-2.0/host/resource/synopsis/drv.syn ~line 42. On sons-clearcase
I see:</p>

<div class=code><pre>
endEtherAddressForm() - form an Ethernet address into a packet

M_BLK_ID endEtherAddressForm
    (
    M_BLK_ID pMblk,    /* pointer to packet mBlk */
    M_BLK_ID pSrcAddr, /* pointer to source address */
    M_BLK_ID pDstAddr  /* pointer to destination address */
    )
</pre></div>

<p>However on sons-sc-cc I see:</p>

<div class=code><pre>
endEtherAddressForm() - form an Ethernet address into a packet

M_BLK_ID endEtherAddressForm
    (
    M_BLK_ID pMblk,    /* pointer to packet mBlk */
    M_BLK_ID pSrcAddr, /* pointer to source address */
    M_BLK_ID pDstAddr, /* pointer to destination address */
    BOOL     bcastFlag /* use link-level broadcast? */
    )
</pre></div>

<p>Note the extra parm. Now I copied //sons-clearcase/Tools -&gt; //sons-sc-cc/Tools but I know that Simon was doing something WRT WindRiver. Perhaps that changed Tools on sons-sc-cc? Here's what I tried:</p>

<ul>
  <li>Renamed //sons-sc-cc/Tools/Tornado-2.0 -&gt;
//sons-sc-cc/Tools/Tornado-2.0.save</li>

  <li>Recopied //sons-clearcase/Tools/Tornado-2.0 -&gt;
//sons-sc-cc/Tools/Tornado-2.0</li>

  <li><font color="#009900"><b>Performed build - it worked! All of it!
Not just olc!</b></font></li>
</ul>

<p>I noticed that there is a Tornado-2.0 folder in the D drive, a
Tornado-2.0 folder in D:\Tools and a Tornado-2.0+ in D:\Tools.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 11:31 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000546.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 18, 2006</h2>
                     <a id="a000545"></a>
                     <div class="entry" id="entry-545">
                        <h3 class="entry-header">Building on sons-sc-cc (Fixing smake)</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Looked into build issues on sons-sc-cc</li>

  <li>Adjusted smake</li>
</ul>

<p><b>Time Spent:</b> 2 hours</p>
                              
                              <p>This problem with drive letters being unavailable when one remotely
logs in is one that I had battled with for a while in the past as <a href="http://sourceware.org/cgi-bin/search.cgi?cmd=Search!&fmt=long&form=extended&GroupBySite=no&m=all&ps=10&q=network+drive+unavailable+2003&sp=1&sy=1&type=&ul=/ml/cygwin/%25&wf=2221&wm=wrd">history shows</a>.

<p>Unfortunately I don't have a great solution yet except to say that most people do not log into the server directly to do a build as you are doing. However there's a light at the end of the tunnel and that light is smake. Smake makes an optimization by setting TOOLS_DIR to the local disk drive instead of the T drive when building on sons-clearcase (and sons-cc for that matter as well as a sonsbld1 that we were once trying to set up). As a result I've changed smake to add sons-sc-cc to the list:</p>

<div class=code><pre>
if [ $myhost = "sons-sc-cc" ]; then
  export TOOLS_ROOT=D:/Tools &amp;&amp; nice make -e "$@"
elif [ $myhost = "sons-clearcase" ]; then
  export TOOLS_ROOT=E:/Tools &amp;&amp; nice make -e "$@"
elif [ $myhost = "sons-cc" -o $myhost = "sonsbld1" ]; then
  export TOOLS_ROOT=C:/Tools &amp;&amp; nice make -e "$@"
else
  nice make "$@"
fi
</pre></div>

<p>So if you use smake instead of just make on sons-sc-cc TOOLS_ROOT will
be set to D:/Tools (where Tools are locally on sons-sc-cc) and then it will call make. This should solve this problem for local makes. For remove smakes (an smake you invoke from your desktop - you guys still do that right?) the following code changes fix that:</p>

<div class=code><pre>
if [ $build_server = "sons-sc-cc" ]; then
  rsh -n $build_server "ct $(pwd) &amp;&amp; export TOOLS_ROOT=D:/Tools
&amp;&amp; nice make -e $@"
elif [ $build_server = "sons-cc" -o $build_server = "sonsbld1" ]; then
  rsh -n $build_server "cd $(pwd) &amp;&amp; export TOOLS_ROOT=C:/Tools
&amp;&amp; nice make -e $@"
else
  rsh -n $build_server "cd $(pwd) &amp;&amp; export TOOLS_ROOT=E:/Tools
&amp;&amp; nice make -e $@"
fi
</pre></div>

<p>The added benefit of this approach is that builds a <font  color="#ff0000"><b>a lot</b></font> faster since you are not loading the compiler over the network connection of the T drive (even though the T drive points back to the local machine in the case of sons-sc-cc).</p>

<p>Oh, another optimization I did on sons-sc-cc - I change the share cache to cache programs that are run. So for users running builds locally on there desktops (well not yet but when we get fully switched over) and they load say the C compiler from vxWorks, it will be cached on their local desktop and subsequent compilations should also run a lot faster!</p>

<p>I'm still not able to build, however. Here's a build from a clean view. Note that I removed the * from your /etc/passwd line szhu so I could use rsh to switch users from ccadmin -&gt; szhu:</p>

<div class=code><pre>
<font color="#3366ff"><b>[ccadmin] sons-sc-cc:</b></font><u>rsh -l szhu sons-sc-cc</u>
No directory /us/SZhu!
Logging in with home = "/".
Last login: Tue Apr 18 11:06:10 from sc-szhu.salira.com
CYGWIN_NT-5.2 SONS-SC-CC 1.5.19(0.150/4/2) 2006-01-20 13:28 i686 Cygwin
WARNING: HOME directory did not exist! Logging in with HOME = /tmp

<b><font color="#009900">SZhu@SONS-SC-CC</font></b> <font
 color="#cc9933">~</font>
$ <u>id</u>
uid=1143(SZhu) gid=513(Domain Users) groups=513(Domain Users)
  
<b><font color="#009900">SZhu@SONS-SC-CC</font></b> <font  color="#cc9933">~</font>
$ <u>cd /dview/3.1.ccadmin/salira/neopon/build/</u>
<b><font color="#009900">SZhu@SONS-SC-CC</font></b>
<font color="#cc9933">/dview/3.1.ccadmin/salira/neopon/build</font>
$ <u>which smake</u>
/view/official/Tools/bin/smake
<b><font color="#009900">SZhu@SONS-SC-CC</font></b>
<font color="#cc9933">/dview/3.1.ccadmin/salira/neopon/build</font>
$ <u>smake</u>
Build server: sons-sc-cc View: 3.1.ccadmin [local]
User: SZhu Dir: /dview/3.1.ccadmin/salira/neopon/build
Performing build locally on sons-sc-cc
sons-sc-cc:make 

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +---------------------------+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; S a l i r a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /|
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NEOPON&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; / |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /---------------------------/&nbsp; |
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |O|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp; /
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Building... |L|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | /
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |C|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |/
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; +---------------------------+
-------------------------------------- (neopon/src/bsp) olc
[ASSEMBLE]&nbsp;&nbsp;&nbsp;&nbsp; sysALib.s
[COMPILE C]&nbsp;&nbsp;&nbsp; sysLib.c
[COMPILE C]&nbsp;&nbsp;&nbsp; sysTffs.c
D:/TOols/Tornado-2.0/target/src/drv/tffs/tffsConfig.c: In function `tffsShowAll':
In file included from sysTffs.c:63:
D:/TOols/Tornado-2.0/target/src/drv/tffs/tffsConfig.c:205: warning: comparison between signed and unsigned
D:/TOols/Tornado-2.0/target/src/drv/tffs/tffsConfig.c: In function `tffsBootImagePut':
D:/TOols/Tornado-2.0/target/src/drv/tffs/tffsConfig.c:389: warning: comparison between signed and unsigned
[COMPILE C]&nbsp;&nbsp;&nbsp; 8260I2C.c
8260I2C.c: In function `i2cInit':
8260I2C.c:260: warning: cast from pointer to integer of different size
8260I2C.c:261: warning: cast from pointer to integer of different size
8260I2C.c:265: warning: cast from pointer to integer of different size
8260I2C.c:266: warning: cast from pointer to integer of different size
[COMPILE C]&nbsp;&nbsp;&nbsp; Fpga_download.c
[COMPILE C]&nbsp;&nbsp;&nbsp; usrConfig_st.c
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrTffs.c: In function `usrTffsLnConfig':
In file included from usrExtra.c:203,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from usrConfig_st.c:123:
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrTffs.c:154: warning: implicit declaration of function `dosFsMkfsOptionsSet'
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrWdb.c: In function `vxTaskCreate':
In file included from usrExtra.c:236,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from usrConfig_st.c:123:
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrWdb.c:581: warning: unused parameter `stackBase'
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrWindview.c: In function `wvOn':
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrWindview.c:269: warning: unused parameter `arg4'
[COMPILE C]&nbsp;&nbsp;&nbsp; usrConfig.c
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrTffs.c: In function `usrTffsLnConfig':
In file included from usrExtra.c:203,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from usrConfig.c:123:
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrTffs.c:154: warning: implicit declaration of function `dosFsMkfsOptionsSet'
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrWdb.c: In function `vxTaskCreate':
In file included from usrExtra.c:236,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from usrConfig.c:123:
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrWdb.c:581: warning: unused parameter `stackBase'
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrWindview.c: In function `wvOn':
D:/TOols/Tornado-2.0/target/src/config/../../src/config/usrWindview.c:269: warning: unused parameter `arg4'
[COMPILE C]&nbsp;&nbsp;&nbsp; fpd_end.c
fpd_end.c: In function `np3400EndAddressForm':
fpd_end.c:1247: too few arguments to function `endEtherAddressForm'
make[2]: *** [../../../build/olc/obj/fpd_end.o] Error 1
make[1]: *** [obj/bsp/olc.olist] Error 2
make: *** [olc/vxWorks_st.elf] Error 2
</pre></div>

<blockquote type="cite">
  Regarding checkin and bug ID labeling, when you check into Clearcase using sons-clearcase you are saying that the trigger that is supposed to label the check in with the bug ID is failing to do so. I will look into this later too.
</blockquote>

<p>I'm not seeing this. In fact I'm seeing evidence saying it's working. The triggers log to /view/official/Tools/logs/triggers.log. Looking at the bottom of that file (tail -f works nicely) shows me:</p>

<div class=code><pre>
CheckinPreop.pl: 4/18/2006@17:38: vdsouza: Checkin checks started for V:\vdsouza3.1\salira\neopon\src\gdb\gdb_csr_dump.c on rel_3.1 branch
CheckinPreop.pl: 4/18/2006@17:38: vdsouza: Successful precheckin of V:\vdsouza3.1\salira\neopon\src\gdb\gdb_csr_dump.c on rel_3.1 branch with bug ID
CheckinPostop.pl: 4/18/2006@17:38: vdsouza: Created label for BUGS200006029
CheckinPostop.pl: 4/18/2006@17:38: vdsouza: Attached label BUGS200006029 to V:\vdsouza3.1\salira\neopon\src\gdb\gdb_csr_dump.c
CheckinPostop.pl: 4/18/2006@17:38: vdsouza: Successful postcheckin of V:\vdsouza3.1\salira\neopon\src\gdb\gdb_csr_dump.c on rel_3.1 branch with bug ID BUGS200006029</tt>
</pre></div>

<p>And indeed gdb_csr_dump.c has a label of BUGS200006029:</p>

<div class=code><pre>
[ccadmin] sons-clearcase:files4bug 6029
Files involved in bug ID BUGS200006029:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /salira/neopon/src/gdb/main/rel_2.0/hainan_integration/rel_2.2/rel_3/1/gdb_csr_dump.c<br>
1 file involved in bug ID BUGS200006029
</pre></div>

<p>Do you have an example of where this is failing?</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  7:45 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000545.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 17, 2006</h2>
                     <a id="a000544"></a>
                     <div class="entry" id="entry-544">
                        <h3 class="entry-header">gethostbyaddr fails</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Researched problem with Tony and Bingchun's machines WRT cqd/cqc</li>

  <li>Attempted to fix problems with Clearquest Desktop Installation</li>
</ul>

<p><b>Time Spent:</b> 2 Hours</p>
                              
                              <p>Here's the progress I made last night:</p>

<ul>
  <li>Determined that part of the problem with Tony Liu's machine and Bingchun's machines was due to the fact that Clearquest was not even installed on their machines. Installed Clearquest 2002.05.00 on Tony's machine - Bingchun installed Clearquest on his own machine.</li>

  <li>Despite the above cqc was still unable to connect to cqd. Determined that a call to gethostbyaddr in cqd was failing for some still unknown reason. The subsequent called to get the host's name would fail in Perl. Not sure why that causes the server to hang, however getting the hostname is only really so that cqd could report nice hostnames. So instead I changed the code to do:</li>

  <div class=code><pre>
# Service this client
my $hostinfo = gethostbyaddr ($cqclient-&gt;peeraddr);
my $host = !defined $hostinfo ? "Unknown" : $hostinfo-&gt;name || $cqclient-&gt;peerhost;
  </pre></div>
   
<p>So if the hostinfo is not attainable with the gethostbyaddr call we'll simply use the host of "unknown". This means that Tony and Bingchun should be able to at least checkin their files.</p>

  <li>Fixed shortcut in //sons-sc-cc/Rational/Clearquest to be named "Install Clearquest" so people can update to the new version of Clearquest.</li>

  <li>Attempted to update the machine adefaria with the new version of Clearquest. Need to uninstall the old version of Clearquest first. Bummer.</li>

  <li>Uninstalled Clearquest on adefaria and installed new version of Clearquest. I was able to make a connection to the new Clearquest server (sons-sc-cc) but I was unable to make a connection to the old and current production version of Clearquest on sons-clearcase!</li>

  <li>I was unable to make a connection to the old version of Clearquest on sons-clearcase on either of Tony's or Bingchun's machines. To summarize, I installed CQ Version 2003.06.00 on adefaria and CQ Version 2002.05.00 on Tony's and Bingchun's machines but none of these were able to establish a CQ connection (via the Clearquest Maintenance Tool) to the current production Clearquest SQL Anywhere database on sons-clearcase! For Clearquest, people in China usually use the web interface anyway. I need to talk to Rational about why I am unable to connect to the old, production Clearquest database.</li>

  <li>Uninstalled CQ 2003.06.00 on adefaria and reinstalled CQ 2002.05.00. Alas even after reinstalling CQ Version 2002.05.00 I still can't create a connection to sons-clearcase on adefaria! Must be something I'm doing wrong but I'm too tired to figure it out.</li>

  <li>I was unable to look into rsh/telnet issues and build issues that Simon reported.<br>
  </li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  7:38 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000544.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     
                     <a id="a000543"></a>
                     <div class="entry" id="entry-543">
                        <h3 class="entry-header">Ant Rant</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Studying Ant</li>
</ul>
                              
                              <p>Recently I started looking into Ant more seriously. Seems like it'd be a good thing to do for my career. But I must tell you, I'm not quite convinced that Ant's a solution to anything except to say that it's probably a more comfortable make for people who think in terms of Java only.</p>

<p>Here's some quotes from the main <a href="http://ant.apache.org/">Ant page</a>:</p>

<blockquote>
  Apache Ant is a Java-based build tool. In theory, it is kind of like Make, but without Make's wrinkles.
</blockquote>

<p>Make wrinkles?!? What wrinkles? Wrinkles are the sign of age and wisedom. Just because you don't understand it do not play it off as if it's bad.</p>

<blockquote>
  Why another build tool when there is already make, gnumake, nmake, jam, and others? Because all those tools have limitations that Ant's original author couldn't live with when developing software across multiple platforms. Make-like tools are inherently shell-based -- they evaluate a set of dependencies, then execute commands not unlike what you would issue in a shell. This means that you can easily extend these tools by using or writing any program for the OS that you are working on. However, this also means that you limit yourself to the OS, or at least the OS type such as Unix, that you are working on.
</blockquote>

<p>That's true. But no more true than the fact that if you want to run make on any other system you also need to have make available on that other system! I take the above to mean that you have a tendency to extend your build to what is natural on the OS in question and thus you start using Unix shell commands and the like. OK. However where, in the scheme of things, can one not run Unix shell commands now a days? Surely Unix and Linux have that covered, and Mac OS/X is basically Unix under the hood too. What  you mean Windows? Well <a href="http://cygwin.com">Cygwin</a> also has that pretty much covered. So then, why avoid a well known, well understood and time test utilitiy such as make?

<blockquote>
  Makefiles are inherently evil as well. Anybody who has worked on them for any time has run into the dreaded tab problem. "Is my command not executing because I have a space in front of my tab!!!" said the original author of Ant way too many times. Tools like Jam took care of this to a great degree, but still have yet another format to use and remember.
</blockquote>

Ah so now we see the real motivation that the original author had for discarding make! He couldn't remember to start his lines with a tab character!

<blockquote>
  Ant is different. Instead of a model where it is extended with shell-based commands, Ant is extended using Java classes. Instead of writing shell commands, the configuration files are XML-based, calling out a target tree where various tasks get executed. Each task is run by an object that implements a particular Task interface.
</blockquote>

<p>Which I guess would be find if you are better at writing Java classes instead of shell commands or other scripts. And why is it that all new, improved, better things must incorporate whatever is in vogue at the time? Do we really need XML files instead of just straightforward ASCII text? And must everything be an object?</p>

<blockquote>
  Granted, this removes some of the expressive power that is inherent by being able to construct a shell command such as `find . -name foo -exec rm {}`, but it gives you the ability to be cross platform -- to work anywhere and everywhere. And hey, if you really need to execute a shell command, Ant has an <exec> task that allows different commands to be executed based on the OS that it is executing on. 
</blockquote>

<p>Ant is only as cross platform as the platforms that ant has been ported to! With things like Cygwin there no need to throw the baby out with the bath water over a few misplaced tabs. Still I guess ant has it's place and I'm sure it's comfortable for Java developers. Sure having an object oriented design probably isn't bad but now people need to learn yet another language - Java - even if they are not developing in Java. And they need to learn XML, etc. And you don't only lose the power and expressiveness of the shell but it seems to me you just lost support for just about all the other langauges as well. AFAICT I see no built in support for Ada, FORTRAN, Pascal, etc.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:06 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000543.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 15, 2006</h2>
                     <a id="a000541"></a>
                     <div class="entry" id="entry-541">
                        <h3 class="entry-header">Production User Database Migrated</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Managed to migrate the production user database</li>

  <li>Clearquest desktop users need to upgrade their software. Meantime they can use the web interface</li>

  <li>Verified cqd and triggers work</li>

  <li>Documented how to switch a desktop to the new server</li>

  <li>Documented how to build on the new server</li>
</ul>

<p><b>Time Spent:</b> 4 Hours</p>
                              
                              <h2>Production User Database Migrated!</h2>

<p>More progress in this area.</p>

<p>I decided to try to use the Sybase Central tool to see if I could
verify or otherwise fix this potentially bad database. I also looked at
running Chkdisk as the eventlog was reporting some bad sectors on the
disk. Unfortunately chkdisk cannot fully check the disk since the
database is on the C drive and the C drive is currently busy. Normally
you just set a flag and chkdisk will run after next boot. But such a
chkdisk will take a long time on a big disk.</p>

<p>Meantime in Sybase Central I decide to do fresh backups of the
databases which seem to go OK. These backup databases look no different
really than the regular databases so I run validate on the backup
database. Hmmm.... Doesn't seem to have any errors. So I tried the
installutil copyuserdb to copy the <b>backup</b> database <b>as if is
was the real production database</b> to the new server. Hmmm.... That
worked!</p>

<p>Next I had to go into Clearquest Maintenance Tool and select Schema
Respository: Upgrade: Selected Connection and upgrade the production
user database. That worked!</p>

<p>I checked the Clearquest web (<a href="http://sons-sc-cc/cqweb/login">http://sons-sc-cc/cqweb/login</a>) and the
new database is indeed there and working!</p>

<h2>Clearquest Desktop Clients Need to Upgrade</h2>

<p><font color="#ff0000"><b>Problem:</b> Clearquest 2002.05.00 desktop
clients cannot access this new database!</font></p>

<p>I tried creating a connection profile to this new database and then
importing it on the old server running 2002.05.00.This did not work!
Later I read in the Rational Suite Migration Guide:</p>

<blockquote>Your network environement can contain misxed versions of
ClearCase and ClearQuest clients (where some clients are at v2003 and
some clients are at ealier versions) if these products are in a
standalone environment, that is:</p>
<p></p>
....
<p></p>

<p>If your vendor database is SQL Anywhere, you do not plan to upgrade to
SQL Anywhere 8.0 until all ClearQuest clients and databases have been
upgraded to version 2003.</p>
</blockquote>

<p>So we'll have to upgrade desktop clients to 2003.06.00! Luckily people
can use the Clearquest Web Client...</p>

<h2>Clearquest Daemon Works with Minor Tweaks</h2>

<p>Checked that cqd and cqc work with the new server. All that need to be
changed is to change the default server from sons-clearcase -&gt;
sons-sc-cc in cqc.pm.</p>

<h2>Checked and Triggers Work in New Environment</h2>

<p>I was able to check to see that the triggers function in the new
environment.</p>

<h2>Switching Your Desktop to the New Server</h2>

<p>Use the following steps switch your desktop to the new server:</p>

<ol>
  <li>Stop all Clearcase activity. Close any Clearcase Explorer windows
and any shells in Clearcase views.</li>
  <li>In a Cygwin shell type ct umount -all to unmount all vobs.</li>
  <li>Go to Control Panel: Clearcase</li>
  <li>Click on the Services tab then Stop Clearcase</li>
  <li>Click OK to the dialog saying Clearcase has stopped</li>
  <li>Click OK to <b>close</b> the Clearcase Control Panel Applet</li>
  <li>Start the Clearcase Control Panel <b>again</b></li>
  <li>On the registry tag, change the registry server to sons-sc-cc</li>
  <li>Click OK to close the Clearcase Control Panel <b>again</b></li>
  <li>On the Registry tab click the drop down arrow for Windows Region.
You should see the new SC region. Select it.</li>
  <li>Click on <b>Apply</b></li>
  <li>Click on the Services Startup tab and then Start Clearcase</li>
  <li>Close the Clearcase Control Panel</li>
  <li>Start a Cygwin shell and type ct hostinfo -l. You should see
something like:<br>
    <br>
<div class=code><pre>
<font color="blue"><b>[ccadmin] adefaria:</b></font><u>ct hostinfo -l</u>
Client: adefaria
  Product: ClearCase 2002.05.00+
  Operating system: Windows NT 5.1 (build 2600) Service Pack 2
  Hardware type: Pentium
  Registry host: <b>sons-sc-cc</b>
  Registry region: <b>SC</b>
  License host: sons-clearcase
</pre></div>

    <p>As you can see we are now pointing to the sons-sc-cc registry
host and the SC region. Sons-clearcase is still the license server at
this time. Type ct lsview and you should see:</p>

<div class="code"><pre>
<font color="blue"><b>[ccadmin] adefaria:</b></font><u>ct lsview</u>
  official             \\sons-sc-cc\Views\SALIRA\ccadmin\official.vws
  3.1.ccadmin     \\sons-sc-cc\Views\SALIRA\ccadmin\3.1.ccadmin.vws
  szhu_view_2     \\sons-sc-cc\Views\SALIRA\szhu\szhu_view_2.vws
    </pre></div>

    <p>A noticeably smaller list of views that are on sons-sc-cc in
the SC region</li>
</ol>

<p>Follow a similar set of steps to switch back to the old registry server
(sons-clearcase) and region (US). No reboots required (provided you
properly stop Clearcase and do things like get out of views and umount
vobs).</p>

<h2>Attempting an Official Build on sons-sc-cc</h2>

<p>This procedure can be done either by following the procedure above to
switch your desktop to the new server or simply use rsh/telnet to log
into sons-sc-cc. Once there:</p>

<ol>
  <li>Make user that the 3.1.ccadmin view is started<br>
<div class=code><pre>
$ ct startview 3.1.ccadmin
</pre></div></li>
  <li>Make sure the salira vob is mounted:<br>
    <br>
<div class=code><pre>
$ ct mount \\salira
</pre></div></li>
  <li>Change directory to the build area:<br>
    <br>
<div class=code><pre>
$ cd /dview/3.1.ccadmin/salira/neopon/build
</pre></div></li>
  <li>Type make:<br>
<div class=code><pre>
$ make
</pre></div></li>
</ol>

                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:55 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000541.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 12, 2006</h2>
                     <a id="a000540"></a>
                     <div class="entry" id="entry-540">
                        <h3 class="entry-header">More fun with SQL ANYWHERE</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <h3>Attempting to transfer databases using MS Access</h3>

<p>OK, trying this methodology:</p>

<ul>
  <li>Used installutil copyschemarepo command to copy schema.db -&gt;
schema.mdb</li>
  <li>Moved schema.mdb to new server</li>
  <li>Used installutil copyuserdb command to copy salira_test.db -&gt;
test.db.</li>
  <li>Moved test.db to new server</li>
  <li>Tried several times to use installutil command to copy
salira_bugs.db (the production database) -&gt; bugs2.db. System aborted
several times. Not sure if this is due to bad disk blocks or not. This
is a major problem as this is the data we care about.</li>
</ul>

<p>Back on the new server:</p>

<ul>
  <li>If I do Connection: New and point to the schema.mdb file it wants
to overwrite it! Instead I did File: Import Profile of a profile of the
old databases. Of course these say SQL_ANYWHERE. I change this to
MS_ACCESS and point to the schema.mdb file and this seems to work.</li>
  <li>Attempt to do Schema Repository: Move. In doing so I set the
Physical Database Name by browsing to the folder via the ellipsis
button. This leaves me with D:\Clearquest\schema.db. Clicking on Finish
give ms:<br>
    <blockquote>The filename you have specified is not a Share. If
other users will need access to this database, you should browse
through "Network Neighborhood" to place is in a share. Continue with
this name?<br>
    </blockquote>
I select No because I do want other users to be able to access this
database. Next I change the D:\Clearquest\salira.db -&gt;
\\sons-sc-cc\Clearquest\schema.db and click Finish. At this point I get
a error dialog stating that it was "Unable to connect to the database
server". After much scratching of the head I realize that I should use
D:\Clearquest\schema.db, ignore the warning, then go back in and set
the Physical Database Name to \\sons-sc-cc\Clearquest\schema.db.<br>
    <br>
Oh, a side issue: After failing using a Physical Database Name of
\\sons-sc-cc\Clearquest\schema.db the Rational Clearquest Maintenance
Tool still creates a schema.db file. If you go Back and correct the
Physical Database Name to a local path and click Finish you'll get a
database I/O error. Turns out you have to remove this schema.db file
first. These two (what else could I call them but) BUGS caused me to
lose many hours of sleep.<br>
    <br>
Managed to move the schema.mdb -&gt; schema.db.</li>
  <li>Switching to the Clearquest Designer now to Database: Update User
Database Properties. As I only have the test.mdb file to convert I
change the user database properties for the test database.</li>
  <li>Now I select Database: Move User Database to move the test user
database to SQL_ANYWHERE</li>
</ul>

<p>At this point I'd like to run Clearquest Designer and do Test Work so I
can at at least verify that I can access the converted to SQL_ANYWHERE
test.db. Unfortunately there is a checked out version of the schema in
the schema database that I copied over and I'm not the owner of that
checked out schema. And I can't login as that user.</p>

<p>By chance I tried Schema Repository: Upgrade: Selected connection in
the Clearquest Maintenance Tool and in stepping through those dialog
boxes it say "The schema repository that you want to upgrade has
checked-out schemas. If you continue the upgrade process, the checked
out schema versions cannot be upgraded and will be deleted from the
system". I continue onward and manage to "upgrade" the schema and test
database. I proceed into Clearquest Designer and manage to Test Work
and viola! I got it up. I am nothing if not tenacious!</p>

<p><b>Total Time:</b> 2 hours</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 10:50 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000540.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 11, 2006</h2>
                     <a id="a000539"></a>
                     <div class="entry" id="entry-539">
                        <h3 class="entry-header">Build bugs, Test suite still not runing nightly</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Fixed bug with saving test.log where I was attempting to save it before I returned from the subroutine. We now save the test.log even if test suite is successful. This is good because continuous building reuses the view area thus destroying any test.logs created before.</li>

  <li>Fixed bug in build::CheckForShutdown where we called LogEvent without a $log parameter. This caused CheckForShutdown to abort the build while in CIT daemon mode and thus we didn't see the error. It also left the shutdown file thus subsequent starts merely shutdown (actually aborted) until one manually removed the shutdown file. Bad bug! Bad, bad!</li>

  <li>Looking into why the test suite works when called at the Build.pl level but fails when called from the streamBuild.pl level.</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 12:15 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000539.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     
                     <a id="a000538"></a>
                     <div class="entry" id="entry-538">
                        <h3 class="entry-header">More SQL Anywhere Wrestling</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Installed SQL Anywhere 8.0.3 Patch to fix problem with Services folder not appearing in Sybase Central</li>

  <li>Spent time trying to figure out how to get a service configured. Eventually figured out that I need to specify -n &lt;<i>machine</i>&gt; as part of the parms or starting the service would just hang</li>

  <li>Instructions given from Rational spoke of converting databases on a single server. This is not what we are doing there. Tried various things in an attempt to extend the directions to two servers and get the installutil command to run. Nothing was working.</li>

  <li>Scoured the Rational documents and the net for "preparedbforupgrade" - turned up little except some guys personal web site talking about how the <i>Rational Suite - Upgrade Guide</i> describes the upgrade procedure with two servers and here's the single server procedure. That's nice, and it's pretty much the exact technote that the Rational support engineer pointed me to. However where's the double server procedure!</li>

  <li>Scoured the Rational site, this time for <i>Rational Suite - Upgrade Guide</i>. Found it! It was a in a pdf file! Apparently the Rational site search engine doesn't search inside pdf files. They should take a lesson from Google! Also searched the system for this pdf file (rs_upgrade.pdf) and it was not on the system. Now why isn't it part of what gets installed?</li>

  <li>Started doing the steps for converting the database as described in the <i>Rational Suite - Upgrade Guide</i>. See below for more.</li>
</ul>

<p><b>Time Spent:</b> 4 hours</p>
                              
                              <h3>Still issues with SQL Anywhere upgrade</h3>

<p>According to the <i>Rational Suite - Upgrade Guide</i> I need to import the connection profile from the SQL Anywhere 5.0 server then update it to add on the new SERVER_VER connection option (I believe I need to specify SERVER_VER=8.0.3 since I've now patched to 8.0.3) then save that connection profile. If I change the database server name to the new name but leave the Physical Database Name pointing to the old server then I get an error. If I change the database server name and point the Physical Database Name to a copy of the schema.db on the new server I can't connect either. If I leave those pointing to the old server and only add on the SERVER_VER parm then the connection updates. But now access to Clearquest fails on the old server complaining that SERVER_VER is invalid! How are you supposed to do this?!? Step by step instructions would be great!</p>

<p>Even if I were to be able to get the above done I would hesitant to perform the next step because it describes using the Clearquest Maintainance Tool to <b>move</b> the schema and user databases!</p>

<blockquote>
Move your schema repository. In the ClearQuest Maintenance Tool, in the <strong>Existing Connections</strong> area, select the connection to your existing SQL Anywhere 5.0 databases, then click <strong>Schema Repository > Move</strong>. Enter database information for a new database under your SQL Anywhere 8.0 server. For example, enter a different filename in the same directory as the existing
database. Click <strong>Finish</strong>.
</blockquote>
<p>I don't want to <b>move</b> databases - I want to simply <b>copy</b> them. Moving them would mean that current production would have to halt until I got it back up and running on the new server.
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 12:37 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000538.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 10, 2006</h2>
                     <a id="a000537"></a>
                     <div class="entry" id="entry-537">
                        <h3 class="entry-header">Save the logfiles! IFrames</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Changed the build process to save the test logfile</li>

  <li>Changed the build_status to use an iframe for the continuous log file</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:49 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000537.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April  9, 2006</h2>
                     <a id="a000535"></a>
                     <div class="entry" id="entry-535">
                        <h3 class="entry-header">SQL Anywhere</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Attempted to migrate Clearquest databases to new server. I was unable to. I've opened up a PMR with IBM Rational #8552849R and expect to get email from them tomorrow.</li>

  <li>Attempting to switch the machine adefaria over to this newly created registry server (sons-sc-cc). Decided to reboot the machine. It never came back up! If you can boot this machine that would be great. You might need to go into the Clearcase Control Panel and set the registry server back to sons-clearcase and set the region to US. It might require a reboot to be effective. Why, when I rebooted it, it failed to come back up?</li>
</ul>

<p><b>Time Spent:</b> 4 hours</p>
                              
                              <h2>Migrating databases to new SQLAnywhere 8.x</h2>

<p>Spent most of the day banging against SQL Anywhere. We need to migrate the databases (both the schema.db and the salira_bugs.db) to the new server. With the new server comes new DBMS software (Sorry but SQL Anywhere 5.5.05 which is what you have on sons-clearcase is being sunsetted anyway).</p>

<p>Now I've done some extensive Clearquest work over at <a href="http://defaria.com/blogs/Status/archives/cat_pqa.html">Broadcom</a> it was all MS SQL based in the back end.</p>

<p>The first problem I have is that there is not service for SQL Anywhere like there used to be over on sons-clearcase. I managed to find C:\Program Files\Rational\SQLAnywhere8\win32\dbeng8.exe and dbsrv8.exe and that appears to be the process to start, there still isn't any automatically starting service for SQL Anywhere 8. That plus when run it prompts with a dialog box that queries about the database to use. I was always under the impression that a DBMS server just runs for any and all databases on the machine. I can just specify the server and leave the database blank but other times when running Sybase Central it complains that it can't start the DB server.</p>

<p>I thought that I could simply use Sybase Central to backup the databases on sons-clearcase then use the restore function of Sybase Central on sons-sc-cc. There are also options like Migrate Database, etc. to deal with differences in databases between old and new versions of SQL Anywhere. All of these had problems for me...</p>

<h2>Backup/Restore</h2>

<p>I backed up the salira_bugs.db file over to \\sons-sc-cc\Clearquest\backup\salira_bugs.db. Next I attempted to restore it on sons-sc-cc I get "Unable to start database server".</p>

<h2>Connect to backup database</h2>

<p>When I attempt to simply connect to that db I get:</p>

<blockquote>
  <p>You are attempting to connect to a version 5.5.03 database running on a version 8.0.2-3601 server. In order for the Sybase Central to use this database, the database must be unloaded and reloaded into a new database (Sybase Central only supports version 7.0.0 and later database). The Unload Database wizard can step you through this process, after which Sybase Central will diconnect from this database.</p>

  <p>Do you want to unload and reload this database? (If not, Sybase Central will disconnect from this database now.)</p>
</blockquote>

<p>If I step through this wizard I eventually get:</p>

<div class=code><pre>
java.lang.UnsatisfiedLinkError: unloadDatabase
Could not unload the database 'salira_bugs'.
</pre></div>

<h2>Migrate Database</h2>

<p>If I attempt to Migrate Database I get a message saying "You must be connected to the database to which you want to migrate" which, of course, I can't...</p>

<h2>Creating and Erase Database</h2>

<p>I have not managed to create a database through Sybase Central (but I have been able to create it through Clearquest Maintainance Tool and the Clearquest Designer - see below). When I try I get: Unable to start database server.</p>

<p>For databases created via Clearquest tools I cannot erase them using Erase database. Instead I get the same thing: Unable to start database server. So far when I need to delete a database I merely remove the databse files themselves.</p>

<p>I can create a schema database and even user databases through the Clearcase Maintainance Tool and Clearquest Designer respectively. But we don't want a new schema nor empty user databases - we want to migrate the old scheme that has our modifications and we want to migrate our old database!</p>

<h2>Moving Databases</h2>

<p>There's also an option to move a database from one server to another. Now I don't want to move databases right yet - I want to copy them. However this move seems to copy the database and then lock the original database. So I tried it out on the test2 database. Effectively you go into the Clearquest Designer on sons-clearcase and then select Database: Move Database then go through the dialog box specifying that you want to move the database over to sons-sc-cc. That works and test2.db does appear over on sons-sc-cc. But when I attempt to connect to it Sybase Central again goes through the unload/load procedure which fails the same way as described above.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  7:07 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000535.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April  8, 2006</h2>
                     <a id="a000536"></a>
                     <div class="entry" id="entry-536">
                        <h3 class="entry-header">New Registry Server</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Upgraded sons-sc-cc to be a registry server</li>

  <li>Removed old replicas in the SC region on sons-clearcase</li>

  <li>Rereplicated the vobs from sons-clearcase. Note sons-clearcase aborted a few times when doing this. I noticed some disk block errors in the Event Viewer. Good thing you have a new system with RAID!</li>

  <li>Cleaned up some more of lost+found</li>

  <li>Looked into the scripts to evaluate the impact of the server switch. There will be some changes but by and large they will be minimal.</li>

  <li>Both <a href="http://sons-sc-cc.salira.com/ccweb">Clearcase Web</a> and <a href="http://sons-sc-cc.salira.com/cqweb/login">Clearquest Web</a> are up and functional.</li>
</ul>

<p><b>Time Spent:</b> 4 hours</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  7:47 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000536.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April  6, 2006</h2>
                     <a id="a000534"></a>
                     <div class="entry" id="entry-534">
                        <h3 class="entry-header">Vob replications</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <h3>Work Performed</h3>

<ul>
  <li>Reinstalled Clearcase with Multisite this time as a server on sons-sc-cc</li>

  <li>Changed certain links to point to sons-sc-cc instead of sons-clearcase</li>

  <li>Created new site_parms.SC</li>

  <li>Replicated salira, salira2, Tools and hardware vobs. Made sure the synchronization is working. Even China now recognizes the new SantaClara replica.</li>

  <li>Created new SC region on sons-clearcase as that's currently our registry server until we switch over</li>

  <li>Cleaned up a little bit of lost+found. Somebody should be doing this (see below).</li>

  <li>Added triggers</li>
</ul>

<h3>Work to be done</h3>

<p><font color=#aaa>(List not exhaustive nor necessarily in sequence)</font></p>
<ul>
  <li>Move registry service from sons-clearcase -&gt; sons-sc-cc</li>

  <li>Move license -&gt; sons-sc-cc</li>

  <li>Perform successful build on sons-sc-cc</li>

  <li>Set up test client and point it ot the new registry server to test access, checkin/out and build</li>

  <li>Set up ctmerge jobs</li>

  <li>Set up Clearquest on sons-sc-cc</li>

  <li>Migrate Clearquest database -&gt; sons-sc-cc</li>

  <li>Set up cqd on sons-sc-cc</li>

  <li>Set up Clearcase sitedefs.dat for client installations</li>

  <li>Resolve problem with albd_server process not starting on boot</li>
</ul>

<p><b>Time spent:</b> 5 hours</p>
                              
                              <h3>lost+found</h3>

<p>The lost+found directory in vobs is there to catch elements that would have otherwise disappeared as a result of a Clearcase action. For example, you create a new directory and put a file in it. Then you decide you don't want that directory so your rmname it. Where does the file under it go? Answer: lost+found. This gives you a chance to recover it should you need to and know where to get it. But most often users either don't want to recover it or simply recreate it. This creates lost+found junk.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  1:30 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000534.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April  5, 2006</h2>
                     <a id="a000533"></a>
                     <div class="entry" id="entry-533">
                        <h3 class="entry-header">sons-sc-cc</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>After speaking to Ron and getting the remote access working I did a few more things last night I:</p>

<ul>
  <li>Installed Clearcase. After Ron had changed the name of the machine to sons-sc-cc all was fine with the Clearcase installation. And multitool (Multisite's cleartool) is even there!</li>

  <li>Installed the Clearcase patch so you're totally up to date.</li>

  <li>Installed Clearquest</li>

  <li>Copied over \\sons-clearcase\Tools -> \\sons-sc-cc\Tools</li>

  <li>Installed and configured Cygwin. This took a while to get all the config stuff there, etc. Created a \\sons-sc-cc\Tools\Cygwin local package area. Sons-sc-cc has the latest Cygwin now.</li>

  <li>Created Clearcase stgloc's for Vobs and Views</li>

  <li>Created empty shell vobs for salira, salira2, tools and hardware. These will be where I Multisite to.</li>

  <li>Defragged drives on new machine.</li>

  <li>Made sure sons-sc-cc was up to date with WindowsUpdate.</li>
</ul>

<p>Tonight I intend to create the initial replica packets for the vobs then ship them over to sons-sc-cc and setup Multisite syncing. I will first Multisite a vob like Tools or perhaps hardware just to go through the procedure and get the syncing jobs set up. Then I will do both salira and salira2.</p>

<p>There's probably still loose ends that need to be looked at but my plan is basically to be able to build in salira (I don't know how to build in salira2!) using only sons-sc-cc.</p>

<p>At that point we could create some views there for say Simon and teach him how to switch regions to the new SC region. Then he'd be working with the new vob server. He could build and otherwise check it out.</p>

<p><b>Time Spent:</b> 3 Hours</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:35 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000533.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
