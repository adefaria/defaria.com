<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml"$>" />

   <title>Status for Andrew DeFaria: January 2007 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/2006_12.html" title="December 2006" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/2007_03.html" title="March 2007" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/2006_12.html">&laquo; December 2006</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/2007_03.html">March 2007 &raquo;</a>
                     </p>
                     
                     
                     

                     <h2 class="date-header">January 18, 2007</h2>
                     <a id="a000612"></a>
                     <div class="entry" id="entry-612">
                        <h3 class="entry-header">VOB UUIDs</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Decided we need to change the Clearcase ID field from a sequential number to one that better represented an instance of a vob tag uniquely. As such we've now made the VOB Replica UUID the key for both the Clearcase record and it's assorted other tables.</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  1:27 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000612.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">January 16, 2007</h2>
                     <a id="a000613"></a>
                     <div class="entry" id="entry-613">
                        <h3 class="entry-header">CC 7.0 Upgrades</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Installed CC 7.0 on dslabcc03. This was done by first removing CC 6.0. The result was a loss of all registry entries. Brought back the registry from the saved area. Now all better</li>

  <li>Did an install-over of CC 7.0 on top of CC 6.0 for dslabcc01. This worked even better</li>

  <li>Performed install-over for dslabcc05</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  1:31 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000613.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">January 12, 2007</h2>
                     <a id="a000611"></a>
                     <div class="entry" id="entry-611">
                        <h3 class="entry-header">Clearcase 7.0</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Set up vob server on dslabcc05</li>

  <li>Set up Multisite synchronization between 1, 3 and 5</li>

  <li>Installed MSHD on 1, 3 and 5</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:07 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000611.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">January 11, 2007</h2>
                     <a id="a000610"></a>
                     <div class="entry" id="entry-610">
                        <h3 class="entry-header">Clearcase 7.0</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Set up lab servers to CC 6.0</li>

  <li>Created some vobs and views in the 6.0 environment</li>

  <li>Populated a vob using clearfsimport</li>

  <li>Replicated vobs amongst the 6.0 servers</li>
<ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  3:28 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000610.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">January  8, 2007</h2>
                     <a id="a000608"></a>
                     <div class="entry" id="entry-608">
                        <h3 class="entry-header">cclic_report year boundary problem</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Documented problem with cclic_report and crossing of the new year's boundary</li>
</ul>
                              
                              <h3>Year boundary problem</h3>

<p>I have been working resolving problems with the cclic_report for this month. The script to do this has been failing due to a subtle bug in the algorithm used for obtaining the necessary files to translate the various user IDs and map them to Org 9 numbers and the like.</p>

<p>The script looks in a series of files out on the file system in order to obtain information to build mapping tables it needs to do the translation. These files are of the form:</p>

<div class=code><pre>
/data/cmetrics/recv/&lt;<i>site</i>&gt;/&lt;<i>type&gt;.&lt;year</i>&gt;/&lt;<i>date</i>&gt;<br>
</pre></div>

<p>Where:</p>

<dl>
  <dt>site</dt>
  <dd>A site designator. This is one of: dal-design (Dallas), nice-design (Nice), tii-shared (Bangalore) or vorlagenkontoliste (Vorlagenkontoliste)</dd>
  <dt>type</dt>
  <dd>The type of map. This is one of: passwd, aids or sbes</dd>
  <dt>year</dt>
  <dd>The current year</dd>
  <dt>date</dt>
  <dd>The current date in YYYY-MM-DD format</dd>
</dl>

<p>These files are automatically generated by dsmetrics however they are not guaranteed to be up to the minute. The script attempts to workaround this by first starting with the current day then working backward one day at a time for up to 30 days. Thus if say /data/cmetrics/dal-design/passwd.2006/2006-12-31 has not yet be generated 2006-12-30 will be checked, then 2006-12-29 and so on.</p>

<p>Problem is that that algorithm <i>assumes</i> that the data store (e.g. /data/cmetrics/&lt;<i>site</i>&gt;/&lt;<i>type</i>&gt;.&lt;<i>year</i>&gt;) has at least 30 days of information. This assumption breaks when the year changes since the year is contained in the parent directory. So, for example, given today is 1/8/2007, if .../passwd.2007/2007-01-08 has not be generated we can only check for 07, 06, .., 01. Checking for .../paswd.<font color="#ff0000"><b>2007</b></font>/<font  color="#3333ff"><b>2006</b></font>-12-31 makes no sense and will never work.</p>

<p>Updating of the various files under /data/cmetrics seems sporadic. Currently the script is still not runnable as there is no /data/cmetrics/recv/tii-shared/password.2007 entries at all! The script is failing with:</p>

<div class=code><pre>
$ ./cclic_report.pl -v
cclic_report.pl (v{VERSION}) starting
Getting full path to data files
Unable to find /data/cmetrics/recv/tii-shared/passwd.2007/2006-12-10 at ./cclic_report.pl line 137
        main::findFile('/data/cmetrics/recv/tii-shared/passwd.2007') called at ./cclic_report.pl line 249
</pre></div>

<p>I can see no real quick or easy solution for this except to wait for tii-shared's 2007 files to be generated...</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  8:34 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000608.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">January  5, 2007</h2>
                     <a id="a000609"></a>
                     <div class="entry" id="entry-609">
                        <h3 class="entry-header">Checkpoint</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Checked in recent changes to GPDB and its associated scripts</li>
</ul>
                              
                              <ul>
  <li>gpdb_add_project:</li>

  <ul>
    <li>Added interrupt handling</li>

    <li>Moved logic that determines what site a machine is in from here to gpdb.pm</li>

    <li>Fixed but in checking "no such map" from NIS</li>
  </ul>

  <li>gpdb_add_vob:</li>

  <ul>
    <li>Added function prototypes</li>

    <li>Changed to put together list of vobs from all regions</li>

    <li>Added getting of Vob Family UUID and Vob UUID</li>

    <li>Now using gpdb_currentSite</li>
  </ul>

  <li>gpdb_convertuk:</p>

  <ul>
    <li>Added function prototypes</li>
  </ul>

  <li>gpdb.pm:</li>

  <ul>
    <li>Reorganized export list</li>

    <li>Added gpdb_mklink_user_to_site,  gpdb_mklink_user_to_project, gpdb_unlink_user_from_project, gpdb_unlink_user_from_site<li>

    <li>Implement gpdb_siteForHostname. This routine returns the site name for the passed in hostname (default localhost)</li>

    <li>Implemented gpdb_getuserByID</li>

    <li>Changed handling of retunred %ccdefaults</li>

    <li>Changed gpdb_getProject to properly return the retired flag</li>

    <li>Change gpdb_putProject to call gpdb_mklink_user_to_project</li>

    <li>Renamed siteName and projectName to gpdb_siteName and gpdb_projectName respctively</li>

    <li>Implemented gpdb_siteAdmins. This returns an array of AXIDs who are site admins</li>
  </ul>

  <li>tables.sql:</li>

  <ul>
    <li>Added family_uuid and vob_uuid</li>
  </ul>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 10:30 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000609.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     
                     <a id="a000607"></a>
                     <div class="entry" id="entry-607">
                        <h3 class="entry-header">Nice is not so "nice"</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Changed gpdb_add_vob.pl to use Rexec.pm in order that it may be able to collect information about vobs from other sites</li>
</ul>
                              
                              <h3>gpdb_add_vob.pl and other sites</h3>

<p>It was hoped that we cout point things to "login servers" instead of machines specifically designated as DesignSync servers as had been the case for gpdb_add_project.pl. These script really only require cleartool and access, through the automount map, to the sync_custom area in order to pick up the SiteRegistry.reg file.</p>

<p>However gpdb_add_vob.pl uses a heuristic in an attempt to determine what project a particular vob is associated with. The heuristic states that the vob storage path will have as part of it's path, a project directory. While this is often, but not always, the case here in Dallas, it is not the case at all in Nice! Thus, even though gpdb_add_vob.pl can log into remote sites to gather information about vobs, when logging into Nice it finds that no vob in Nice adheres to this convention and thus it cannot add vob records for any vob in Nice. Nice had been using vob attributes for things like the AID of the owner of the vob but there is no attribute for the project that a vob is associated with!</p>

                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  8:27 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000607.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">January  4, 2007</h2>
                     <a id="a000605"></a>
                     <div class="entry" id="entry-605">
                        <h3 class="entry-header">gpdb_add_vob.pl</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Changed gpdb_getProjectsAtSite to be able to separately return all Clearcase projects, Designsync projects, Clearcase & Designsync projects, projects without Clearcase or Designsync associated with them</li>

  <li>Modified gpdb_add_vob.pl to traverse through all regions of current registry server to collect all vob tags</li>

  <li>Modified clearcase record to include fields for VOB Family uuid and VOB uuid. Also modified gpdb_add_vob.pl to get these uuids</li>

  <li>Investigated Victor's CC Metrics database</li>

  <li>Fixed bug in gpdb_add_vob.pl that was adding clearcase records assigned to the wrong site.</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 11:20 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000605.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">January  3, 2007</h2>
                     <a id="a000606"></a>
                     <div class="entry" id="entry-606">
                        <h3 class="entry-header">Site Admins</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Changed gpdb_convertuk.pl to properly add mapping records for <i>Site Admins</i></li>

  <li>Changed Single Site Display to display <i>Site Admins</i></li>

  <li>Change Single Site Display to include all information from Excel design spreadsheet from Bill. Also tightened up display of cc_defaults</li>

  <li>Added new gpdb_siteForHostname that returns the site for a given hostname. Default is current host. Uses nslookup to retrieve the CNAME for the host</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 11:27 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000606.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
