<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml"$>" />

   <title>Status for Andrew DeFaria: February 2008 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/2008_01.html" title="January 2008" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/2008_03.html" title="March 2008" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/2008_01.html">&laquo; January 2008</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/2008_03.html">March 2008 &raquo;</a>
                     </p>
                     
                     
                     <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://defaria.com/blogs/Status/archives/2008_02.html#entry-000698"
    trackback:ping="http://defaria.com/mt/mt-tb.cgi/85"
    dc:title="New easter options"
    dc:identifier="http://defaria.com/blogs/Status/archives/2008_02.html#entry-000698"
    dc:subject="General Dynamics"
    dc:description=" Added source command to easter. This is the interactive equivalent of the -file option Changed history to log a -file &amp;lt;file&amp;gt; as a &quot;source &amp;lt;file&amp;gt;&quot; into the history file Changed prompt to &quot;easter&gt;&quot; Documented easter on the wiki Added..."
    dc:creator=""
    dc:date="2008-02-28T14:02:34-06:00" />
</rdf:RDF>
-->


                     <h2 class="date-header">February 28, 2008</h2>
                     <a id="a000698"></a>
                     <div class="entry" id="entry-698">
                        <h3 class="entry-header">New easter options</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Added source command to easter. This is the interactive equivalent of the -file option</li>

  <li>Changed history to log a -file &lt;<em>file</em>&gt; as a "source &lt;<em>file</em>&gt;" into the history file</li>

  <li>Changed prompt to <li>"easter>"</li>

  <li>Documented easter on the wiki</li>

  <li>Added rudimentary set/get commands to add things to the global $_optis hash. This allows the interactive user to set options like activecalls or displaylevel interactively for the during of the easter run. Note, there is no checking to insure the option if valid (i.e. set foo=bar is perfectly acceptable even though there is no "foo" option) nor is proper checking of balancing/mismatching of quotes (e.g. The results of set foo = "unbalanced or mismatched quotes' are undefined).</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  2:02 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000698.html">Permalink</a>
                                 
                                 | <a href="http://defaria.com/blogs/Status/archives/000698.html#trackback">TrackBacks (0)</a>
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://defaria.com/blogs/Status/archives/2008_02.html#entry-000697"
    trackback:ping="http://defaria.com/mt/mt-tb.cgi/84"
    dc:title="For immediate release"
    dc:identifier="http://defaria.com/blogs/Status/archives/2008_02.html#entry-000697"
    dc:subject="General Dynamics"
    dc:description="For immediate release... Recently Gantry mentioned the following problem: Error Prone Deliveries: Another problem is that Reinaldo&apos;s private files have to be merged manually. Ross, Andrew, and I are in a similar situation now where we have to take a..."
    dc:creator=""
    dc:date="2008-02-20T14:49:49-06:00" />
</rdf:RDF>
-->


                     <h2 class="date-header">February 20, 2008</h2>
                     <a id="a000697"></a>
                     <div class="entry" id="entry-697">
                        <h3 class="entry-header">For immediate release</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <h2>For immediate release...</h2>

<p>Recently Gantry mentioned the following problem:</p>

<blockquote type=cite>
  <p>Error Prone Deliveries:</p>

  <p>Another problem is that Reinaldo's private files have to be merged
manually.</p>

  <p>Ross, Andrew, and I are in a similar situation now where we have to
take a snapshot of directories in a view over to seast1 in order to do
development, then remember what we changed and copy them back in and
deliver.</p>

  <p>We have already made several mistakes. </p>
</blockquote>

<p>The problem here is that we have two different Clearcase registry
regions and subnets, code is developed in one region and run in the
other. Gantry proposed a solution of writing more script to maintain
that will essentially copy things between systems. I would like to
propose an alternative...</p>

<h2>Release process</h2>

<p>What if we instead had a release process such that we deliver our
development to the feature stream that is then automatically seen over
on the cclinux region? Code is developed through the WOR process on the
RAN and delivered to the feature stream. This stream has an official
view which is exported to the cclinux region where it is mounted
directly into place<a href="#note_1"><sup>1</sup></a>. Since all
processes that utilize these scripts do so through this base they are
all automatically and immediately updated when the view is updated.
Additionally code is developed cognizant of this base such that an
alternate base can easily be set allowing one to test the release
before making it official.</p>

<h2>Solution proposed</h2>

<h3>Exporting a view</h3>

<p>Clearcase has the ability to export a view/vob path from a view
server to any other machine. This allows you to "access Clearcase from
a machine which does not have Clearcase" (see ct man export_mvfs). In
order to do this a systems administrator adds a line to
/etc/exports.mvfs on the view server where the view resides using the
format of:</p>

<div class=code><pre>
/view/&lt;<i>view_name</i>&gt;/vobs/&lt;<i>vobpath</i>&gt;&lt;<i>netgroup or machine</i>&gt;
</pre></div>

<p>And executes the /opt/rational/clearcase/etc/export_mvfs -a
command.  Additionally &lt;<i>view_name</i>&gt; should be started<a
href="#note_2"><sup>2</sup></a>.</p>

<h3>Official view</h3>

<p>Additionally, as noted above, a view must be utilized. I suggest using
what I like to call <i>official views</i> for this. An <i>official
view</i> is merely a view not associated with any particular person
(e.g. maybe ccadm) that serves in an official capacity. This view
usually has a simple config spec such as the following:</p>

<div class=code><pre>
element * REL_1.0 -nocheckout
</pre></div>

<p>thereby limiting what was seen through the view as only that which is
labeled with REL_1.0. The release process therefore consisted of
applying the REL_1.0 label and poof! Automatically and immediately the
new version was available. Updating to say a REL_1.1 release would
involve then simply a ct setcs and a changing of REL_1.0 to REL_1.1.</p>

<p>For UCM based views, translate the above to applicable baselines...</p>

<h3>Importing the view</h3>

<p>On the client machine, importing the view is simply a mount
command.  The suggestion here is to mount directly to our base,
/usr/local/east:</p>

<div class=code><pre>
$ mount view1:/views/&lt;<i>official view</i>&gt;/vobs/rantest /usr/local/east
</pre></div>

<p>(Actually this should be added to /etc/fstab for automatic, at boot
time, mounting).</p>

<h3>Security and visibility</h3>

<p>There is concern regarding exposing too much visibility of vob
elements in the cclinux region. Since /etc/exports.mvfs allows us to
specify an exacting path of what is exported we can insure that we are
only exporting the .../vobs/rantest portion or even a subdirectory(s)
under rantest. This should sufficiently limit the scope of what's
exposed.</p>

<h2>Notes</h2>

<ol>
  <li><small><a name="note_1"></a>This assumes that we adopt a concept
of a base variable from which everything emanates (e.g. /usr/local/east)</small></li>
  <li><small><a name="note_2"></a>At HP I devised a simply script
solution to insure that views listed in /etc/views_to_start would be
started at boot up on the view servers.</small></li>
</ol>

<p>Comments? Concerns?</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  2:49 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000697.html">Permalink</a>
                                 
                                 | <a href="http://defaria.com/blogs/Status/archives/000697.html#trackback">TrackBacks (0)</a>
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://defaria.com/blogs/Status/archives/2008_02.html#entry-000696"
    trackback:ping="http://defaria.com/mt/mt-tb.cgi/83"
    dc:title="Rexec"
    dc:identifier="http://defaria.com/blogs/Status/archives/2008_02.html#entry-000696"
    dc:subject="General Dynamics"
    dc:description="Rexec Complications Rexec is a Perl module written by me. There are several things that Rexec provides but at it&apos;s core it essentially provides an object oriented interface to a remote command line. Rexec attempts to provide functionality by handling..."
    dc:creator=""
    dc:date="2008-02-12T14:24:24-06:00" />
</rdf:RDF>
-->


                     <h2 class="date-header">February 12, 2008</h2>
                     <a id="a000696"></a>
                     <div class="entry" id="entry-696">
                        <h3 class="entry-header">Rexec</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <h2>Rexec Complications</h2>

<p>Rexec is a Perl module written by me. There are several things that Rexec provides but at it's core it essentially provides an object oriented interface to a remote command line. Rexec attempts to provide functionality by handling the details in nominal cases however it's basic paradigm is that it expects to be able to execute a command on the remote system, for that command to block and for the command to finish and to properly set the exit status. Rexec accomplishes this by using Expect. When instantiated, Rexec attempts to log into the remote machine using a cascading fallback of ssh, rsh and telnet (unless the caller has explicitly requested a particular protocol). User name and password can be supplied or passwordless login must be configured for Rexec to succeed to connect to the remote system.</p>

<p>Thereafter the caller calls the exec method to execute the remote command. Rexec wraps that command with two echo statements that mark the beginning and ending of the command's output as well as the status of the command. Rexec then gathers up the output lines and status, storing them in the object, and returning the output lines as an array (and the status obtainable using the status method). The caller can then proceed accordingly.</p>

<p>But the above does assume that commands are of the nature that they block while operating and that they set the exit code properly. No effort is made to do any output redirection, nor are any assumptions made about the command being executed.</p>

<p>The first problem arises when the caller has a need to "background" a task. Normally in Unix this means adding a "&" to the end of the line to indicate to put the command in the background. In such a case we run into two problems that the normal shell also has to deal with, that being how to handle asynchronous I/O and how to handle the exit status, which can come at any time. So far no functionality has been added to handle any asynchronous I/O - the answer here is <b>don't do that!!!</b>, at least, for now.</p>

<p>Exit status is also not gracefully handled in that it is not attempted to be captured at all.</p>

<p>What Rexec does normally is to add an <tt>echo &lt;<i>unique start string</i>&gt;</tt> to the front of the command and an <tt>echo &lt;<i>unique end string with status</i>&gt;</tt>. Then Rexec scans the output for the start and ending strings and knows that the strings inbetween must have resulted from the output from the command. Rexec also gathers the exit status from the later echo statement. Of course, this assume the command blocks and properly sets the exit status.</p>

<p>Now, if Rexec finds a "&" at the end of the command it will treat it as nonblocking. It does not add the start nor the ending echoes and makes no attempt at gathering neither output nor exit status from this command. Another potential problem are commands which do not indicate their desire to be backgrounded (by specifying the trailing "&" character) but background themselves nonetheless.</p>

<p>Another, odd problem was also discovered when the remote command ended up doing yet another ssh to another system. Such a command also does not return, or at least not right away. Worse yet, there is a good possibility that that 2nd remote ssh will result in a prompt that will be mistaken for the 1st session's prompt by Rexec! No easy way around this either!</p>

<p>Finally, other commands will likewise have a problem when executed remotely. For example: "vi /tmp/foo". But then again, even Expect has problems with this. So we can't be all things to all people but that doesn't mean we cannot be helpful nonetheless.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  2:24 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000696.html">Permalink</a>
                                 
                                 | <a href="http://defaria.com/blogs/Status/archives/000696.html#trackback">TrackBacks (0)</a>
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
