<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml" />

   <title>Status for Andrew DeFaria: Hewlett Packard Archives</title>
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                     </p>
                     
                     
                     

                     <h2 class="date-header">July 13, 2006</h2>
                     <a id="a000560"></a>
                     <div class="entry" id="entry-560">
                        <h3 class="entry-header">Microsoft Software</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Installed Microsoft Visual Studio.NET 2003</li>

  <li>Installed Microsoft Installable File System</li>

  <li>Installed MKS Toolkid</li>

  <li>Changed script to resolve dependancies with new system</li>

  <li>Updated env.pm to use cygpath</li>
</ul>
                              
                              <p class="entry-more-link">
                                 <a href="http://defaria.com/blogs/Status/archives/000560.html#more">Continue reading "Microsoft Software" &raquo;</a>
                              </p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 10:26 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000560.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">July 11, 2006</h2>
                     <a id="a000559"></a>
                     <div class="entry" id="entry-559">
                        <h3 class="entry-header">New Build Server</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>This entry will serve as documentation for making a new Windows build server for RIMF</p>

<ul>
  <li>New machine received with Windows 2003 XP (SP 1?) installed</li>

  <li>Install Clearcase 2003.06.00</li>

  <li>Installed Microsoft Visual Studio.NET 2003</li>

  <li>Installed Cygwin</li>

  <li>Installed JDK 1.4.2</li>
</ul>
                              
                              <p class="entry-more-link">
                                 <a href="http://defaria.com/blogs/Status/archives/000559.html#more">Continue reading "New Build Server" &raquo;</a>
                              </p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  2:48 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000559.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">July  7, 2006</h2>
                     <a id="a000558"></a>
                     <div class="entry" id="entry-558">
                        <h3 class="entry-header">Remove Empty Branch</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Documented problems with empty branches</li>
</ul>
                              
                              <p class="entry-more-link">
                                 <a href="http://defaria.com/blogs/Status/archives/000558.html#more">Continue reading "Remove Empty Branch" &raquo;</a>
                              </p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 12:23 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000558.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">May 30, 2006</h2>
                     <a id="a000554"></a>
                     <div class="entry" id="entry-554">
                        <h3 class="entry-header">Osaka Builds on Windows</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Worked with Zoran to resolve merge issues from RISS15_Integration -> osaka_strm</li>

  <li>Documented how to build development views on Tiburon for the L2 and Base components</li>

  <li>Assisted engineer on problems with view and installer_cmp</li>

  <li>Changed RISS15_Integration to not do testing all the time</li>

  <li>Worked more on osaka_strm build scripts</li>
</ul>
                              
                              <p class="entry-more-link">
                                 <a href="http://defaria.com/blogs/Status/archives/000554.html#more">Continue reading "Osaka Builds on Windows" &raquo;</a>
                              </p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:58 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000554.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 24, 2006</h2>
                     <a id="a000547"></a>
                     <div class="entry" id="entry-547">
                        <h3 class="entry-header">XAM Build</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Got XAM ant build to work. Test build almost working</li>

  <li>Ported Build.pl for use in XAM</li>
</ul>
                              
                              <p class="entry-more-link">
                                 <a href="http://defaria.com/blogs/Status/archives/000547.html#more">Continue reading "XAM Build" &raquo;</a>
                              </p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  7:15 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000547.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 17, 2006</h2>
                     <a id="a000543"></a>
                     <div class="entry" id="entry-543">
                        <h3 class="entry-header">Ant Rant</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Studying Ant</li>
</ul>
                              
                              <p class="entry-more-link">
                                 <a href="http://defaria.com/blogs/Status/archives/000543.html#more">Continue reading "Ant Rant" &raquo;</a>
                              </p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:06 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000543.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 11, 2006</h2>
                     <a id="a000539"></a>
                     <div class="entry" id="entry-539">
                        <h3 class="entry-header">Build bugs, Test suite still not runing nightly</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Fixed bug with saving test.log where I was attempting to save it before I returned from the subroutine. We now save the test.log even if test suite is successful. This is good because continuous building reuses the view area thus destroying any test.logs created before.</li>

  <li>Fixed bug in build::CheckForShutdown where we called LogEvent without a $log parameter. This caused CheckForShutdown to abort the build while in CIT daemon mode and thus we didn't see the error. It also left the shutdown file thus subsequent starts merely shutdown (actually aborted) until one manually removed the shutdown file. Bad bug! Bad, bad!</li>

  <li>Looking into why the test suite works when called at the Build.pl level but fails when called from the streamBuild.pl level.</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 12:15 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000539.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">April 10, 2006</h2>
                     <a id="a000537"></a>
                     <div class="entry" id="entry-537">
                        <h3 class="entry-header">Save the logfiles! IFrames</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Changed the build process to save the test logfile</li>

  <li>Changed the build_status to use an iframe for the continuous log file</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:49 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000537.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">March 30, 2006</h2>
                     <a id="a000532"></a>
                     <div class="entry" id="entry-532">
                        <h3 class="entry-header">Unit Test bugs</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>I think I finally resolved the problem with the Unit Tests not running at night</li>

  <li>Changed to get the test failures and the test errors. If everything passed then no email is to be sent. Otherwise I now include the test failures and errors in the email and the subject line will no longer say SUCCEEDED</li>

  <li>Changed build_status.php to sense if this is a continuous build or just a regular build and act accordingly</li>
</ul>
                              
                              <p class="entry-more-link">
                                 <a href="http://defaria.com/blogs/Status/archives/000532.html#more">Continue reading "Unit Test bugs" &raquo;</a>
                              </p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:54 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000532.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">March 28, 2006</h2>
                     <a id="a000531"></a>
                     <div class="entry" id="entry-531">
                        <h3 class="entry-header">Remove Empty Branch Trigger</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              I have a trigger called the <i>Remove Empty Branch Trigger</i>:<br>
<blockquote>
  <p><a  href="https://defaria.com/Resume/Clearcase/RemoveEmptyBranch.php">Remove
Empty Branch Trigger</a>: This trigger removes the branch and the zero element that is left when a user checks out an element on a branch then cancels the checkout. Normally this causes a branch with only a zero element which is identical to the version from which it was branched. Essentially this empty branch is useless. This trigger prevents that.</p>
</blockquote>

<p>Not only is this empty branch useless but:</p>
<ul>
  <li>It clutters the version tree</li>

  <li>Causes Clearcase to maintain more meta data, slowing down operations</li>

  <li>Can cause additional work for UCM when you rebase</li>
</ul>

<p>I'm experiencing that last bullet item right now. At one time I was attempting to do a delivery for somebody from another stream, first rebasing my stream. The delivery was unsuccessful and it was decided that this other engineer would work on it and deliver himself. So I canceled the delivery. One would think then that my view was relatively clean.</p>

<p>However now I want to deliver something else and I see this old rebase activity hanging around. In looking into the change set I notice a bunch of items from that older attempt at delivering. Why were these still hanging around? I had canceled that delivery right?</p>

<p>Well I believe the problem comes from having empty branches. Take for example the following:</p>

<p><img src="/blogs/images/RmEmptyBranch.png" alt=""></p>

<p>It shows a rebase from osaka/5 -&gt; defaria_osaka/1. Yet these two version compare to be the same! How did this happen? Well think about it. Prior to the rebase I had an empty branch (i.e. I had
defaria_osaka/0 left over from the canceled delivery which merely did an unco). This means that osaka/4 and defaria_osaka/0 were identical. Then osaka/5 came into existance. Now 4 != 5 and when I rebase Clearcase has to propogate osaka/5 creating defaria_osaka/1. Now I have two identical versions and associate meta data and all for naught! Additionally I have a baseline lable on defaria_osaka/1 which give the air of importance to this unimportant version.</p>

<p>Had we had a remove empty branch trigger, when the delivery canceled, the unco would have left defaria_osaka/0 and the remove empty branch trigger would have removed the empty branch. Then my view would have been pointing to osaka/4 (and would have moved to osaka/5 if I were using .../osaka/LATEST and a dynamic view or updated to osaka/5 during the normal course of updating the view). Indeed, allowing empty branches to persist can cause developers to unknowingly get "stuck in
time".</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  2:25 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000531.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">March 27, 2006</h2>
                     <a id="a000530"></a>
                     <div class="entry" id="entry-530">
                        <h3 class="entry-header">Resuming</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>I haven't been keeping this up lately but I've decided to resume my status even if I don't use this as my actual status report.</p>

<p>First I'll try to catch up by summarizing what I've been working on lately. Mostly I've been working on this CIT (Continuous Integration and Test) Perl script. CIT is basically an controlling script that calls other build scripts in use here. The idea was to have this script continually build the software, if it needs to build. A primative form of build avoidance is implemented in that a cleartool update is done and if no files are updated in a particular component then that component will not be built.</p>

<p>Some of its characteristics include:</p>

<ul>
  <li>Can run in one time mode as well as in -cit mode (continuous mode)</li>

  <li>Works off of a config, which specifics defaults for the various parameters which can be overriden on the command line</li>

  <li>If -cit is specified, the script goes into <i>daemon mode</i>.

  <li>Script checks to see if you are in the necessary chrooted environment for building (a requirement)</li>

  <li>Added code in cit mode to eliminate the logfiles created if nothing was built</li>

  <li>At key points in a build a build_status.log file is updated so status can be displayed on a web page</li>

  <li>After a successful build a series of tests are run. Continuous build is not too continuous if the testing hangs! And tests have been known to hang! So the script now forks the tests then sets an overall alarm (default 2 hours) for tests to complete. If they don't then a QUIT signal is sent so that the JREs can try to dump their stacks. After a small wait for that a TERM signal is send to all children fo the tests and again we wait. Finally a KILL signal is sent and an appropriate email is then sent out saying that the tests have timed out</li>

  <li>Corresponding PHP script was written to show the status of the cit</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:42 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000530.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">February 23, 2006</h2>
                     <a id="a000529"></a>
                     <div class="entry" id="entry-529">
                        <h3 class="entry-header">CIT Building</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>Worked a lot on a script to drive the building. This script, called build, utilizes a configuration file as well as command line parameters to support adhoc kind of building (e.g. "Start a build but only build component X, noclean and do the testing, etc.).</p>

<p>Recently added what is called CIT (Continuous Intergration and Test) option as well as some build avoidance at the component level (utilizing the output from cleartool's update command). With --cit turned on the build script will attempt a build by first updating the view. It will then parse cleartool's update log. If nothing new came in for the component then the assumption is made that the component does not need to be rebuilt and skips it. After all components are built, streamBuild.pl will do other things like publishing and testing, etc. Next build will make a baseline (IFF the streamBuild.pl returns 0 status and at least one component was built) as well as update change logs on the web page.</p>

<p>When all of that is done, build will wait for 5 minutes and then restart itself.</p>

<p>Worked out a nasty bug where build was using chdir but streamBuild.pl was using $ENV {PWD}. Turns out that chdir does not change $ENV {PWD}. Fixed by doing "use Cwd qw(chdir)" which effectively sets $ENV {PWD} when chdir is called.</p>

<p><b>WARNING:</b> Found out that streamBuild.pl was not that robust and does not return non zero status for some failures. For example, if it is not able to run unitTests it still might return a 0 status. This is bad. The streamBuild.pl script will have to be investigated and made to return good exit codes.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 12:55 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000529.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">February  6, 2006</h2>
                     <a id="a000528"></a>
                     <div class="entry" id="entry-528">
                        <h3 class="entry-header">Back to HP</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>I'm back at HP, this time in Pleasanton working for the ILM doing Clearcase, Clearquest and release management. This division seems to rely heavily on an internal WIki for much of their documentation and process flow. Spent the first few says getting set up, installing my environment, getting logins, etc. Saw a requirement for an Evil Twin trigger so I offered up mine. Seems mine was not tested all that well under Unix and I had to change some things to remove the vob tag prefix. Also, handling of clearprompt on Unix is a little problematic. Seems that clearprompt is not gui oriented unless you specify -prefer-gui and even then it acts irratic because it does not pay attention to "\n" to represent new lines so I stuck with the non gui specification under Unix.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  9:33 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000528.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
