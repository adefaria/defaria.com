<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml"$>" />

   <title>Status for Andrew DeFaria: August  1, 2004 - August  7, 2004 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/week_2004_07_25.html" title="July 25, 2004 - July 31, 2004" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/week_2004_08_08.html" title="August  8, 2004 - August 14, 2004" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/week_2004_07_25.html">&laquo; July 25, 2004 - July 31, 2004</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/week_2004_08_08.html">August  8, 2004 - August 14, 2004 &raquo;</a>
                     </p>
                     
                     
                     

                     <h2 class="date-header">August  5, 2004</h2>
                     <a id="a000226"></a>
                     <div class="entry" id="entry-226">
                        <h3 class="entry-header">CC-TTE/CommentSQLCode/whosin</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>

<li>Had problems with the Permissions trigger. Something we forgot or didn't think about. If the user attempts to add elements to source control they should be permitted in folders that have .perms. However part of adding to source control checks out the parent directory first. At the parent directory level there is no .perms to permit the user to check out the parent directory! This causes Add to Source Control to fail. Solution was to change the algorithm to account for this</li>

<li>Finished up CommentSQLCode trigger. Added stuff to triggers.dat and documented things in CM_DOCS. Waiting for code review.</li>

<li>Got this bright idea to take GetCCGroups.vbs and make another script that will simply dump the users for the given groups. Useful command line tool called whois</li>

<li>Worked on trying to get PC to install the new Rational Web Server for John</li>

</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  4:38 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000226.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">August  4, 2004</h2>
                     <a id="a000225"></a>
                     <div class="entry" id="entry-225">
                        <h3 class="entry-header">CommentSQLCode Trigger</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>

<p><li>Implemented CommentSQLCode Trigger - need to do code review, triggers.dat, and documentation</li></p>

<p><li>Assisted Loren, Padma and William in getting the Permisisons working</li></p>

</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:35 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000225.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">August  3, 2004</h2>
                     <a id="a000224"></a>
                     <div class="entry" id="entry-224">
                        <h3 class="entry-header">New Trigger</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>Here are the requirements as I understand them for the trigger that Steve Lipson wants for the SQL checkins. Basically he desires a trigger that will capture the checkin comment and other information and insert that information in the form of a comment at the top of the checked in element. This trigger will:</p>

<ul>
  <li>Be a postop trigger for the checkin action</li>
  <li><b>Not</b> be an all element trigger rather it will be attached to certain file elements in the vob</li>
  <li>Be made for the &lt;<i>fill in vob name here</i>&gt; vob</li>
  <li>Only work on file elements - directory elements are to be skipped</li>
  <li>Only work on file elements that have an extension of .sql - other elements will be skipped</li>
</ul>

<p>Roughly the psuedo code for this trigger will be:</p>

<div class="code"><pre>
# Get name of element and its type
$pname        = $ENV{CLEARCASE_PN};
$element_type = $ENV{CLEARCASE_ELTYPE};

# Skip directories and elements that aren't .sql
exit if $element_type =~ /directory/i || $pname !~ /\.sql$/i;

# Get comment and user
$comment   = $ENV{CLEARCASE_COMMENT};
$userid    = $ENV{CLEARCASE_USER};

# Format timestamp
$timestamp = getCurrentTime;

# Parse output of lsactivity -cact -long
($activity_id, $activity_title, $activity_owner) = parseLSActivity;

# Open up $pname for reading and $pname.trig for writting
open PNAME_IN, $pname
  or die "Unable to open $pname for reading - $!\n";

open PNAME_OUT, ">$pname.trig"
  or dir "Unable to open $pname.trig for writing - $!\n";

# Add comment to top of file
print $PNAME_OUT &lt;&lt;END;
-- Date:	    $timestamp
-- Activity: $activity_id: $activity_title
-- Owner:    $activity_owner ($userid)
-- Comment:  $comment
END

# Append $pname
while (<PNAME_IN>) {
  print PNAME_OUT $_;
} # while

close PNAME;
close PNAME_OUT;

# Switch $pname.trig -> $pname
unlink $pname;
rename "$pname.trig", $pname;

# Allow checkin to proceed
exit 0;
</pre></div>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:54 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000224.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">August  2, 2004</h2>
                     <a id="a000223"></a>
                     <div class="entry" id="entry-223">
                        <h3 class="entry-header">Server move (cont)</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <p>OK, licenses are all OK now. BTW hostid is not a combination of IP address and MAC address - it's simply MAC address of the NIC card. Problem appears to be that during the server move the NIC card changed! I verified this with the Rational rep this morning. The current MAC address of the NIC card as shown by ipconfig /all (it's the Physical Address) is 00-0f-20-6d-09-97. I gave the old license strings to the rep and she determined our old MAC address of the NIC card was 00-0b-cd-9b-f4-27.</p>

<p>Looking at the Device Manager on the servers I notice that we have two Network Adapters listed:</p>

<ol>
  <li>HP NC7781 Gigabit Server Adapter</li>
  <li>HP NC7781 Gigabit Server Adapter #2</li>
</ol>

<p>Why we have 2 NIC cards I don't know (perhaps merely for the ability to be multihomed). Normally I see #1 being disabled and #2 being enabled. Rtnlprod01 is like this. Rtnlprod02 has #1 enabled and #2 disabled. For the vob and view servers this does not matter. Either card will work. For rtnlprod03 however, since licenses are tied to the NIC card's MAC address, switching from #1 -> #2 (or #2 -> #1 as I suspect has happened here) will invalidate all licenses. We need to insure that the network adapter for rtnlprod03 remains nailed at either #1 or #2.</p>

<p>Since it appears that the network adapter has changed and since I have obtained a new set of licenses for this new network adapter and still have the old set, I have installed both sets so that in the event that the network adapter switches again we'll be covered. However, if we order additional licenses for say card #1 and somehow we get switched to card #2, those additional licenses will not be represented, hence the desire to nail the NIC card to either one or the other.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:47 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000223.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
