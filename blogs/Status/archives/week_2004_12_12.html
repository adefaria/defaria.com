<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml"$>" />

   <title>Status for Andrew DeFaria: December 12, 2004 - December 18, 2004 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/week_2004_12_05.html" title="December  5, 2004 - December 11, 2004" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/week_2004_12_19.html" title="December 19, 2004 - December 25, 2004" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/week_2004_12_05.html">&laquo; December  5, 2004 - December 11, 2004</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/week_2004_12_19.html">December 19, 2004 - December 25, 2004 &raquo;</a>
                     </p>
                     
                     
                     

                     <h2 class="date-header">December 17, 2004</h2>
                     <a id="a000260"></a>
                     <div class="entry" id="entry-260">
                        <h3 class="entry-header">LOS178 Build/5.0.0 native toolchain build</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>

<li>LOS178 build after copyright fix builds with 12 errors. Test build of LOS178 without copyright fix also builds with 12 errors!</li>

<li>Building of 5.0.0 toolchain natively is failing</li>

</ul>
                              
                              <h3>LOS178 copyright fix</h3>

<p>The Perl script to fix the copyrights in LOS178 sources needs detect if there was a prior copyright block and replace it if necessary. Finding old copyright blocks is hueristic in nature and thus fallable. The problem is there are no sentenals clearly marking our copyright. The best the script can do is attempt to find a comment block that starts and ends with a particular comment line based on the "/" and a number of "*"'s for the start and a number of "*"'s and a "/" for the end. Problem is we do not know if what's inbetween is really our copyright. The hueristic can be tuned finer with some difficulty but currently it does not.</p>

<p>The real difficulty is that there is no real standard in our copyright blocks thus it is hard to get this right</p>

<p>As it stands the script occasionally misinterprets a comment block, sometimes just the ending comment block, and alters the file in such a way that it introduces compile errors.</p>

<p>There were a number of files that this occurred in and they were hand edited</p>

<h3>5.0.0 Native Toolchain Build</h3>

<p>In picking up ECR 23084 I was able to build the toolchain for both cross x86 and ppc. In building the native toolchain there is an error:</p>

<pre>
Configuring texinfo...
configure: error: invalid package name: gcc-version-trigger
Configure in /mnt/toolchain/build-i386/texinfo failed, exiting.
make: *** [stamp-configure-i386] Error 1
</pre>

<p>Thu says that I didn't run fixup.sh but I did. The toolchain does not package up fixup.sh so I grabbed one from somewhere. Thu suggests that we file an ECR for this and fix the Makefile.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at 10:38 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000260.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">December 16, 2004</h2>
                     <a id="a000259"></a>
                     <div class="entry" id="entry-259">
                        <h3 class="entry-header">LOS178 & ECR 23084</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>

<li>Wrote a Perl script to fix up copyrights on LynxOS (178). Working on running that and getting the build to work</li>

<li>Pulled ECR 23084 and built toolchain for x86 & ppc. Need to build native</li>

</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  9:24 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000259.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">December 14, 2004</h2>
                     <a id="a000258"></a>
                     <div class="entry" id="entry-258">
                        <h3 class="entry-header">ECRs 23079 & 23080</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>

<li>Submitted ECR: 23079: PPC: target elf32-powerpc-lynx not found</li>

<li>Submitted ECR: 23080: OUTPUT_FORMAT directive should  be adjusted to elf32-powerpc-lynx</li>

</ul>
                              
                              <p>Thu determined that we have a toolchain problem here so she had me submit ECR 23079. Adam debugged the problem which produced 23080</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  4:55 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000258.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">December 13, 2004</h2>
                     <a id="a000257"></a>
                     <div class="entry" id="entry-257">
                        <h3 class="entry-header">Rebuilding PPC</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>

<li>Rebuilding for the PPC. I messed up a step or two</li>

</ul>
                              
                              <h2>Building cross lynxos for PPC</h2>

<ul>

<li>Cleaned up by removing the ppc directories (i.e. starting from scratch WRT the ppc)</li>

<li>Linked /usr/lynx/5.0.0 -> /export/build1/LYNXOS_500/build/lynxos/120604-A</li>

<li>In /export/build1/LYNXOS_500/build/lynxos/120604-A/int_tools modified START to change steps_ppc to just 1 and 2. We're gonna take this slowly.</li>

<li>Made sure that __profile.exp points to 120604-A. It still does, from before. There are a lot of settings in here that sometimes need to change depending on the situation. For example, right now the TOP_OF_TRUNK variable is set to no but it is usually set to yes.</li>

<li>Execute START and then tail -f LOGS/ppc.log.</li>

<li>Checked out with "check ppc". Seems OK.</li>

<li>Changed START to do steps 3 and 4. I think I could have done 1, 2, 3 and 4 together but Thu only wrote down 1 and 2</li>

<li>Checked again with check ppc. Still seems fine</li>

<li>Changed START to do steps 5en 5el 7 9 14 15 16 (17 doesn't work yet so why do it?) <font color="red"><b>Failure:</b></font> got:<br>

<blockquote>
Failure reason : Compiler does not exist: /export/dev_archive/lynxos/tools-5.0.0/3.2.2-072304/toolchain-powerpc-lynx-lynxos-ppc.tar.gz
</blockquote>

Ah ha! See this is one of those things that just confuses me. Contained in __profile.exp there's:

<tt><pre>
                                                        # compiler binary
#set DIR_PATH(compilers) "/usr/lynx/t3/dev_archive/lynxos/tools-5.0.0/3.2.2-072304"
set DIR_PATH(compilers) "/export/dev_archive/lynxos/tools-5.0.0/3.2.2-072304"
</pre></tt>

 need to uncomment the first line and comment out the second line.</li>

<li>After making the above change I reran START. Errors in makeall.log</li>

</ul>

<h2>Build ppc toolchain</h2>

<p>Thu said that the error sin makeall.log were acceptable. Continuing on to build the ppc toolchain...</p>

<ul>

<li>cd /usr/lynx/5.0.0/ppc (note that /usr/lynx/5.0.0 still points to 120604-A)</li>

<li>Ran . SETUP.bash setting ENV_PREFIX to cwd, target = ppc. which gcc yeilds /usr/lynx/5.0.0/ppc/cdk/linux-elf-ppc/bin/gcc</li>

<li>Toolchain is in /export/build1/LYNXOS_500/build/toolchain/3.2.2/120804 so cd'ed there</li>

<li>make install > install-ppc.log 2>&1 &</li>

<li>Toolchain seemed to build OK this time. Archived toolchain by doing make package then moving toolchain-i686-pc-linux-gnu-powerpc.tar.gz to       /usr/lynx/t3/dev_archive/lynxos/tools-5.0.0/3.2.2-120604. This is a little tricky because this path is a link to a mount on t3 and as such is considered a read only file system. The following worked for me, in /export/build1/LYNXOS_500/build/toolchain/3.2.2/120804:</li>

<tt><pre>
$ rcp toolchain-i686-pc-linux-gnu-powerpc.tar.gz int@t3:/export/dev_archive/lynxos/tools-5.0.0/3.2.2-120604
</pre></tt>

</ul>

<h2>Building cross lynxos for PPC (again)</h2>

<ul>

<li>Linked /usr/lynx/5.0.0 -> /export/build1/LYNXOS_500/build/lynxos/120604-B</li>

<li>In /export/build1/LYNXOS_500/build/lynxos/120604-B/int_tools modified START to change steps_ppc to for 1, 2, 3 and 4.</li>

<li>Execute START and then tail -f LOGS/ppc.log. Steps 1-4 seemed to have worked OK</li>

<li>Looked at __profile.exp and found

<tt><pre>set DIR_PATH(compilers) "/usr/lynx/t3/dev_archive/lynxos/tools-5.0.0/3.2.2-120604"
</pre></tt>

The compiler exists there (because of the archiving step above). Note there was no t3 style reference here.</li>

<li>Ran START again and monitored logs... Errors stating "gcc: installation problem, cannot exec `cc1': No such file or directory"</li>

</ul>

                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  2:40 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000257.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
