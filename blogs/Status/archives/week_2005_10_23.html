<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml"$>" />

   <title>Status for Andrew DeFaria: October 23, 2005 - October 29, 2005 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/week_2005_10_16.html" title="October 16, 2005 - October 22, 2005" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/week_2005_10_30.html" title="October 30, 2005 - November  5, 2005" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/week_2005_10_16.html">&laquo; October 16, 2005 - October 22, 2005</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/week_2005_10_30.html">October 30, 2005 - November  5, 2005 &raquo;</a>
                     </p>
                     
                     
                     

                     <h2 class="date-header">October 28, 2005</h2>
                     <a id="a000461"></a>
                     <div class="entry" id="entry-461">
                        <h3 class="entry-header">PQA: URL Link Issue</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Documented new URL format</li>

  <li>Investigated the feasibility of accommodating a mapping of old URL link with old ID -> new URL</li>
</ul>
                              
                              <h2>Clearquest Web URLs</h2>

<p>With the old Clearquest ASP based Web Platform the following URL would direct you directly to the defected specified in &lt;id&gt;:</p>

<blockquote>
 http://&lt;<i>server</i>&gt;/cqweb/url/default.asp?id=&lt;<i>id</i>&gt;
</blockquote>

<p>This link was often set in email messages generated by action hooks in the schema (e.g. when commitmentLevel's value changed).</p>

<p>With the new Clearquest Java based Web Platform this URL has changed. The new format is a lot longer due to the fact that it is also more flexible:</p>

<blockquote>
http://&lt;<i>Server</i>&gt;/cqweb/main?command=GenerateMainFrame&service=CQ&schema=&lt;<i>DBSETName</i>&gt;&contextid=&lt;<i>DBName</i>&gt;&entityDefName=&lt;<i>entityDefName</i>&lt;&entityID=&gt;<i>entityID</i>&gt;
</blockquote>

<p>Where:</p>

<blockquote>
<i>Server</i>: Name of web server (e.g. extranet.broadcom.com)<br>
<i>DBSETName</i>: Connection ID (e.g. 2005.02.00)<br>
<i>DBName</i>: Name of database (e.g. Cont)<br>
<i>entityDefName</i>: Name of entity record (e.g. Defect)<br>
<i>entityID</i>: ID to display<br>
</blockquote>

<p>For example:

<blockquote>
</p>http://p4test/cqweb/main?command=GenerateMainFrame&service=CQ&schema=2005.02.00&contextid=Cont&entityDefName=Defect&entityID=Cont00012352
</blockquote>

<p>The action hooks in the schema need to change to generate this new URL if the new Clearquest Java based Web Platform is to be used. This will fix all future emails that are generated with such a link.</p>

<p>We cannot fix past emails that already exist in people's mail folders. A thought was given to the idea of configuring the web server such that it would allow the old links to work. I tried, believe me, to see if this was relatively doable. It is not.</p>

<p>Here's what I thought of doing:</p>

<ol>
  <li>Configure RWP so that http://<server>/cqweb/url resolves to another place.</li>

  <li>Configure RWP so that .asp files are considered cqperl scripts. Note RWP is Apache based with Java Tomcat Servelets. I do not think I can configure this RWP to handle true, bona fide ASP pages. Besides I know very little about ASP.</li>

  <li>In this place write a default.asp that is actually a cqperl script. This script would take the id= parameter, look up the id under old_id then generate a redirect in the form of the new URL substituting the new ID.</li>
</ol>

<p>Of course, all of this is non standard, thus unsupported by Rational. Additional, although I managed to do #1 and I'm quite sure I could do #3, I got stuck at #2. The problem is that Rational also doesn't support any Perl cgi stuff from RWP. In fact RWP is for Rational's Web Applications only - they don't even support you running static web pages/sites through RWP. So there is no mod_perl.so for me to load into Apache, let alone a mod_perl.so that supports cqperl -which is a non-standard Perl that only Rational supports.</p>

<p>And with this I think we just need to give up the hope of supporting old URL links to old ID numbers, fix it so that new URL links are of proper format and perhaps implement a simply query for "Look up by Old ID" for the customers.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  2:00 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000461.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 27, 2005</h2>
                     <a id="a000462"></a>
                     <div class="entry" id="entry-462">
                        <h3 class="entry-header">PQA: LDAP</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Worked on trying to test out LDAP Authentication</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  2:16 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000462.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 26, 2005</h2>
                     <a id="a000460"></a>
                     <div class="entry" id="entry-460">
                        <h3 class="entry-header">PQA: More issues</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Investigating PQA issue regarding email links</li>

  <li>Implementing cleanup of Dynamic Lists</li>

  <li>Handed off test DB backup to Vinh</li>

  <li>Investigated data conversion problems</li>
</ul>
                              
                              <h2>PQA: Remaining Issues</h2>

<p>The following issues came up at this meeting:</p>

<ol>
  <li>Requirement to support old style Email Link's (See below)</li>

  <li>Update Production Web Server to latest Clearquest version (See below)</li>

  <li>Remaining data conversion issues (Emailed Vinh asking for details)</li>

  <li>Dynamic List cleanup (Emailed Vinh asking for updates)</li>

  <li>Test DB hand off (Emailed Vinh pointing to backups of my converted database for him to test)</li>
</ol>

<p>Vinh provided an example: http://extranet.broadcom.com/cqweb/url/default.asp?id=Prod00014218. There are several problems with this. First the default.asp indicates an IIS server and an ASP web application. The new version of RWP is not IIS based rather it is Apache based. I cannot find a default.asp in RWP at all. Thus the above style link will not work.</p>

<p>Vinh says that he generates through hooks in CQ. I suspect what is happening is this: When a defect changes state action hooks kick in and determine it's time to send email to notify the appropriate people that a change in state has happened. At this time Vinh's hooks change/generate these links. As such Vinh needs to change his hooks to generate new URLs that conform to the new Clearquest software. One question I have is how did Vinh come up with http://<servername>/url/default.asp?id=<ID> as a syntactical template meaning "Show this specific defect"? I cannot find where this is documented.</p>

<p>I tried http://p4test/url/default.asp?id=<ID> on p4test and that doesn't work. Perhaps this is just an issue of figuring out what the correct URL template is and changing the hook. The hook could also be modified to perhaps add links for http://<server>/<path>/<script>?old_id=<ID> if that is possible. This would then take care of all future emailed URL's. I'm not sure how to account for old emails that may have now invalid links.</p>

<p>I did see that the new Web interface has a Email Defect link which produces URLs of the form: http://p4test/cqweb/main?command=GenerateMainFrame&service=CQ&schema=2005.02.00&contextid=Cont&entityID=33580034&entityDefName=Defect</p>

<p>(Decidedly not user friendly).</p>

<p>The question remains whether or not to go with upgrading the production server to the newest version of Clearquest so we can get the new version of Clearquest Web. It is a different web interface. Ray is looking into getting another machine so we can have both new and old versions of Clearquest Web. One issue is that if we do go to the merged database and new Clearquest Web and run for a while then decide there is some critical flaw, going back to the old Web server will also mean going back to the old databases and losing any work done during the time we were on the new setup.</p>

<h2>Data Conversion Problems</h2>

<p>Vinh wrote:</p>

<blockquote type=cite>
  <p>by compare with Prod0009710, not match values for these</p>

  <ol>
    <li>SW Version</li>

    <li>Time From Resolve To Verify</li>

    <li>Closed Date</li>
  </ol>
</blockquote>

<p># 1 was due to a bug - I fixed this.</p>

<p># 2 and 3 are due to the fact that these fields are set to readonly. The odd thing is that they do not appear to have any good. The question then is how do they obtain values? My guess is that these values are fielded in by some other sort of hook script at some time. My workaround is to add these to the list of fields that must be toggled to optional in order for the conversion to work and toggled back after the conversion. My fear is what other fields are like these?</p>

<p>The list of readonly fields in the schema are:</p>

<ol>
  <li>Fixed_In_Project</li>

  <li>Close_Date (Mentioned above)</li>

  <li>Submit_Date (Already toggled to optional)</li>

  <li>Submitter (Already toggled to optional)</li>

  <li>Notes_Log</li>

  <li>old_id (Already toggled to optional)</li>

  <li>TimeFromSubmitToVerify</li>

  <li>TimeToVerify (Time From Resolve To Verify mentioned above)</li>

  <li>Audit_Log (Already toggled to optional)</li>
</ol>

<p>My guess here is that the other fields (#1, 5 & 7 above) are also empty. The solution therefore it to toggle all readonly fields in the list above to optional before performing the merge.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  4:14 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000460.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">October 25, 2005</h2>
                     <a id="a000459"></a>
                     <div class="entry" id="entry-459">
                        <h3 class="entry-header">Daylight Savings Time & Clearcase</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Looked into potential problems with DST and Clearcase</li>

  <li>Investigated problem with Deliver between Projects</li>

  <li>Investigated performance problems on Windows Build machines in San Diego</lI>
</ul>
                              
                              <h2>DST and Clearcase</h2>

<p> Utilizing pcsjca-ccrmt03 and ccase-sj1-4 I set up the following snapshot views:</p>

<ul>
  <li>adefaria_view2: View database on //pcsjca-ccrmt03/VWS/ADEFARIA.vws - snapshot view contents in my home directory, P drive P:/adefaria_view2</li>

  <li>adefaria_view3: View database also on //pcsjca-ccmnt03/VWS/ADEFARIA3.vws - snapshot view contents on //ccase-sj1-4/adefaria/adefaria_view3. This is a samba share I set up on ccase-sj1-4.</li>
</ul>

<p>These snapshot views loaded the Tools vob.</p>

<p>Next I:</p>

<ul>
  <li>Went into adefaria_view2, Tools/Benchmark and checked out a file</li>

  <li>Went into adefaria_view2, Tools/Benchmark and forcefully hijacked a file</li>

  <li>Went into adefaria_view3, Tools/convert and checked out a file</li>

  <li>Went into adefaria_view3, Tools/convert and forcefully hijacked a file</li>

  <li>Turned off NTP and Windows Time Service</li>
</ul>

<p>Next I performed the following tests:</p>

<ol>
  <li>Changed the time back one hour on both pcsjca-ccrmt03 and ccase-sj1-4. This simulates the upcoming Daylight Savings Time change where both server and client theoretically change times at the same time.</li>

  <li>Performed an update of Benchmark/convert for adefaria_view2 and adefaria_3. Looked for "everything being hijacked". Did not experience that. Instead I saw what I expected, update only complained about the one legitimate hijacked file - as it should. The other checked out file listed as checked out - as expected. No other files were listed as hijacked.</li>

  <li>Changed the time on the server (ccase-sj1-4) back 1 hour. Left the client (pcsjca-ccrmt03) set where it was. This simulates the situation where the server changes time for DST but the client doesn't.</li>

  <li>Repeated #2 - same results</li>

  <li>Changed the time back one hour on the client but left the server one hour ahead. This simulates the situation where the client changes time for DST but the server doesn't.</li>

  <li>Repeated #2 - same results</li>
</ol>

<p>So I'm confused as to what the problem is. Am I doing something wrong?</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  3:54 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000459.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
