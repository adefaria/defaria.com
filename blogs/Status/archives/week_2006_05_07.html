<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml"$>" />

   <title>Status for Andrew DeFaria: May  7, 2006 - May 13, 2006 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/week_2006_04_30.html" title="April 30, 2006 - May  6, 2006" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/week_2006_05_21.html" title="May 21, 2006 - May 27, 2006" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/week_2006_04_30.html">&laquo; April 30, 2006 - May  6, 2006</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/week_2006_05_21.html">May 21, 2006 - May 27, 2006 &raquo;</a>
                     </p>
                     
                     
                     

                     <h2 class="date-header">May  8, 2006</h2>
                     <a id="a000552"></a>
                     <div class="entry" id="entry-552">
                        <h3 class="entry-header">sons-sc-cc crontab and checking in files</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <h3>Regarding sons-sc-cc's crontab</h3>

<p>I copied (and modified) the crontab for ccadmin@sons-clearcase -&gt; ccadmin@sons-sc-cc changing sons-clearcase -&gt; sons-sc-cc where appropriate. I had also commented out the ctmerge lines. We don't want to be doing ctmerges on sons-sc-cc just yet as sons-sc-cc doesn't yet master the branches that sons-clearcase does. If we did we'd have to establish a whole new branching structure like sc_1.0, etc. That would be doable but since sons-clearcase will be decommissioned I think it's cleaner to simple transfer mastership of everything over to sons-sc-cc. However before we can do that we need to get all the users off of sons-clearcase and using sons-sc-cc.</p>

<p>The only thing currently left in ccadmin's crontab on sons-sc-cc are:</p>

<div class=code><pre>
00 02 * * * //sons-sc-cc/Views/official/Tools/bin/update_view -q official

00 00 * * * /usr/bin/find /tmp -type f -ctime +3 -exec rm -f {} \;

01 03 * * Sat //sons-sc-cc/Views/official/Tools/adm/bin/dum -s /dev/d/Views/* &gt; /tmp/viewspace.log
</pre></div>

<p>These three things are mostly administrative, updating the view official, cleaning out old files in /tmp and doing a report of the size of the snapshot views -&gt; /tmp/viewspace.log. Sons-clearcase also does that. The report has the disk usage of all of the folders in the Views share sorted by the biggest users.</p>

<h3>Regarding checking in files/directories and cleaning views</h3>

<p>As we move off of sons-clearcase and onto sons-sc-cc you should instruct the engineers in Santa Clara to do the following:</p>

<ol>
  <li>Check in all files and directories in your views</li>

  <li>Check for any view private files you may wish to keep and save them somewhere</li>

  <li>For each view you own and that you have cleaned out with #1 and #2 above, remove it. If you have problems then see the Clearcase Administrator</li>
</ol>

<p>This goes for both snapshot views on the server (//sons-clearcase/Views) and local snapshot views on your desktop as well as any dynamic views you may have. It is not required that you remove local snapshot views however by removing the snapshot views on the server (//sons-clearcase/Views) we get a better picture of what views remain.</p>

<p>When all of your elements have been successfully checked in, all your view private files saved and all of your views removed you can switch to the new server by executing
/view/official/Tools/bin/switch-sons-sc-cc at a Cygwin prompt. Close any of your Clearcase tools (e.g. Clearcase Explorer) first. Then start Clearcase Explorere and create new views and proceed with your work. If you saved view private files and wish to restore them then copy them from the saved locations into a newly created view.</p>

<h3>What are view private files and why are they possibly important?</h3>

<p>We all know what file/directory elements are and what a checked out file/directory is. View private files are files in your view that have not been added to source control. These can be the result of a compile (e.g. foo.o AKA a derived object because they have been derived and can be re-derived if necessary) or they can be simply a file that you
created (e.g. file.txt). Sometimes you may create a view private file that you want to keep, possibly wanting to add it to source control at some later time. You generally don't need to worry about derived objects (IOW you can regenerate foo.o provided foo.c is in source control). But if you say created some new files that you use in the build but have not yet added them to source control, but intend to, then you obviously want to keep them. Perhaps it's time to add them to source control...</p>

<p>To list view private files use:</p>

<div class=code><pre>
$ ct lsco
</pre></div>

<p>In your view.</p>

<h3>Checking what's still checked out</h3>

<p>Most people know how to Find Checkout. But to find all checkouts easily
from a command line you can do:</p>

<div class=code><pre>
$ ct lsco -avobs
</pre></div>

<p>Again this needs to be done in a view context (cd /view/official for example). This way you can see what's left to check in for everybody. We're aiming for 0!
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  9:56 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000552.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">May  7, 2006</h2>
                     <a id="a000551"></a>
                     <div class="entry" id="entry-551">
                        <h3 class="entry-header">Clearquest Migrated</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Backed up production database again</li>

  <li>Shutdown Clearquest database and cqd on sons-clearcase</li>

  <li>Changed several scripts that used to refer to sons-clearcase to refer to sons-sc-cc. For example, cqc now defaults to sons-sc-cc to find the server instead of sons-clearcase</li>

  <li>Added setting of Clearquest connection parameters via a reg file to upgrade clearquset</li>

  <li>Checked in changes to scripts as well as added the switch-sons-clearcase and switch-sons-sc-cc scripts and their assoicated reg files into Clearcase</li>

  <li>Fixed up sons-cc, its albd_server process was stuck, and made sure that the changes multisited over to sons-cc.</li>

  <li>Checked out to insure that cqc on sons-cc contacts and works with sons-sc-cc</li>
</ul>

<p><b>Time Spent:</b> 3 hours</p>
                              
                              <p>Well I have migrated the Clearquest database to sons-sc-cc and I believe I've tidied up the necessary scripts and other things so that this transition will be relatively smooth.</p>

<p>You should announce that you are now on a new Clearquest server. Users using the web interface (i.e. China) should point there browsers to <a href="http://sons-sc-cc/cqweb/login">http://sons-sc-cc/cqweb/login</a> and login as usual. Although the new Clearquest web is a total redesign most of it is pretty intuitive and I don't think current Clearquest web users will require much hand holding.</p>

<p>Meantime I made sure that cqd is working and cqc can talk to it. Additionally I had to get sons-cc to work. Seems it was kinda stuck with the albd_server process running at 50% and multisite getting stuck. I believe I cleared that up. cqc appears to work from sons-cc now.</p>

<p>For any Clearquest client users (worse case they can use Clearquest web) they need to update to the new version of the Clearquest Client. They should be able to simply do "upgrade clearquest" in a Cygwin shell. If, however, there are problems with that here would be roughly the equivalent steps from Windows:</p>

<ul>
  <li>Uninstall the old version of Clearquest (Control Panel: Add/Remove Programs: Rational Clearquest... etc.) You may need to reboot.</li>

  <li>Install new version of Clearquest. Browse to \\sons-sc-cc\Rational\Clearquest and double click on the Install Clearquest shortcut. This shortcut runs setup with the sitedefs.dat as a parameter. Follow instructions - reboot when requested.</li>

  <li>Start: Programs: Rational Software: Rational Clearquest:Clearquest Maintenance Tool.</li>

  <li>Select File: Import Profile.</li>

  <li>Click on the ellipsis button (...) and browse to
\\sons-sc-cc\Clearquest (Note this is not the same as \\sons-sc-cc\Rational\Clearquest where the installation lives) and select the 2003.06.00.ini file. This connection profile has all of the connection parameters for the new database.</li>

  <li>Select Next then Finish</li>
</ul>

<p>That should set up your connection to the database. Then try the Clearquest Client.</p>

<p>I will try to make myself available Monday in case there are problems.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:37 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000551.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
