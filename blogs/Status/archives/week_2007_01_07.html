<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml"$>" />

   <title>Status for Andrew DeFaria: January  7, 2007 - January 13, 2007 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/week_2006_12_31.html" title="December 31, 2006 - January  6, 2007" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/week_2007_01_14.html" title="January 14, 2007 - January 20, 2007" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/week_2006_12_31.html">&laquo; December 31, 2006 - January  6, 2007</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/week_2007_01_14.html">January 14, 2007 - January 20, 2007 &raquo;</a>
                     </p>
                     
                     
                     

                     <h2 class="date-header">January 12, 2007</h2>
                     <a id="a000611"></a>
                     <div class="entry" id="entry-611">
                        <h3 class="entry-header">Clearcase 7.0</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Set up vob server on dslabcc05</li>

  <li>Set up Multisite synchronization between 1, 3 and 5</li>

  <li>Installed MSHD on 1, 3 and 5</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  6:07 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000611.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">January 11, 2007</h2>
                     <a id="a000610"></a>
                     <div class="entry" id="entry-610">
                        <h3 class="entry-header">Clearcase 7.0</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Set up lab servers to CC 6.0</li>

  <li>Created some vobs and views in the 6.0 environment</li>

  <li>Populated a vob using clearfsimport</li>

  <li>Replicated vobs amongst the 6.0 servers</li>
<ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  3:28 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000610.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     

                     <h2 class="date-header">January  8, 2007</h2>
                     <a id="a000608"></a>
                     <div class="entry" id="entry-608">
                        <h3 class="entry-header">cclic_report year boundary problem</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Documented problem with cclic_report and crossing of the new year's boundary</li>
</ul>
                              
                              <h3>Year boundary problem</h3>

<p>I have been working resolving problems with the cclic_report for this month. The script to do this has been failing due to a subtle bug in the algorithm used for obtaining the necessary files to translate the various user IDs and map them to Org 9 numbers and the like.</p>

<p>The script looks in a series of files out on the file system in order to obtain information to build mapping tables it needs to do the translation. These files are of the form:</p>

<div class=code><pre>
/data/cmetrics/recv/&lt;<i>site</i>&gt;/&lt;<i>type&gt;.&lt;year</i>&gt;/&lt;<i>date</i>&gt;<br>
</pre></div>

<p>Where:</p>

<dl>
  <dt>site</dt>
  <dd>A site designator. This is one of: dal-design (Dallas), nice-design (Nice), tii-shared (Bangalore) or vorlagenkontoliste (Vorlagenkontoliste)</dd>
  <dt>type</dt>
  <dd>The type of map. This is one of: passwd, aids or sbes</dd>
  <dt>year</dt>
  <dd>The current year</dd>
  <dt>date</dt>
  <dd>The current date in YYYY-MM-DD format</dd>
</dl>

<p>These files are automatically generated by dsmetrics however they are not guaranteed to be up to the minute. The script attempts to workaround this by first starting with the current day then working backward one day at a time for up to 30 days. Thus if say /data/cmetrics/dal-design/passwd.2006/2006-12-31 has not yet be generated 2006-12-30 will be checked, then 2006-12-29 and so on.</p>

<p>Problem is that that algorithm <i>assumes</i> that the data store (e.g. /data/cmetrics/&lt;<i>site</i>&gt;/&lt;<i>type</i>&gt;.&lt;<i>year</i>&gt;) has at least 30 days of information. This assumption breaks when the year changes since the year is contained in the parent directory. So, for example, given today is 1/8/2007, if .../passwd.2007/2007-01-08 has not be generated we can only check for 07, 06, .., 01. Checking for .../paswd.<font color="#ff0000"><b>2007</b></font>/<font  color="#3333ff"><b>2006</b></font>-12-31 makes no sense and will never work.</p>

<p>Updating of the various files under /data/cmetrics seems sporadic. Currently the script is still not runnable as there is no /data/cmetrics/recv/tii-shared/password.2007 entries at all! The script is failing with:</p>

<div class=code><pre>
$ ./cclic_report.pl -v
cclic_report.pl (v{VERSION}) starting
Getting full path to data files
Unable to find /data/cmetrics/recv/tii-shared/passwd.2007/2006-12-10 at ./cclic_report.pl line 137
        main::findFile('/data/cmetrics/recv/tii-shared/passwd.2007') called at ./cclic_report.pl line 249
</pre></div>

<p>I can see no real quick or easy solution for this except to wait for tii-shared's 2007 files to be generated...</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  8:34 AM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000608.html">Permalink</a>
                                 
                                 
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
