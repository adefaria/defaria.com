<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard">
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <meta name="generator" content="Movable Type 5.2.3" />

   <link rel="stylesheet" href="http://defaria.com/blogs/Status/styles-site.css" type="text/css" />
   <link rel="alternate" type="application/atom+xml" title="Atom" href="http://defaria.com/blogs/Status/atom.xml" />
   <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://defaria.com/blogs/Status/index.xml"$>" />

   <title>Status for Andrew DeFaria: March 11, 2007 - March 17, 2007 Archives</title>

   <link rel="start" href="http://defaria.com/blogs/Status/" title="Home" />
   <link rel="prev" href="http://defaria.com/blogs/Status/archives/week_2007_03_04.html" title="March  4, 2007 - March 10, 2007" />
   <link rel="next" href="http://defaria.com/blogs/Status/archives/week_2007_03_18.html" title="March 18, 2007 - March 24, 2007" />
</head>
<body class="layout-one-column">
   <div id="container">
      <div id="container-inner" class="pkg">

         <div id="banner">
            <div id="banner-inner" class="pkg">
               <h1 id="banner-header"><a href="http://defaria.com/blogs/Status/" accesskey="1">Status for Andrew DeFaria</a></h1>
               <h2 id="banner-description">Searchable status reports and work log</h2>
            </div>
         </div>

         <div id="pagebody">
            <div id="pagebody-inner" class="pkg">
               <div id="alpha">
                  <div id="alpha-inner" class="pkg">
                     
                     <p class="content-nav">
                        <a href="http://defaria.com/blogs/Status/archives/week_2007_03_04.html">&laquo; March  4, 2007 - March 10, 2007</a> |
                        <a href="http://defaria.com/blogs/Status/">Main</a>
                        | <a href="http://defaria.com/blogs/Status/archives/week_2007_03_18.html">March 18, 2007 - March 24, 2007 &raquo;</a>
                     </p>
                     
                     
                     <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://defaria.com/blogs/Status/archives/week_2007_03_11.html#entry-000624"
    trackback:ping="http://defaria.com/mt/mt-tb.cgi/13"
    dc:title="MySQL Client Libraries"
    dc:identifier="http://defaria.com/blogs/Status/archives/week_2007_03_11.html#entry-000624"
    dc:subject="Texas Instruments"
    dc:description=" Worked on solutions for MySQL client library problem..."
    dc:creator=""
    dc:date="2007-03-16T17:32:56-06:00" />
</rdf:RDF>
-->


                     <h2 class="date-header">March 16, 2007</h2>
                     <a id="a000624"></a>
                     <div class="entry" id="entry-624">
                        <h3 class="entry-header">MySQL Client Libraries</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Worked on solutions for MySQL client library problem</li>
</ul>
                              
                              Andrew DeFaria wrote:
<blockquote type="cite"> Chris Davey
wrote:
  <blockquote type="cite">
<p>Andrew</p>
    
<p>have update the /apps/cmpackages as per the web page ane try the new version of mkview_linked but faile to run:</p>

<h3>sunos</h3>

<div class=code><pre>
warmflash,a0741187&gt; ./mkview_linked 
install_driver(mysql) failed: Can't load
'/apps/cmpackages/perl/lib/site_perl/5.8.0/sun4-solaris-thread-multi/auto/DBD/mysql/mysql.so'
for module DBD::mysql: ld.so.1: mkview_linked: fatal:
libmysqlclient.so.12: open failed: No such file or directory at
/apps/cmpackages/perl/lib/5.8.0/sun4-solaris-thread-multi/DynaLoader.pm
line 229.
at (eval 1) line 3
Compilation failed in require at (eval 1) line 3.
Perhaps a required shared library or dll isn't installed where expected
at ./mkview_linked line 54

warmflash,a0741187&gt; ls -l
/apps/cmpackages/perl/lib/site_perl/5.8.0/sun4-solaris-thread-multi/auto/DBD/mysql
total 712
-r--r--r-- 1 amemgr ameadm 0 Mar 16 09:05 mysql.bs
-r-xr-xr-x 1 amemgr ameadm 360080 Mar 16 09:05 mysql.so*
</pre></div>

<h3>linux</h3>

<div class=code><pre>
ace.tiuk.ti.com,a0741187&gt; ./mkview_linked
install_driver(mysql) failed: Can't load
'/apps/cmpackages/perl/lib/site_perl/5.8.0/i686-linux-thread-multi/auto/DBD/mysql/mysql.so'
for module DBD::mysql: libmysqlclient.so.12: cannot open shared object
file: No such file or directory at
/apps/cmpackages/perl/lib/5.8.0/i686-linux-thread-multi/DynaLoader.pm
line 229.
at (eval 1) line 3
Compilation failed in require at (eval 1) line 3.
Perhaps a required shared library or dll isn't installed where expected
at ./mkview_linked line 54
ace.tiuk.ti.com,a0741187&gt; ls -l
/apps/cmpackages/perl/lib/site_perl/5.8.0/sun4-solaris-thread-multi/auto/DBD/mysql
ls:
/apps/cmpackages/perl/lib/site_perl/5.8.0/sun4-solaris-thread-multi/auto/DBD/mysql:
No such file or directory
</pre></div>
  </blockquote>

<p>The problem seems to be that you lack /apps/mysql/&lt;version&gt; which is what we used to build the DBD::mysql package. We are working on alternate solutions. Meantime could you try the following:</p>

  <ul>
    <li>mkdir /apps/mysql</li>
    <li>On Solaris (warmflash): rsync -rlz
stashu.dal.design.ti.com:/apps/mysql/4.0.16 /apps/mysql</li>
    <li>On Linux (ace): rsync -rlz
drteeth.dal.design.ti.com:/apps/mysql/4.0.17 /app/mysql</li>
  </ul>

<p>Try mkview_linked. Let us know.</p>

</blockquote>

<h1>Meantime back at the lab...</h1>

<h2>Short version:</h2>

<p>Nix the rsyncing of /apps/mysql and redo the rsync of /apps/cmpackages. We're put a copy of mysql under /apps/cmpackages. After refreshing your /apps/cmpackages area you should see an /apps/cmpackages/mysql directory. Then test mkview_linked again.</p>

<h2>Long version (AKA the gory details...)</h2>

<p>In order to get mkview_linked to use DBD::mysql, the Perl package of mysql must be compiled and installed. Perl packages often glue some subsystem's API (in this case MySQL), normally written in C or something like that to a Perl package (i.e. a .pm file). So on the one
end we have architecturally dependent code (usually a .a or .so library) and on the other we have (hopefully) architecturally neutral and interpreted Perl code (the .pm module). Therefore the process usually involves a makefile, execution of gcc to compile the <i>glue code</i> between the Perl and the subsystem's API as well as installing into the proper place, all of these files.</p>

<p>When Perl then calls the module DynaLoader.pm gets involved to load the appropriate architecturally dependent libraries so that calls to the Perl subroutines flow through the glue code and the appropriate API is called.</p>

<p>Since architecturally dependent code is involved we need to build this for the different architectures that we support. Further, MySQL in particular, has it's own library, libmysqlclient.a, which contains the API itself. So the glue code (mysql.so) needs to locate and load the appropriate libmysqlclient.a before it can successfully call an API. Finally there are issues of the version number of the, in this case, client software and the server software. Suffice to say, this is not always easy stuff!</p>

<p>Oh and we need mention that we are also talking about a large corporation here with various sites and the like; in most cases MySQL's client libraries will <b>not</b> be available locally nor of the right version - IOW we cannot trust that the MySQL client libraries will be local.</p>

<p>Oh and did I mention that mysql is not officially supported by TI...</p>

<p>We had hoped that /apps/mysql/&lt;version&gt;, while not officially supported, would be widely available but on our first guinea pi... ah... test subject, TI UK, we found that not to be the case. It looked like we had two ways to go: either 1) copy the /apps/mysql/&lt;version&gt; over to the remote sites or 2) include the /apps/mysql/&lt;version&gt; trees under /apps/cmpackages as our own mini distribution. I've implemented the latter. Now refreshing your /apps/cmpackages tree will carry along the necessary MySQL client libraries necessary to support mkview_linked and friends in most situations.</p>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:32 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000624.html">Permalink</a>
                                 
                                 | <a href="http://defaria.com/blogs/Status/archives/000624.html#trackback">TrackBacks (0)</a>
                              </p>
                           </div>
                        </div>
                     </div>
                     
                     <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://defaria.com/blogs/Status/archives/week_2007_03_11.html#entry-000623"
    trackback:ping="http://defaria.com/mt/mt-tb.cgi/12"
    dc:title="Remote sites/mkview"
    dc:identifier="http://defaria.com/blogs/Status/archives/week_2007_03_11.html#entry-000623"
    dc:subject="Texas Instruments"
    dc:description=" Gained access to a few new remote sites. Updated GPDB. Alas there&apos;s no DesignSync info at these sites and none of the vobs have vobstorage paths that indicate a project! Got access to cmmgr but was unable to publish..."
    dc:creator=""
    dc:date="2007-03-13T17:26:14-06:00" />
</rdf:RDF>
-->


                     <h2 class="date-header">March 13, 2007</h2>
                     <a id="a000623"></a>
                     <div class="entry" id="entry-623">
                        <h3 class="entry-header">Remote sites/mkview</h3>
                        <div class="entry-content">
                           <div class="entry-body">
                              <ul>
  <li>Gained access to a few new remote sites. Updated GPDB. Alas there's no DesignSync info at these sites and none of the vobs have vobstorage paths that indicate a project!</li>

  <li>Got access to cmmgr but was unable to publish new mysql from all architectures</li>

  <li>Started incorporating the UK changes into mkview. Need to replicate these to mkview_linked (?)</li>
</ul>
                              
                              <p class="entry-footer">
                                 <span class="post-footers">Posted by  at  5:26 PM</span> <span class="separator">|</span> <a class="permalink" href="http://defaria.com/blogs/Status/archives/000623.html">Permalink</a>
                                 
                                 | <a href="http://defaria.com/blogs/Status/archives/000623.html#trackback">TrackBacks (0)</a>
                              </p>
                           </div>
                        </div>
                     </div>
                     
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>
